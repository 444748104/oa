(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var JsonRoutes = Package['simple:json-routes'].JsonRoutes;
var RestMiddleware = Package['simple:json-routes'].RestMiddleware;
var InstanceManager = Package['steedos:workflow'].InstanceManager;
var WorkflowManager_format = Package['steedos:workflow'].WorkflowManager_format;
var Workflow = Package['steedos:workflow'].Workflow;
var SteedosTable = Package['steedos:workflow'].SteedosTable;
var InstanceReadOnlyTemplate = Package['steedos:workflow'].InstanceReadOnlyTemplate;
var TemplateManager = Package['steedos:workflow'].TemplateManager;
var CoreForm = Package['steedos:workflow'].CoreForm;
var InstanceNumberRules = Package['steedos:workflow'].InstanceNumberRules;
var getHandlersManager = Package['steedos:workflow'].getHandlersManager;
var permissionManager = Package['steedos:workflow'].permissionManager;
var workflowTemplate = Package['steedos:workflow'].workflowTemplate;
var approveManager = Package['steedos:workflow'].approveManager;
var stepManager = Package['steedos:workflow'].stepManager;
var flowManager = Package['steedos:workflow'].flowManager;
var formManager = Package['steedos:workflow'].formManager;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var __coffeescriptShare;

(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/steedos_workflow-chart/core.coffee                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/steedos_workflow-chart/routes/chart.coffee                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;
var FlowversionAPI;
FlowversionAPI = {
  traceMaxApproveCount: 10,
  traceSplitApprovesIndex: 5,
  isExpandApprove: false,
  getAbsoluteUrl: function (url) {
    var rootUrl;
    rootUrl = __meteor_runtime_config__ ? __meteor_runtime_config__.ROOT_URL_PATH_PREFIX : "";

    if (rootUrl) {
      url = rootUrl + url;
    }

    return url;
  },
  writeResponse: function (res, httpCode, body) {
    res.statusCode = httpCode;
    return res.end(body);
  },
  sendInvalidURLResponse: function (res) {
    return this.writeResponse(res, 404, "url must has querys as instance_id.");
  },
  sendAuthTokenExpiredResponse: function (res) {
    return this.writeResponse(res, 401, "the auth_token has expired.");
  },
  replaceErrorSymbol: function (str) {
    return str.replace(/\"/g, "&quot;").replace(/\n/g, "<br/>");
  },
  getStepHandlerName: function (step) {
    var approverNames, stepHandlerName;

    switch (step.deal_type) {
      case 'specifyUser':
        approverNames = step.approver_users.map(function (userId) {
          var user;
          user = db.users.findOne(userId);

          if (user) {
            return user.name;
          } else {
            return "";
          }
        });
        stepHandlerName = approverNames.join(",");
        break;

      case 'applicantRole':
        approverNames = step.approver_roles.map(function (roleId) {
          var role;
          role = db.flow_roles.findOne(roleId);

          if (role) {
            return role.name;
          } else {
            return "";
          }
        });
        stepHandlerName = approverNames.join(",");
        break;

      default:
        stepHandlerName = '';
        break;
    }

    return stepHandlerName;
  },
  getStepLabel: function (stepName, stepHandlerName) {
    if (stepName) {
      stepName = "<div class='graph-node'> <div class='step-name'>" + stepName + "</div> <div class='step-handler-name'>" + stepHandlerName + "</div> </div>";
      stepName = FlowversionAPI.replaceErrorSymbol(stepName);
    } else {
      stepName = "";
    }

    return stepName;
  },
  getStepName: function (step, cachedStepNames) {
    var cachedStepName, stepHandlerName, stepName;
    cachedStepName = cachedStepNames[step._id];

    if (cachedStepName) {
      return cachedStepName;
    }

    stepHandlerName = FlowversionAPI.getStepHandlerName(step);
    stepName = FlowversionAPI.getStepLabel(step.name, stepHandlerName);
    cachedStepNames[step._id] = stepName;
    return stepName;
  },
  generateStepsGraphSyntax: function (steps, currentStepId, isConvertToString, direction) {
    var cachedStepNames, graphSyntax, nodes;
    nodes = ["graph " + direction];
    cachedStepNames = {};
    steps.forEach(function (step) {
      var lines;
      lines = step.lines;

      if (lines != null ? lines.length : void 0) {
        return lines.forEach(function (line) {
          var stepName, toStep, toStepName;

          if (step.name) {
            if (step.step_type === "condition") {
              nodes.push("	class " + step._id + " condition;");
            }

            stepName = FlowversionAPI.getStepName(step, cachedStepNames);
          } else {
            stepName = "";
          }

          toStep = steps.findPropertyByPK("_id", line.to_step);
          toStepName = FlowversionAPI.getStepName(toStep, cachedStepNames);
          return nodes.push("	" + step._id + "(\"" + stepName + "\")-->" + line.to_step + "(\"" + toStepName + "\")");
        });
      }
    });

    if (currentStepId) {
      nodes.push("	class " + currentStepId + " current-step-node;");
    }

    if (isConvertToString) {
      graphSyntax = nodes.join("\n");
      return graphSyntax;
    } else {
      return nodes;
    }
  },
  getApproveJudgeText: function (judge) {
    var judgeText, locale;
    locale = "zh-CN";

    switch (judge) {
      case 'approved':
        judgeText = TAPi18n.__('Instance State approved', {}, locale);
        break;

      case 'rejected':
        judgeText = TAPi18n.__('Instance State rejected', {}, locale);
        break;

      case 'terminated':
        judgeText = TAPi18n.__('Instance State terminated', {}, locale);
        break;

      case 'reassigned':
        judgeText = TAPi18n.__('Instance State reassigned', {}, locale);
        break;

      case 'relocated':
        judgeText = TAPi18n.__('Instance State relocated', {}, locale);
        break;

      case 'retrieved':
        judgeText = TAPi18n.__('Instance State retrieved', {}, locale);
        break;

      case 'returned':
        judgeText = TAPi18n.__('Instance State returned', {}, locale);
        break;

      case 'readed':
        judgeText = TAPi18n.__('Instance State readed', {}, locale);
        break;

      default:
        judgeText = '';
        break;
    }

    return judgeText;
  },
  getTraceName: function (traceName, approveHandlerName) {
    if (traceName) {
      traceName = "<div class='graph-node'> <div class='trace-name'>" + traceName + "</div> <div class='trace-handler-name'>" + approveHandlerName + "</div> </div>";
      traceName = FlowversionAPI.replaceErrorSymbol(traceName);
    } else {
      traceName = "";
    }

    return traceName;
  },
  getTraceFromApproveCountersWithType: function (trace) {
    var approves, counters;
    counters = {};
    approves = trace.approves;

    if (!approves) {
      return null;
    }

    approves.forEach(function (approve) {
      if (approve.from_approve_id) {
        if (!counters[approve.from_approve_id]) {
          counters[approve.from_approve_id] = {};
        }

        if (counters[approve.from_approve_id][approve.type]) {
          return counters[approve.from_approve_id][approve.type]++;
        } else {
          return counters[approve.from_approve_id][approve.type] = 1;
        }
      }
    });
    return counters;
  },
  getTraceCountersWithType: function (trace, traceFromApproveCounters) {
    var approves, counters, isExpandApprove, traceMaxApproveCount;
    counters = {};
    approves = trace.approves;

    if (!approves) {
      return null;
    }

    traceMaxApproveCount = FlowversionAPI.traceMaxApproveCount;
    isExpandApprove = FlowversionAPI.isExpandApprove;
    approves.forEach(function (toApprove) {
      var toApproveFromId, toApproveHandlerName, toApproveType;
      toApproveType = toApprove.type;
      toApproveFromId = toApprove.from_approve_id;
      toApproveHandlerName = toApprove.handler_name;

      if (!toApproveFromId) {
        return;
      }

      return approves.forEach(function (fromApprove) {
        var counter, counter2, counterContent, ref;

        if (fromApprove._id === toApproveFromId) {
          counter = counters[toApproveFromId];

          if (!counter) {
            counter = counters[toApproveFromId] = {};
          }

          if (!counter[toApprove.type]) {
            counter[toApprove.type] = [];
          }

          counter2 = counter[toApprove.type];

          if ((ref = traceFromApproveCounters[toApprove._id]) != null ? ref[toApproveType] : void 0) {
            return counter2.push({
              from_type: fromApprove.type,
              from_approve_handler_name: fromApprove.handler_name,
              to_approve_id: toApprove._id,
              to_approve_handler_name: toApprove.handler_name
            });
          } else {
            counterContent = isExpandApprove ? null : counter2.findPropertyByPK("is_total", true);

            if (counterContent) {
              counterContent.count++;

              if (!(counterContent.count > traceMaxApproveCount)) {
                return counterContent.to_approve_handler_names.push(toApprove.handler_name);
              }
            } else {
              return counter2.push({
                from_type: fromApprove.type,
                from_approve_handler_name: fromApprove.handler_name,
                to_approve_id: toApprove._id,
                count: 1,
                to_approve_handler_names: [toApprove.handler_name],
                is_total: true
              });
            }
          }
        }
      });
    });
    return counters;
  },
  pushApprovesWithTypeGraphSyntax: function (nodes, trace) {
    var approves, currentTraceName, extraHandlerNamesCounter, fromApprove, fromApproveId, results, splitIndex, tempHandlerNames, toApproveId, toApproveType, toApproves, traceCounters, traceFromApproveCounters, traceMaxApproveCount;
    traceFromApproveCounters = FlowversionAPI.getTraceFromApproveCountersWithType(trace);
    traceCounters = FlowversionAPI.getTraceCountersWithType(trace, traceFromApproveCounters);

    if (!traceCounters) {
      return;
    }

    extraHandlerNamesCounter = {};
    traceMaxApproveCount = FlowversionAPI.traceMaxApproveCount;
    splitIndex = FlowversionAPI.traceSplitApprovesIndex;
    currentTraceName = trace.name;

    for (fromApproveId in meteorBabelHelpers.sanitizeForInObject(traceCounters)) {
      fromApprove = traceCounters[fromApproveId];

      for (toApproveType in meteorBabelHelpers.sanitizeForInObject(fromApprove)) {
        toApproves = fromApprove[toApproveType];
        toApproves.forEach(function (toApprove) {
          var extraCount, isTypeNode, strToHandlerNames, toHandlerNames, traceName, typeName;
          typeName = "";

          switch (toApproveType) {
            case 'cc':
              typeName = "传阅";
              break;

            case 'forward':
              typeName = "转发";
              break;

            case 'distribute':
              typeName = "分发";
          }

          isTypeNode = ["cc", "forward", "distribute"].indexOf(toApprove.from_type) >= 0;

          if (isTypeNode) {
            traceName = toApprove.from_approve_handler_name;
          } else {
            traceName = FlowversionAPI.getTraceName(currentTraceName, toApprove.from_approve_handler_name);
          }

          if (toApprove.is_total) {
            toHandlerNames = toApprove.to_approve_handler_names;

            if (splitIndex && toApprove.count > splitIndex) {
              toHandlerNames.splice(splitIndex, 0, "<br/>,");
            }

            strToHandlerNames = toHandlerNames.join(",").replace(",,", "");
            extraCount = toApprove.count - traceMaxApproveCount;

            if (extraCount > 0) {
              strToHandlerNames += "等" + toApprove.count + "人";

              if (!extraHandlerNamesCounter[fromApproveId]) {
                extraHandlerNamesCounter[fromApproveId] = {};
              }

              extraHandlerNamesCounter[fromApproveId][toApproveType] = toApprove.to_approve_id;
            }
          } else {
            strToHandlerNames = toApprove.to_approve_handler_name;
          }

          if (isTypeNode) {
            return nodes.push("	" + fromApproveId + ">\"" + traceName + "\"]--" + typeName + "-->" + toApprove.to_approve_id + ">\"" + strToHandlerNames + "\"]");
          } else {
            return nodes.push("	" + fromApproveId + "(\"" + traceName + "\")--" + typeName + "-->" + toApprove.to_approve_id + ">\"" + strToHandlerNames + "\"]");
          }
        });
      }
    }

    approves = trace.approves;

    if (!_.isEmpty(extraHandlerNamesCounter)) {
      results = [];

      for (fromApproveId in meteorBabelHelpers.sanitizeForInObject(extraHandlerNamesCounter)) {
        fromApprove = extraHandlerNamesCounter[fromApproveId];
        results.push(function () {
          var results1;
          results1 = [];

          for (toApproveType in meteorBabelHelpers.sanitizeForInObject(fromApprove)) {
            toApproveId = fromApprove[toApproveType];
            tempHandlerNames = [];
            approves.forEach(function (approve) {
              var ref;

              if (fromApproveId === approve.from_approve_id) {
                if (!((ref = traceFromApproveCounters[approve._id]) != null ? ref[toApproveType] : void 0)) {
                  return tempHandlerNames.push(approve.handler_name);
                }
              }
            });
            results1.push(nodes.push("	click " + toApproveId + " callback \"" + tempHandlerNames.join(",") + "\""));
          }

          return results1;
        }());
      }

      return results;
    }
  },
  generateTracesGraphSyntax: function (traces, isConvertToString, direction) {
    var graphSyntax, lastApproves, lastTrace, nodes;
    nodes = ["graph " + direction];
    lastTrace = null;
    lastApproves = [];
    traces.forEach(function (trace) {
      var currentTraceName, lines;
      lines = trace.previous_trace_ids;
      currentTraceName = trace.name;

      if (lines != null ? lines.length : void 0) {
        lines.forEach(function (line) {
          var currentFromTraceName, fromApproves, fromTrace, toApproves;
          fromTrace = traces.findPropertyByPK("_id", line);
          currentFromTraceName = fromTrace.name;
          fromApproves = fromTrace.approves;
          toApproves = trace.approves;
          lastTrace = trace;
          lastApproves = toApproves;
          return fromApproves.forEach(function (fromApprove) {
            var fromApproveHandlerName, fromTraceName, judgeText, toTraceName;
            fromApproveHandlerName = fromApprove.handler_name;

            if (toApproves != null ? toApproves.length : void 0) {
              return toApproves.forEach(function (toApprove) {
                var fromTraceName, judgeText, toTraceName;

                if (["cc", "forward", "distribute"].indexOf(toApprove.type) < 0) {
                  if (["cc", "forward", "distribute"].indexOf(fromApprove.type) < 0) {
                    fromTraceName = FlowversionAPI.getTraceName(currentFromTraceName, fromApproveHandlerName);
                    toTraceName = FlowversionAPI.getTraceName(currentTraceName, toApprove.handler_name);
                    judgeText = FlowversionAPI.getApproveJudgeText(fromApprove.judge);

                    if (judgeText) {
                      return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")--" + judgeText + "-->" + toApprove._id + "(\"" + toTraceName + "\")");
                    } else {
                      return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")-->" + toApprove._id + "(\"" + toTraceName + "\")");
                    }
                  }
                }
              });
            } else {
              if (["cc", "forward", "distribute"].indexOf(fromApprove.type) < 0) {
                fromTraceName = FlowversionAPI.getTraceName(currentFromTraceName, fromApproveHandlerName);
                toTraceName = FlowversionAPI.replaceErrorSymbol(currentTraceName);
                judgeText = FlowversionAPI.getApproveJudgeText(fromApprove.judge);

                if (judgeText) {
                  return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")--" + judgeText + "-->" + trace._id + "(\"" + toTraceName + "\")");
                } else {
                  return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")-->" + trace._id + "(\"" + toTraceName + "\")");
                }
              }
            }
          });
        });
      } else {
        trace.approves.forEach(function (approve) {
          var traceName;
          traceName = FlowversionAPI.getTraceName(currentTraceName, approve.handler_name);
          return nodes.push("	" + approve._id + "(\"" + traceName + "\")");
        });
      }

      return FlowversionAPI.pushApprovesWithTypeGraphSyntax(nodes, trace);
    });

    if (lastApproves != null) {
      lastApproves.forEach(function (lastApprove) {
        return nodes.push("	class " + lastApprove._id + " current-step-node;");
      });
    }

    if (isConvertToString) {
      graphSyntax = nodes.join("\n");
      return graphSyntax;
    } else {
      return nodes;
    }
  },
  sendHtmlResponse: function (req, res, type) {
    var allowDirections, currentStepId, direction, error_msg, flowversion, graphSyntax, instance, instance_id, query, ref, ref1, steps, title, traces;
    query = req.query;
    instance_id = query.instance_id;
    direction = query.direction || 'TD';
    allowDirections = ['TB', 'BT', 'RL', 'LR', 'TD'];

    if (!_.include(allowDirections, direction)) {
      return this.writeResponse(res, 500, "Invalid direction. The value of direction should be in ['TB', 'BT', 'RL', 'LR', 'TD']");
    }

    if (!instance_id) {
      FlowversionAPI.sendInvalidURLResponse(res);
    }

    title = query.title;

    if (title) {
      title = decodeURIComponent(decodeURIComponent(title));
    } else {
      title = "Workflow Chart";
    }

    error_msg = "";
    graphSyntax = "";
    FlowversionAPI.isExpandApprove = false;

    if (type === "traces_expand") {
      type = "traces";
      FlowversionAPI.isExpandApprove = true;
    }

    switch (type) {
      case 'traces':
        instance = db.instances.findOne(instance_id, {
          fields: {
            traces: 1
          }
        });

        if (instance) {
          traces = instance.traces;

          if (traces != null ? traces.length : void 0) {
            graphSyntax = this.generateTracesGraphSyntax(traces, false, direction);
          } else {
            error_msg = "没有找到当前申请单的流程步骤数据";
          }
        } else {
          error_msg = "当前申请单不存在或已被删除";
        }

        break;

      default:
        instance = db.instances.findOne(instance_id, {
          fields: {
            flow_version: 1,
            flow: 1,
            traces: {
              $slice: -1
            }
          }
        });

        if (instance) {
          currentStepId = (ref = instance.traces) != null ? (ref1 = ref[0]) != null ? ref1.step : void 0 : void 0;
          flowversion = WorkflowManager.getInstanceFlowVersion(instance);
          steps = flowversion != null ? flowversion.steps : void 0;

          if (steps != null ? steps.length : void 0) {
            graphSyntax = this.generateStepsGraphSyntax(steps, currentStepId, false, direction);
          } else {
            error_msg = "没有找到当前申请单的流程步骤数据";
          }
        } else {
          error_msg = "当前申请单不存在或已被删除";
        }

        break;
    }

    res.setHeader('Content-Type', 'text/html');
    return this.writeResponse(res, 200, "<!DOCTYPE html>\n<html>\n	<head>\n		<meta charset=\"utf-8\">\n		<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,user-scalable=yes\">\n		<title>" + title + "</title>\n		<link rel=\"icon\" type=\"image/png\" sizes=\"192x192\" href=\"/favicons/android-chrome-192x192.png\">\n		<link rel=\"manifest\" href=\"/favicons/manifest.json\">\n		<meta name=\"mobile-web-app-capable\" content=\"yes\">\n		<meta name=\"theme-color\" content=\"#000\">\n		<meta name=\"application-name\">\n		<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-57x57.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-60x60.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-72x72.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-76x76.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-114x114.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-120x120.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-144x144.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-152x152.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-180x180.png") + "\">\n		<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n		<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">\n		<meta name=\"apple-mobile-web-app-title\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"228x228\" href=\"" + this.getAbsoluteUrl("/favicons/coast-228x228.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-16x16.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-32x32.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"96x96\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-96x96.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"230x230\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-230x230.png") + "\">\n		<link rel=\"shortcut icon\" href=\"" + this.getAbsoluteUrl("/favicons/favicon.ico") + "\">\n		<link rel=\"yandex-tableau-widget\" href=\"" + this.getAbsoluteUrl("/favicons/yandex-browser-manifest.json") + "\">\n		<meta name=\"msapplication-TileColor\" content=\"#fff\">\n		<meta name=\"msapplication-TileImage\" content=\"" + this.getAbsoluteUrl("/favicons/mstile-144x144.png") + "\">\n		<meta name=\"msapplication-config\" content=\"" + this.getAbsoluteUrl("/favicons/browserconfig.xml") + "\">\n		<meta property=\"twitter:image\" content=\"" + this.getAbsoluteUrl("/favicons/twitter.png") + "\">\n		<meta property=\"og:image\" content=\"" + this.getAbsoluteUrl("/favicons/open-graph.png") + "\">\n		<link rel=\"stylesheet\" href=\"" + this.getAbsoluteUrl("/packages/steedos_workflow-chart/assets/mermaid/dist/mermaid.css") + "\"/>\n		<script type=\"text/javascript\" src=\"" + this.getAbsoluteUrl("/lib/jquery/jquery-1.11.2.min.js") + "\"></script>\n		<script type=\"text/javascript\" src=\"" + this.getAbsoluteUrl("/packages/steedos_workflow-chart/assets/mermaid/dist/mermaid.min.js") + "\"></script>\n		<style>\n			body { \n				font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n				text-align: center;\n				background-color: #fff;\n			}\n			.loading{\n				position: absolute;\n				left: 0px;\n				right: 0px;\n				top: 50%;\n				z-index: 1100;\n				text-align: center;\n				margin-top: -30px;\n				font-size: 36px;\n				color: #dfdfdf;\n			}\n			.error-msg{\n				position: absolute;\n				left: 0px;\n				right: 0px;\n				bottom: 20px;\n				z-index: 1100;\n				text-align: center;\n				font-size: 20px;\n				color: #a94442;\n			}\n			#flow-steps-svg .node rect{\n				fill: #ccccff;\n				stroke: rgb(144, 144, 255);\n    						stroke-width: 2px;\n			}\n			#flow-steps-svg .node.current-step-node rect{\n				fill: #cde498;\n				stroke: #13540c;\n				stroke-width: 2px;\n			}\n			#flow-steps-svg .node.condition rect{\n				fill: #ececff;\n				stroke: rgb(204, 204, 255);\n    						stroke-width: 1px;\n			}\n			#flow-steps-svg .node .trace-handler-name{\n				color: #777;\n			}\n			#flow-steps-svg .node .step-handler-name{\n				color: #777;\n			}\n			div.mermaidTooltip{\n				position: fixed!important;\n				text-align: left!important;\n				padding: 4px!important;\n				font-size: 14px!important;\n				max-width: 500px!important;\n				left: auto!important;\n				top: 15px!important;\n				right: 15px;\n			}\n			.btn-zoom{\n				background: rgba(0, 0, 0, 0.1);\n				border-color: transparent;\n				display: inline-block;\n				padding: 2px 10px;\n				font-size: 26px;\n				border-radius: 20px;\n				background: #eee;\n				color: #777;\n				position: fixed;\n				bottom: 15px;\n				outline: none;\n				cursor: pointer;\n				z-index: 99999;\n				-webkit-user-select: none;\n				-moz-user-select: none;\n				-ms-user-select: none;\n				user-select: none;\n				line-height: 1.2;\n			}\n			@media (max-width: 768px) {\n				.btn-zoom{\n					display:none;\n				}\n			}\n			.btn-zoom:hover{\n				background: rgba(0, 0, 0, 0.2);\n			}\n			.btn-zoom-up{\n				left: 15px;\n			}\n			.btn-zoom-down{\n				left: 60px;\n				padding: 1px 13px 3px 13px;\n			}\n		</style>\n	</head>\n	<body>\n		<div class = \"loading\">Loading...</div>\n		<div class = \"error-msg\">" + error_msg + "</div>\n		<div class=\"mermaid\"></div>\n		<script type=\"text/javascript\">\n			mermaid.initialize({\n				startOnLoad:false\n			});\n			$(function(){\n				var graphNodes = " + JSON.stringify(graphSyntax) + ";\n				//方便前面可以通过调用mermaid.currentNodes调式，特意增加currentNodes属性。\n				mermaid.currentNodes = graphNodes;\n				var graphSyntax = graphNodes.join(\"\\n\");\n				console.log(graphNodes);\n				console.log(graphSyntax);\n				console.log(\"You can access the graph nodes by 'mermaid.currentNodes' in the console of browser.\");\n				$(\".loading\").remove();\n\n				var id = \"flow-steps-svg\";\n				var element = $('.mermaid');\n				var insertSvg = function(svgCode, bindFunctions) {\n					element.html(svgCode);\n					if(typeof callback !== 'undefined'){\n						callback(id);\n					}\n					bindFunctions(element[0]);\n				};\n				mermaid.render(id, graphSyntax, insertSvg, element[0]);\n\n				var zoomSVG = function(zoom){\n					var currentWidth = $(\"svg\").width();\n					var newWidth = currentWidth * zoom;\n					$(\"svg\").css(\"maxWidth\",newWidth + \"px\").width(newWidth);\n				}\n\n				//支持鼠标滚轮缩放画布\n				$(window).on(\"mousewheel\",function(event){\n					if(event.ctrlKey){\n						event.preventDefault();\n						var zoom = event.originalEvent.wheelDelta > 0 ? 1.1 : 0.9;\n						zoomSVG(zoom);\n					}\n				});\n				$(\".btn-zoom\").on(\"click\",function(){\n					zoomSVG($(this).attr(\"zoom\"));\n				});\n			});\n		</script>\n		<a class=\"btn-zoom btn-zoom-up\" zoom=1.1 title=\"点击放大\">+</a>\n		<a class=\"btn-zoom btn-zoom-down\" zoom=0.9 title=\"点击缩小\">-</a>\n	</body>\n</html>");
  }
};
JsonRoutes.add('get', '/api/workflow/chart?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res);
});
JsonRoutes.add('get', '/api/workflow/chart/traces?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res, "traces");
});
JsonRoutes.add('get', '/api/workflow/chart/traces_expand?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res, "traces_expand");
});
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
Package._define("steedos:workflow-chart");

})();

//# sourceURL=meteor://💻app/packages/steedos_workflow-chart.js
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGVvcjovL/CfkrthcHAvcGFja2FnZXMvc3RlZWRvc193b3JrZmxvdy1jaGFydC9yb3V0ZXMvY2hhcnQuY29mZmVlIiwibWV0ZW9yOi8v8J+Su2FwcC9yb3V0ZXMvY2hhcnQuY29mZmVlIl0sIm5hbWVzIjpbIkZsb3d2ZXJzaW9uQVBJIiwidHJhY2VNYXhBcHByb3ZlQ291bnQiLCJ0cmFjZVNwbGl0QXBwcm92ZXNJbmRleCIsImlzRXhwYW5kQXBwcm92ZSIsImdldEFic29sdXRlVXJsIiwidXJsIiwicm9vdFVybCIsIl9fbWV0ZW9yX3J1bnRpbWVfY29uZmlnX18iLCJST09UX1VSTF9QQVRIX1BSRUZJWCIsIndyaXRlUmVzcG9uc2UiLCJyZXMiLCJodHRwQ29kZSIsImJvZHkiLCJzdGF0dXNDb2RlIiwiZW5kIiwic2VuZEludmFsaWRVUkxSZXNwb25zZSIsInNlbmRBdXRoVG9rZW5FeHBpcmVkUmVzcG9uc2UiLCJyZXBsYWNlRXJyb3JTeW1ib2wiLCJzdHIiLCJyZXBsYWNlIiwiZ2V0U3RlcEhhbmRsZXJOYW1lIiwic3RlcCIsImFwcHJvdmVyTmFtZXMiLCJzdGVwSGFuZGxlck5hbWUiLCJkZWFsX3R5cGUiLCJhcHByb3Zlcl91c2VycyIsIm1hcCIsInVzZXJJZCIsInVzZXIiLCJkYiIsInVzZXJzIiwiZmluZE9uZSIsIm5hbWUiLCJqb2luIiwiYXBwcm92ZXJfcm9sZXMiLCJyb2xlSWQiLCJyb2xlIiwiZmxvd19yb2xlcyIsImdldFN0ZXBMYWJlbCIsInN0ZXBOYW1lIiwiZ2V0U3RlcE5hbWUiLCJjYWNoZWRTdGVwTmFtZXMiLCJjYWNoZWRTdGVwTmFtZSIsIl9pZCIsImdlbmVyYXRlU3RlcHNHcmFwaFN5bnRheCIsInN0ZXBzIiwiY3VycmVudFN0ZXBJZCIsImlzQ29udmVydFRvU3RyaW5nIiwiZGlyZWN0aW9uIiwiZ3JhcGhTeW50YXgiLCJub2RlcyIsImZvckVhY2giLCJsaW5lcyIsImxlbmd0aCIsImxpbmUiLCJ0b1N0ZXAiLCJ0b1N0ZXBOYW1lIiwic3RlcF90eXBlIiwicHVzaCIsImZpbmRQcm9wZXJ0eUJ5UEsiLCJ0b19zdGVwIiwiZ2V0QXBwcm92ZUp1ZGdlVGV4dCIsImp1ZGdlIiwianVkZ2VUZXh0IiwibG9jYWxlIiwiVEFQaTE4biIsIl9fIiwiZ2V0VHJhY2VOYW1lIiwidHJhY2VOYW1lIiwiYXBwcm92ZUhhbmRsZXJOYW1lIiwiZ2V0VHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzV2l0aFR5cGUiLCJ0cmFjZSIsImFwcHJvdmVzIiwiY291bnRlcnMiLCJhcHByb3ZlIiwiZnJvbV9hcHByb3ZlX2lkIiwidHlwZSIsImdldFRyYWNlQ291bnRlcnNXaXRoVHlwZSIsInRyYWNlRnJvbUFwcHJvdmVDb3VudGVycyIsInRvQXBwcm92ZSIsInRvQXBwcm92ZUZyb21JZCIsInRvQXBwcm92ZUhhbmRsZXJOYW1lIiwidG9BcHByb3ZlVHlwZSIsImhhbmRsZXJfbmFtZSIsImZyb21BcHByb3ZlIiwiY291bnRlciIsImNvdW50ZXIyIiwiY291bnRlckNvbnRlbnQiLCJyZWYiLCJmcm9tX3R5cGUiLCJmcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lIiwidG9fYXBwcm92ZV9pZCIsInRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lIiwiY291bnQiLCJ0b19hcHByb3ZlX2hhbmRsZXJfbmFtZXMiLCJpc190b3RhbCIsInB1c2hBcHByb3Zlc1dpdGhUeXBlR3JhcGhTeW50YXgiLCJjdXJyZW50VHJhY2VOYW1lIiwiZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyIiwiZnJvbUFwcHJvdmVJZCIsInJlc3VsdHMiLCJzcGxpdEluZGV4IiwidGVtcEhhbmRsZXJOYW1lcyIsInRvQXBwcm92ZUlkIiwidG9BcHByb3ZlcyIsInRyYWNlQ291bnRlcnMiLCJleHRyYUNvdW50IiwiaXNUeXBlTm9kZSIsInN0clRvSGFuZGxlck5hbWVzIiwidG9IYW5kbGVyTmFtZXMiLCJ0eXBlTmFtZSIsImluZGV4T2YiLCJzcGxpY2UiLCJfIiwiaXNFbXB0eSIsInJlc3VsdHMxIiwiZ2VuZXJhdGVUcmFjZXNHcmFwaFN5bnRheCIsInRyYWNlcyIsImxhc3RBcHByb3ZlcyIsImxhc3RUcmFjZSIsInByZXZpb3VzX3RyYWNlX2lkcyIsImN1cnJlbnRGcm9tVHJhY2VOYW1lIiwiZnJvbUFwcHJvdmVzIiwiZnJvbVRyYWNlIiwiZnJvbUFwcHJvdmVIYW5kbGVyTmFtZSIsImZyb21UcmFjZU5hbWUiLCJ0b1RyYWNlTmFtZSIsImxhc3RBcHByb3ZlIiwic2VuZEh0bWxSZXNwb25zZSIsInJlcSIsImFsbG93RGlyZWN0aW9ucyIsImVycm9yX21zZyIsImZsb3d2ZXJzaW9uIiwiaW5zdGFuY2UiLCJpbnN0YW5jZV9pZCIsInF1ZXJ5IiwicmVmMSIsInRpdGxlIiwiaW5jbHVkZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImluc3RhbmNlcyIsImZpZWxkcyIsImZsb3dfdmVyc2lvbiIsImZsb3ciLCIkc2xpY2UiLCJXb3JrZmxvd01hbmFnZXIiLCJnZXRJbnN0YW5jZUZsb3dWZXJzaW9uIiwic2V0SGVhZGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsIkpzb25Sb3V0ZXMiLCJhZGQiLCJuZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLGNBQUE7QUFBQUEsaUJBRUM7QUFBQUMsd0JBQXNCLEVBQXRCO0FBQ0FDLDJCQUF5QixDQUR6QjtBQUVBQyxtQkFBaUIsS0FGakI7QUFJQUMsa0JBQWdCLFVBQUNDLEdBQUQ7QUFDZixRQUFBQyxPQUFBO0FBQUFBLGNBQWFDLDRCQUErQkEsMEJBQTBCQyxvQkFBekQsR0FBbUYsRUFBaEc7O0FBQ0EsUUFBR0YsT0FBSDtBQUNDRCxZQUFNQyxVQUFVRCxHQUFoQjtBQ0VFOztBRERILFdBQU9BLEdBQVA7QUFSRDtBQVVBSSxpQkFBZSxVQUFDQyxHQUFELEVBQU1DLFFBQU4sRUFBZ0JDLElBQWhCO0FBQ2RGLFFBQUlHLFVBQUosR0FBaUJGLFFBQWpCO0FDR0UsV0RGRkQsSUFBSUksR0FB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QUFJQTRJLFdBQVdDLEdBQVgsQ0FBZSxLQUFmLEVBQXNCLHFEQUF0QixFQUE2RSxVQUFDdEIsR0FBRCxFQUFNdkgsR0FBTixFQUFXOEksSUFBWDtBQ3JIM0UsU0R1SER4SixlQUFlZ0ksZ0JBQWYsQ0FBZ0NDLEdBQWhDLEVBQXFDdkgsR0FBckMsRUFBMEMsUUFBMUMsQ0N2SEM7QURxSEY7QUFJQTRJLFdBQVdDLEdBQVgsQ0FBZSxLQUFmLEVBQXNCLDREQUF0QixFQUFvRixVQUFDdEIsR0FBRCxFQUFNdkgsR0FBTixFQUFXOEksSUFBWDtBQ3JIbEYsU0R1SER4SixlQUFlZ0ksZ0JBQWYsQ0FBZ0NDLEdBQWhDLEVBQXFDdkgsR0FBckMsRUFBMEMsZUFBMUMsQ0N2SEM7QURxSEYsRyIsImZpbGUiOiIvcGFja2FnZXMvc3RlZWRvc193b3JrZmxvdy1jaGFydC5qcyIsInNvdXJjZXNDb250ZW50IjpbIkZsb3d2ZXJzaW9uQVBJID1cblxuXHR0cmFjZU1heEFwcHJvdmVDb3VudDogMTBcblx0dHJhY2VTcGxpdEFwcHJvdmVzSW5kZXg6IDVcblx0aXNFeHBhbmRBcHByb3ZlOiBmYWxzZVxuXG5cdGdldEFic29sdXRlVXJsOiAodXJsKS0+XG5cdFx0cm9vdFVybCA9IGlmIF9fbWV0ZW9yX3J1bnRpbWVfY29uZmlnX18gdGhlbiBfX21ldGVvcl9ydW50aW1lX2NvbmZpZ19fLlJPT1RfVVJMX1BBVEhfUFJFRklYIGVsc2UgXCJcIlxuXHRcdGlmIHJvb3RVcmxcblx0XHRcdHVybCA9IHJvb3RVcmwgKyB1cmxcblx0XHRyZXR1cm4gdXJsO1xuXG5cdHdyaXRlUmVzcG9uc2U6IChyZXMsIGh0dHBDb2RlLCBib2R5KS0+XG5cdFx0cmVzLnN0YXR1c0NvZGUgPSBodHRwQ29kZTtcblx0XHRyZXMuZW5kKGJvZHkpO1xuXHRcdFxuXHRzZW5kSW52YWxpZFVSTFJlc3BvbnNlOiAocmVzKS0+XG5cdFx0cmV0dXJuIEB3cml0ZVJlc3BvbnNlKHJlcywgNDA0LCBcInVybCBtdXN0IGhhcyBxdWVyeXMgYXMgaW5zdGFuY2VfaWQuXCIpO1xuXHRcdFxuXHRzZW5kQXV0aFRva2VuRXhwaXJlZFJlc3BvbnNlOiAocmVzKS0+XG5cdFx0cmV0dXJuIEB3cml0ZVJlc3BvbnNlKHJlcywgNDAxLCBcInRoZSBhdXRoX3Rva2VuIGhhcyBleHBpcmVkLlwiKTtcblxuXHRyZXBsYWNlRXJyb3JTeW1ib2w6IChzdHIpLT5cblx0XHRyZXR1cm4gc3RyLnJlcGxhY2UoL1xcXCIvZyxcIiZxdW90O1wiKS5yZXBsYWNlKC9cXG4vZyxcIjxici8+XCIpXG5cblx0Z2V0U3RlcEhhbmRsZXJOYW1lOiAoc3RlcCktPlxuXHRcdHN3aXRjaCBzdGVwLmRlYWxfdHlwZVxuXHRcdFx0d2hlbiAnc3BlY2lmeVVzZXInXG5cdFx0XHRcdGFwcHJvdmVyTmFtZXMgPSBzdGVwLmFwcHJvdmVyX3VzZXJzLm1hcCAodXNlcklkKS0+XG5cdFx0XHRcdFx0dXNlciA9IGRiLnVzZXJzLmZpbmRPbmUodXNlcklkKVxuXHRcdFx0XHRcdGlmIHVzZXJcblx0XHRcdFx0XHRcdHJldHVybiB1c2VyLm5hbWVcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0XHRzdGVwSGFuZGxlck5hbWUgPSBhcHByb3Zlck5hbWVzLmpvaW4oXCIsXCIpXG5cdFx0XHR3aGVuICdhcHBsaWNhbnRSb2xlJ1xuXHRcdFx0XHRhcHByb3Zlck5hbWVzID0gc3RlcC5hcHByb3Zlcl9yb2xlcy5tYXAgKHJvbGVJZCktPlxuXHRcdFx0XHRcdHJvbGUgPSBkYi5mbG93X3JvbGVzLmZpbmRPbmUocm9sZUlkKVxuXHRcdFx0XHRcdGlmIHJvbGVcblx0XHRcdFx0XHRcdHJldHVybiByb2xlLm5hbWVcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0XHRzdGVwSGFuZGxlck5hbWUgPSBhcHByb3Zlck5hbWVzLmpvaW4oXCIsXCIpXG5cdFx0XHRlbHNlXG5cdFx0XHRcdHN0ZXBIYW5kbGVyTmFtZSA9ICcnXG5cdFx0XHRcdGJyZWFrXG5cdFx0cmV0dXJuIHN0ZXBIYW5kbGVyTmFtZVxuXG5cdGdldFN0ZXBMYWJlbDogKHN0ZXBOYW1lLCBzdGVwSGFuZGxlck5hbWUpLT5cblx0XHQjIOi/lOWbnnNzdGVwTmFtZeS4jnN0ZXBIYW5kbGVyTmFtZee7k+WQiOeahOatpemqpOaYvuekuuWQjeensFxuXHRcdGlmIHN0ZXBOYW1lXG5cdFx0XHRzdGVwTmFtZSA9IFwiPGRpdiBjbGFzcz0nZ3JhcGgtbm9kZSc+XG5cdFx0XHRcdDxkaXYgY2xhc3M9J3N0ZXAtbmFtZSc+I3tzdGVwTmFtZX08L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz0nc3RlcC1oYW5kbGVyLW5hbWUnPiN7c3RlcEhhbmRsZXJOYW1lfTwvZGl2PlxuXHRcdFx0PC9kaXY+XCJcblx0XHRcdCMg5oqK54m55q6K5a2X56ym5riF56m65oiW5pu/5o2i77yM5Lul6YG/5YWNbWVybWFpZEFQSeWHuueOsOW8guW4uFxuXHRcdFx0c3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2woc3RlcE5hbWUpXG5cdFx0ZWxzZVxuXHRcdFx0c3RlcE5hbWUgPSBcIlwiXG5cdFx0cmV0dXJuIHN0ZXBOYW1lXG5cblx0Z2V0U3RlcE5hbWU6IChzdGVwLCBjYWNoZWRTdGVwTmFtZXMpLT5cblx0XHQjIOi/lOWbnnN0ZXDoioLngrnlkI3np7DvvIzkvJjlhYjku47nvJPlrZhjYWNoZWRTdGVwTmFtZXPkuK3lj5bvvIzlkKbliJnosIPnlKhnZXRTdGVwTGFiZWznlJ/miJBcblx0XHRjYWNoZWRTdGVwTmFtZSA9IGNhY2hlZFN0ZXBOYW1lc1tzdGVwLl9pZF1cblx0XHRpZiBjYWNoZWRTdGVwTmFtZVxuXHRcdFx0cmV0dXJuIGNhY2hlZFN0ZXBOYW1lXG5cdFx0c3RlcEhhbmRsZXJOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0U3RlcEhhbmRsZXJOYW1lKHN0ZXApXG5cdFx0c3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTGFiZWwoc3RlcC5uYW1lLCBzdGVwSGFuZGxlck5hbWUpXG5cdFx0Y2FjaGVkU3RlcE5hbWVzW3N0ZXAuX2lkXSA9IHN0ZXBOYW1lXG5cdFx0cmV0dXJuIHN0ZXBOYW1lXG5cblx0Z2VuZXJhdGVTdGVwc0dyYXBoU3ludGF4OiAoc3RlcHMsIGN1cnJlbnRTdGVwSWQsIGlzQ29udmVydFRvU3RyaW5nLCBkaXJlY3Rpb24pLT5cblx0XHRub2RlcyA9IFtcImdyYXBoICN7ZGlyZWN0aW9ufVwiXVxuXHRcdGNhY2hlZFN0ZXBOYW1lcyA9IHt9XG5cdFx0c3RlcHMuZm9yRWFjaCAoc3RlcCktPlxuXHRcdFx0bGluZXMgPSBzdGVwLmxpbmVzXG5cdFx0XHRpZiBsaW5lcz8ubGVuZ3RoXG5cdFx0XHRcdGxpbmVzLmZvckVhY2ggKGxpbmUpLT5cblx0XHRcdFx0XHRpZiBzdGVwLm5hbWVcblx0XHRcdFx0XHRcdCMg5qCH6K6w5p2h5Lu26IqC54K5XG5cdFx0XHRcdFx0XHRpZiBzdGVwLnN0ZXBfdHlwZSA9PSBcImNvbmRpdGlvblwiXG5cdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdGNsYXNzICN7c3RlcC5faWR9IGNvbmRpdGlvbjtcIlxuXHRcdFx0XHRcdFx0c3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTmFtZShzdGVwLCBjYWNoZWRTdGVwTmFtZXMpXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0c3RlcE5hbWUgPSBcIlwiXG5cdFx0XHRcdFx0dG9TdGVwID0gc3RlcHMuZmluZFByb3BlcnR5QnlQSyhcIl9pZFwiLGxpbmUudG9fc3RlcClcblx0XHRcdFx0XHR0b1N0ZXBOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0U3RlcE5hbWUodG9TdGVwLCBjYWNoZWRTdGVwTmFtZXMpXG5cdFx0XHRcdFx0bm9kZXMucHVzaCBcIlx0I3tzdGVwLl9pZH0oXFxcIiN7c3RlcE5hbWV9XFxcIiktLT4je2xpbmUudG9fc3RlcH0oXFxcIiN7dG9TdGVwTmFtZX1cXFwiKVwiXG5cblx0XHRpZiBjdXJyZW50U3RlcElkXG5cdFx0XHRub2Rlcy5wdXNoIFwiXHRjbGFzcyAje2N1cnJlbnRTdGVwSWR9IGN1cnJlbnQtc3RlcC1ub2RlO1wiXG5cdFx0aWYgaXNDb252ZXJ0VG9TdHJpbmdcblx0XHRcdGdyYXBoU3ludGF4ID0gbm9kZXMuam9pbiBcIlxcblwiXG5cdFx0XHRyZXR1cm4gZ3JhcGhTeW50YXhcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gbm9kZXNcblxuXHRnZXRBcHByb3ZlSnVkZ2VUZXh0OiAoanVkZ2UpLT5cblx0XHRsb2NhbGUgPSBcInpoLUNOXCJcblx0XHRzd2l0Y2gganVkZ2Vcblx0XHRcdHdoZW4gJ2FwcHJvdmVkJ1xuXHRcdFx0XHQjIOW3suaguOWHhlxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSBhcHByb3ZlZCcsIHt9LCBsb2NhbGUpXG5cdFx0XHR3aGVuICdyZWplY3RlZCdcblx0XHRcdFx0IyDlt7LpqbPlm55cblx0XHRcdFx0anVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVqZWN0ZWQnLCB7fSwgbG9jYWxlKVxuXHRcdFx0d2hlbiAndGVybWluYXRlZCdcblx0XHRcdFx0IyDlt7Llj5bmtohcblx0XHRcdFx0anVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgdGVybWluYXRlZCcsIHt9LCBsb2NhbGUpXG5cdFx0XHR3aGVuICdyZWFzc2lnbmVkJ1xuXHRcdFx0XHQjIOi9rOetvuaguFxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWFzc2lnbmVkJywge30sIGxvY2FsZSlcblx0XHRcdHdoZW4gJ3JlbG9jYXRlZCdcblx0XHRcdFx0IyDph43lrprkvY1cblx0XHRcdFx0anVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVsb2NhdGVkJywge30sIGxvY2FsZSlcblx0XHRcdHdoZW4gJ3JldHJpZXZlZCdcblx0XHRcdFx0IyDlt7Llj5blm55cblx0XHRcdFx0anVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmV0cmlldmVkJywge30sIGxvY2FsZSlcblx0XHRcdHdoZW4gJ3JldHVybmVkJ1xuXHRcdFx0XHQjIOW3sumAgOWbnlxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZXR1cm5lZCcsIHt9LCBsb2NhbGUpXG5cdFx0XHR3aGVuICdyZWFkZWQnXG5cdFx0XHRcdCMg5bey6ZiFXG5cdFx0XHRcdGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJlYWRlZCcsIHt9LCBsb2NhbGUpXG5cdFx0XHRlbHNlXG5cdFx0XHRcdGp1ZGdlVGV4dCA9ICcnXG5cdFx0XHRcdGJyZWFrXG5cdFx0cmV0dXJuIGp1ZGdlVGV4dFxuXG5cdGdldFRyYWNlTmFtZTogKHRyYWNlTmFtZSwgYXBwcm92ZUhhbmRsZXJOYW1lKS0+XG5cdFx0IyDov5Tlm550cmFjZeiKgueCueWQjeensFxuXHRcdGlmIHRyYWNlTmFtZVxuXHRcdFx0IyDmiornibnmrorlrZfnrKbmuIXnqbrmiJbmm7/mjaLvvIzku6Xpgb/lhY1tZXJtYWlkQVBJ5Ye6546w5byC5bi4XG5cdFx0XHR0cmFjZU5hbWUgPSBcIjxkaXYgY2xhc3M9J2dyYXBoLW5vZGUnPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPSd0cmFjZS1uYW1lJz4je3RyYWNlTmFtZX08L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz0ndHJhY2UtaGFuZGxlci1uYW1lJz4je2FwcHJvdmVIYW5kbGVyTmFtZX08L2Rpdj5cblx0XHRcdDwvZGl2PlwiXG5cdFx0XHR0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2wodHJhY2VOYW1lKVxuXHRcdGVsc2Vcblx0XHRcdHRyYWNlTmFtZSA9IFwiXCJcblx0XHRyZXR1cm4gdHJhY2VOYW1lXG5cdFxuXHRnZXRUcmFjZUZyb21BcHByb3ZlQ291bnRlcnNXaXRoVHlwZTogKHRyYWNlKS0+XG5cdFx0IyDor6Xlh73mlbDnlJ/miJBqc29u57uT5p6E77yM6KGo546w5Ye65omA5pyJ5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R6IqC54K55pyJ5pyJ5ZCO57ut5a2Q6IqC54K555qE6K6h5pWw5oOF5Ya177yM5YW257uT5p6E5Li677yaXG5cdFx0IyBjb3VudGVycyA9IHtcblx0XHQjIFx0W2Zyb21BcHByb3ZlSWQo5p2l5rqQ6IqC54K5SUQpXTp7XG5cdFx0IyBcdFx0W3RvQXBwcm92ZVR5cGUo55uu5qCH57uT54K557G75Z6LKV0655uu5qCH6IqC54K55Zyo5oyH5a6a57G75Z6L5LiL55qE5ZCO57ut6IqC54K55Liq5pWwXG5cdFx0IyBcdH1cblx0XHQjIH1cblx0XHRjb3VudGVycyA9IHt9XG5cdFx0YXBwcm92ZXMgPSB0cmFjZS5hcHByb3Zlc1xuXHRcdHVubGVzcyBhcHByb3Zlc1xuXHRcdFx0cmV0dXJuIG51bGxcblx0XHRhcHByb3Zlcy5mb3JFYWNoIChhcHByb3ZlKS0+XG5cdFx0XHRpZiBhcHByb3ZlLmZyb21fYXBwcm92ZV9pZFxuXHRcdFx0XHR1bmxlc3MgY291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdXG5cdFx0XHRcdFx0Y291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdID0ge31cblx0XHRcdFx0aWYgY291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdW2FwcHJvdmUudHlwZV1cblx0XHRcdFx0XHRjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSsrXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSA9IDFcblx0XHRyZXR1cm4gY291bnRlcnNcblxuXHRnZXRUcmFjZUNvdW50ZXJzV2l0aFR5cGU6ICh0cmFjZSwgdHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzKS0+XG5cdFx0IyDor6Xlh73mlbDnlJ/miJBqc29u57uT5p6E77yM6KGo546w5Ye65omA5pyJ5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R55qE6IqC54K55rWB5ZCR77yM5YW257uT5p6E5Li677yaXG5cdFx0IyBjb3VudGVycyA9IHtcblx0XHQjIFx0W2Zyb21BcHByb3ZlSWQo5p2l5rqQ6IqC54K5SUQpXTp7XG5cdFx0IyBcdFx0W3RvQXBwcm92ZVR5cGUo55uu5qCH57uT54K557G75Z6LKV06W3tcblx0XHQjIFx0XHRcdGZyb21fdHlwZTog5p2l5rqQ6IqC54K557G75Z6LXG5cdFx0IyBcdFx0XHRmcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lOiDmnaXmupDoioLngrnlpITnkIbkurpcblx0XHQjIFx0XHRcdHRvX2FwcHJvdmVfaWQ6IOebruagh+iKgueCuUlEXG5cdFx0IyBcdFx0XHR0b19hcHByb3ZlX2hhbmRsZXJfbmFtZXM6IFvlpJrkuKrnm67moIfoioLngrnmsYfmgLvlpITnkIbkurrpm4blkIhdXG5cdFx0IyBcdFx0XHRpc190b3RhbDogdHJ1ZS9mYWxzZe+8jOaYr+WQpuaxh+aAu+iKgueCuVxuXHRcdCMgXHRcdH0sLi4uXVxuXHRcdCMgXHR9XG5cdFx0IyB9XG5cdFx0IyDkuIrov7Dnm67moIfnu5PngrnlhoXlrrnkuK3mnInkuIDkuKrlsZ7mgKdpc190b3RhbOihqOekuuaYr+WQpuaxh+aAu+iKgueCue+8jOWmguaenOaYr++8jOWImeaKiuWkmuS4quiKgueCueaxh+aAu+WQiOW5tuaIkOS4gOS4qu+8jFxuXHRcdCMg5L2G5piv5pys6Lqr5pyJ5ZCO57ut5a2Q6IqC54K555qE6IqC54K55LiN5Y+C5LiO5rGH5oC75Y+K6K6h5pWw44CCXG5cdFx0Y291bnRlcnMgPSB7fVxuXHRcdGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXNcblx0XHR1bmxlc3MgYXBwcm92ZXNcblx0XHRcdHJldHVybiBudWxsXG5cdFx0dHJhY2VNYXhBcHByb3ZlQ291bnQgPSBGbG93dmVyc2lvbkFQSS50cmFjZU1heEFwcHJvdmVDb3VudFxuXHRcdGlzRXhwYW5kQXBwcm92ZSA9IEZsb3d2ZXJzaW9uQVBJLmlzRXhwYW5kQXBwcm92ZVxuXG5cdFx0YXBwcm92ZXMuZm9yRWFjaCAodG9BcHByb3ZlKS0+XG5cdFx0XHR0b0FwcHJvdmVUeXBlID0gdG9BcHByb3ZlLnR5cGVcblx0XHRcdHRvQXBwcm92ZUZyb21JZCA9IHRvQXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRcblx0XHRcdHRvQXBwcm92ZUhhbmRsZXJOYW1lID0gdG9BcHByb3ZlLmhhbmRsZXJfbmFtZVxuXHRcdFx0dW5sZXNzIHRvQXBwcm92ZUZyb21JZFxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdGFwcHJvdmVzLmZvckVhY2ggKGZyb21BcHByb3ZlKS0+XG5cdFx0XHRcdGlmIGZyb21BcHByb3ZlLl9pZCA9PSB0b0FwcHJvdmVGcm9tSWRcblx0XHRcdFx0XHRjb3VudGVyID0gY291bnRlcnNbdG9BcHByb3ZlRnJvbUlkXVxuXHRcdFx0XHRcdHVubGVzcyBjb3VudGVyXG5cdFx0XHRcdFx0XHRjb3VudGVyID0gY291bnRlcnNbdG9BcHByb3ZlRnJvbUlkXSA9IHt9XG5cdFx0XHRcdFx0dW5sZXNzIGNvdW50ZXJbdG9BcHByb3ZlLnR5cGVdXG5cdFx0XHRcdFx0XHRjb3VudGVyW3RvQXBwcm92ZS50eXBlXSA9IFtdXG5cdFx0XHRcdFx0Y291bnRlcjIgPSBjb3VudGVyW3RvQXBwcm92ZS50eXBlXVxuXHRcdFx0XHRcdGlmIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1t0b0FwcHJvdmUuX2lkXT9bdG9BcHByb3ZlVHlwZV1cblx0XHRcdFx0XHRcdCMg5pyJ5ZCO57ut5a2Q6IqC54K577yM5YiZ5LiN5Y+C5LiO5rGH5oC75Y+K6K6h5pWwXG5cdFx0XHRcdFx0XHRjb3VudGVyMi5wdXNoXG5cdFx0XHRcdFx0XHRcdGZyb21fdHlwZTogZnJvbUFwcHJvdmUudHlwZVxuXHRcdFx0XHRcdFx0XHRmcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lOiBmcm9tQXBwcm92ZS5oYW5kbGVyX25hbWVcblx0XHRcdFx0XHRcdFx0dG9fYXBwcm92ZV9pZDogdG9BcHByb3ZlLl9pZFxuXHRcdFx0XHRcdFx0XHR0b19hcHByb3ZlX2hhbmRsZXJfbmFtZTogdG9BcHByb3ZlLmhhbmRsZXJfbmFtZVxuXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0Y291bnRlckNvbnRlbnQgPSBpZiBpc0V4cGFuZEFwcHJvdmUgdGhlbiBudWxsIGVsc2UgY291bnRlcjIuZmluZFByb3BlcnR5QnlQSyhcImlzX3RvdGFsXCIsIHRydWUpXG5cdFx0XHRcdFx0XHQjIGNvdW50ZXJDb250ZW50ID0gY291bnRlcjIuZmluZFByb3BlcnR5QnlQSyhcImlzX3RvdGFsXCIsIHRydWUpXG5cdFx0XHRcdFx0XHQjIOWmguaenOW8uuWItuimgeaxguWxleW8gOaJgOacieiKgueCue+8jOWImeS4jeWBmuaxh+aAu+WkhOeQhlxuXHRcdFx0XHRcdFx0aWYgY291bnRlckNvbnRlbnRcblx0XHRcdFx0XHRcdFx0Y291bnRlckNvbnRlbnQuY291bnQrK1xuXHRcdFx0XHRcdFx0XHR1bmxlc3MgY291bnRlckNvbnRlbnQuY291bnQgPiB0cmFjZU1heEFwcHJvdmVDb3VudFxuXHRcdFx0XHRcdFx0XHRcdGNvdW50ZXJDb250ZW50LnRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lcy5wdXNoIHRvQXBwcm92ZS5oYW5kbGVyX25hbWVcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0Y291bnRlcjIucHVzaFxuXHRcdFx0XHRcdFx0XHRcdGZyb21fdHlwZTogZnJvbUFwcHJvdmUudHlwZVxuXHRcdFx0XHRcdFx0XHRcdGZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWU6IGZyb21BcHByb3ZlLmhhbmRsZXJfbmFtZVxuXHRcdFx0XHRcdFx0XHRcdHRvX2FwcHJvdmVfaWQ6IHRvQXBwcm92ZS5faWRcblx0XHRcdFx0XHRcdFx0XHRjb3VudDogMVxuXHRcdFx0XHRcdFx0XHRcdHRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lczogW3RvQXBwcm92ZS5oYW5kbGVyX25hbWVdXG5cdFx0XHRcdFx0XHRcdFx0aXNfdG90YWw6IHRydWVcblxuXHRcdHJldHVybiBjb3VudGVyc1xuXG5cdHB1c2hBcHByb3Zlc1dpdGhUeXBlR3JhcGhTeW50YXg6IChub2RlcywgdHJhY2UpLT5cblx0XHR0cmFjZUZyb21BcHByb3ZlQ291bnRlcnMgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZUZyb21BcHByb3ZlQ291bnRlcnNXaXRoVHlwZSB0cmFjZVxuXHRcdHRyYWNlQ291bnRlcnMgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZUNvdW50ZXJzV2l0aFR5cGUgdHJhY2UsIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1xuXHRcdHVubGVzcyB0cmFjZUNvdW50ZXJzXG5cdFx0XHRyZXR1cm5cblx0XHRleHRyYUhhbmRsZXJOYW1lc0NvdW50ZXIgPSB7fSAj6K6w5b2V6ZyA6KaB6aKd5aSW55Sf5oiQ5omA5pyJ5aSE55CG5Lq65aeT5ZCN55qE6KKr5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R6IqC54K5XG5cdFx0dHJhY2VNYXhBcHByb3ZlQ291bnQgPSBGbG93dmVyc2lvbkFQSS50cmFjZU1heEFwcHJvdmVDb3VudFxuXHRcdHNwbGl0SW5kZXggPSBGbG93dmVyc2lvbkFQSS50cmFjZVNwbGl0QXBwcm92ZXNJbmRleFxuXHRcdGN1cnJlbnRUcmFjZU5hbWUgPSB0cmFjZS5uYW1lXG5cdFx0Zm9yIGZyb21BcHByb3ZlSWQsZnJvbUFwcHJvdmUgb2YgdHJhY2VDb3VudGVyc1xuXHRcdFx0Zm9yIHRvQXBwcm92ZVR5cGUsdG9BcHByb3ZlcyBvZiBmcm9tQXBwcm92ZVxuXHRcdFx0XHR0b0FwcHJvdmVzLmZvckVhY2ggKHRvQXBwcm92ZSktPlxuXHRcdFx0XHRcdHR5cGVOYW1lID0gXCJcIlxuXHRcdFx0XHRcdHN3aXRjaCB0b0FwcHJvdmVUeXBlXG5cdFx0XHRcdFx0XHR3aGVuICdjYydcblx0XHRcdFx0XHRcdFx0dHlwZU5hbWUgPSBcIuS8oOmYhVwiXG5cdFx0XHRcdFx0XHR3aGVuICdmb3J3YXJkJ1xuXHRcdFx0XHRcdFx0XHR0eXBlTmFtZSA9IFwi6L2s5Y+RXCJcblx0XHRcdFx0XHRcdHdoZW4gJ2Rpc3RyaWJ1dGUnXG5cdFx0XHRcdFx0XHRcdHR5cGVOYW1lID0gXCLliIblj5FcIlxuXHRcdFx0XHRcdGlzVHlwZU5vZGUgPSBbXCJjY1wiLFwiZm9yd2FyZFwiLFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKHRvQXBwcm92ZS5mcm9tX3R5cGUpID49IDBcblx0XHRcdFx0XHRpZiBpc1R5cGVOb2RlXG5cdFx0XHRcdFx0XHR0cmFjZU5hbWUgPSB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHRyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlTmFtZSBjdXJyZW50VHJhY2VOYW1lLCB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZVxuXHRcdFx0XHRcdGlmIHRvQXBwcm92ZS5pc190b3RhbFxuXHRcdFx0XHRcdFx0dG9IYW5kbGVyTmFtZXMgPSB0b0FwcHJvdmUudG9fYXBwcm92ZV9oYW5kbGVyX25hbWVzXG5cdFx0XHRcdFx0XHRpZiBzcGxpdEluZGV4IGFuZCB0b0FwcHJvdmUuY291bnQgPiBzcGxpdEluZGV4XG5cdFx0XHRcdFx0XHRcdCMg5Zyo5aeT5ZCN6ZuG5ZCI5Lit5o+S5YWl5Zue6L2m56ym5Y+35o2i6KGMXG5cdFx0XHRcdFx0XHRcdHRvSGFuZGxlck5hbWVzLnNwbGljZShzcGxpdEluZGV4LDAsXCI8YnIvPixcIilcblx0XHRcdFx0XHRcdHN0clRvSGFuZGxlck5hbWVzID0gdG9IYW5kbGVyTmFtZXMuam9pbihcIixcIikucmVwbGFjZShcIiwsXCIsXCJcIilcblx0XHRcdFx0XHRcdGV4dHJhQ291bnQgPSB0b0FwcHJvdmUuY291bnQgLSB0cmFjZU1heEFwcHJvdmVDb3VudFxuXHRcdFx0XHRcdFx0aWYgZXh0cmFDb3VudCA+IDBcblx0XHRcdFx0XHRcdFx0c3RyVG9IYW5kbGVyTmFtZXMgKz0gXCLnrYkje3RvQXBwcm92ZS5jb3VudH3kurpcIlxuXHRcdFx0XHRcdFx0XHR1bmxlc3MgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdXG5cdFx0XHRcdFx0XHRcdFx0ZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdID0ge31cblx0XHRcdFx0XHRcdFx0ZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdW3RvQXBwcm92ZVR5cGVdID0gdG9BcHByb3ZlLnRvX2FwcHJvdmVfaWRcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRzdHJUb0hhbmRsZXJOYW1lcyA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2hhbmRsZXJfbmFtZVxuXHRcdFx0XHRcdGlmIGlzVHlwZU5vZGVcblx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmVJZH0+XFxcIiN7dHJhY2VOYW1lfVxcXCJdLS0je3R5cGVOYW1lfS0tPiN7dG9BcHByb3ZlLnRvX2FwcHJvdmVfaWR9PlxcXCIje3N0clRvSGFuZGxlck5hbWVzfVxcXCJdXCJcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje2Zyb21BcHByb3ZlSWR9KFxcXCIje3RyYWNlTmFtZX1cXFwiKS0tI3t0eXBlTmFtZX0tLT4je3RvQXBwcm92ZS50b19hcHByb3ZlX2lkfT5cXFwiI3tzdHJUb0hhbmRsZXJOYW1lc31cXFwiXVwiXG5cblx0XHQjIOS4uumcgOimgemineWklueUn+aIkOaJgOacieWkhOeQhuS6uuWnk+WQjeeahOiiq+S8oOmYheOAgeWIhuWPkeOAgei9rOWPkeiKgueCue+8jOWinuWKoOm8oOagh+W8ueWHuuivpue7huWxguS6i+S7tlxuXHRcdCMgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVy55qE57uT5p6E5Li677yaXG5cdFx0IyBjb3VudGVycyA9IHtcblx0XHQjIFx0W2Zyb21BcHByb3ZlSWQo5p2l5rqQ6IqC54K5SUQpXTp7XG5cdFx0IyBcdFx0W3RvQXBwcm92ZVR5cGUo55uu5qCH57uT54K557G75Z6LKV0655uu5qCH57uT54K5SURcblx0XHQjIFx0fVxuXHRcdCMgfVxuXHRcdGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXNcblx0XHR1bmxlc3MgXy5pc0VtcHR5KGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcilcblx0XHRcdGZvciBmcm9tQXBwcm92ZUlkLGZyb21BcHByb3ZlIG9mIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlclxuXHRcdFx0XHRmb3IgdG9BcHByb3ZlVHlwZSx0b0FwcHJvdmVJZCBvZiBmcm9tQXBwcm92ZVxuXHRcdFx0XHRcdHRlbXBIYW5kbGVyTmFtZXMgPSBbXVxuXHRcdFx0XHRcdGFwcHJvdmVzLmZvckVhY2ggKGFwcHJvdmUpLT5cblx0XHRcdFx0XHRcdGlmIGZyb21BcHByb3ZlSWQgPT0gYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRcblx0XHRcdFx0XHRcdFx0dW5sZXNzIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1thcHByb3ZlLl9pZF0/W3RvQXBwcm92ZVR5cGVdXG5cdFx0XHRcdFx0XHRcdFx0IyDmnInlkI7nu63lrZDoioLngrnvvIzliJnkuI3lj4LkuI7msYfmgLvlj4rorqHmlbBcblx0XHRcdFx0XHRcdFx0XHR0ZW1wSGFuZGxlck5hbWVzLnB1c2ggYXBwcm92ZS5oYW5kbGVyX25hbWVcblx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHRjbGljayAje3RvQXBwcm92ZUlkfSBjYWxsYmFjayBcXFwiI3t0ZW1wSGFuZGxlck5hbWVzLmpvaW4oXCIsXCIpfVxcXCJcIlxuXG5cdGdlbmVyYXRlVHJhY2VzR3JhcGhTeW50YXg6ICh0cmFjZXMsIGlzQ29udmVydFRvU3RyaW5nLCBkaXJlY3Rpb24pLT5cblx0XHRub2RlcyA9IFtcImdyYXBoICN7ZGlyZWN0aW9ufVwiXVxuXHRcdGxhc3RUcmFjZSA9IG51bGxcblx0XHRsYXN0QXBwcm92ZXMgPSBbXVxuXHRcdHRyYWNlcy5mb3JFYWNoICh0cmFjZSktPlxuXHRcdFx0bGluZXMgPSB0cmFjZS5wcmV2aW91c190cmFjZV9pZHNcblx0XHRcdGN1cnJlbnRUcmFjZU5hbWUgPSB0cmFjZS5uYW1lXG5cdFx0XHRpZiBsaW5lcz8ubGVuZ3RoXG5cdFx0XHRcdGxpbmVzLmZvckVhY2ggKGxpbmUpLT5cblx0XHRcdFx0XHRmcm9tVHJhY2UgPSB0cmFjZXMuZmluZFByb3BlcnR5QnlQSyhcIl9pZFwiLGxpbmUpXG5cdFx0XHRcdFx0Y3VycmVudEZyb21UcmFjZU5hbWUgPSBmcm9tVHJhY2UubmFtZVxuXHRcdFx0XHRcdGZyb21BcHByb3ZlcyA9IGZyb21UcmFjZS5hcHByb3Zlc1xuXHRcdFx0XHRcdHRvQXBwcm92ZXMgPSB0cmFjZS5hcHByb3Zlc1xuXHRcdFx0XHRcdGxhc3RUcmFjZSA9IHRyYWNlXG5cdFx0XHRcdFx0bGFzdEFwcHJvdmVzID0gdG9BcHByb3Zlc1xuXHRcdFx0XHRcdGZyb21BcHByb3Zlcy5mb3JFYWNoIChmcm9tQXBwcm92ZSktPlxuXHRcdFx0XHRcdFx0ZnJvbUFwcHJvdmVIYW5kbGVyTmFtZSA9IGZyb21BcHByb3ZlLmhhbmRsZXJfbmFtZVxuXHRcdFx0XHRcdFx0aWYgdG9BcHByb3Zlcz8ubGVuZ3RoXG5cdFx0XHRcdFx0XHRcdHRvQXBwcm92ZXMuZm9yRWFjaCAodG9BcHByb3ZlKS0+XG5cdFx0XHRcdFx0XHRcdFx0aWYgW1wiY2NcIixcImZvcndhcmRcIixcImRpc3RyaWJ1dGVcIl0uaW5kZXhPZih0b0FwcHJvdmUudHlwZSkgPCAwXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiBbXCJjY1wiLFwiZm9yd2FyZFwiLFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKGZyb21BcHByb3ZlLnR5cGUpIDwgMFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmcm9tVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lIGN1cnJlbnRGcm9tVHJhY2VOYW1lLCBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRvVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lIGN1cnJlbnRUcmFjZU5hbWUsIHRvQXBwcm92ZS5oYW5kbGVyX25hbWVcblx0XHRcdFx0XHRcdFx0XHRcdFx0IyDkuI3mmK/kvKDpmIXjgIHliIblj5HjgIHovazlj5HvvIzliJnov57mjqXliLDkuIvkuIDkuKp0cmFjZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRqdWRnZVRleHQgPSBGbG93dmVyc2lvbkFQSS5nZXRBcHByb3ZlSnVkZ2VUZXh0IGZyb21BcHByb3ZlLmp1ZGdlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIGp1ZGdlVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmUuX2lkfShcXFwiI3tmcm9tVHJhY2VOYW1lfVxcXCIpLS0je2p1ZGdlVGV4dH0tLT4je3RvQXBwcm92ZS5faWR9KFxcXCIje3RvVHJhY2VOYW1lfVxcXCIpXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmUuX2lkfShcXFwiI3tmcm9tVHJhY2VOYW1lfVxcXCIpLS0+I3t0b0FwcHJvdmUuX2lkfShcXFwiI3t0b1RyYWNlTmFtZX1cXFwiKVwiXG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdCMg5pyA5ZCO5LiA5Liq5q2l6aqk55qEdHJhY2Vcblx0XHRcdFx0XHRcdFx0aWYgW1wiY2NcIixcImZvcndhcmRcIixcImRpc3RyaWJ1dGVcIl0uaW5kZXhPZihmcm9tQXBwcm92ZS50eXBlKSA8IDBcblx0XHRcdFx0XHRcdFx0XHRmcm9tVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lIGN1cnJlbnRGcm9tVHJhY2VOYW1lLCBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lXG5cdFx0XHRcdFx0XHRcdFx0dG9UcmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2woY3VycmVudFRyYWNlTmFtZSlcblx0XHRcdFx0XHRcdFx0XHQjIOS4jeaYr+S8oOmYheOAgeWIhuWPkeOAgei9rOWPke+8jOWImei/nuaOpeWIsOS4i+S4gOS4qnRyYWNlXG5cdFx0XHRcdFx0XHRcdFx0anVkZ2VUZXh0ID0gRmxvd3ZlcnNpb25BUEkuZ2V0QXBwcm92ZUp1ZGdlVGV4dCBmcm9tQXBwcm92ZS5qdWRnZVxuXHRcdFx0XHRcdFx0XHRcdGlmIGp1ZGdlVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0bm9kZXMucHVzaCBcIlx0I3tmcm9tQXBwcm92ZS5faWR9KFxcXCIje2Zyb21UcmFjZU5hbWV9XFxcIiktLSN7anVkZ2VUZXh0fS0tPiN7dHJhY2UuX2lkfShcXFwiI3t0b1RyYWNlTmFtZX1cXFwiKVwiXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdFx0bm9kZXMucHVzaCBcIlx0I3tmcm9tQXBwcm92ZS5faWR9KFxcXCIje2Zyb21UcmFjZU5hbWV9XFxcIiktLT4je3RyYWNlLl9pZH0oXFxcIiN7dG9UcmFjZU5hbWV9XFxcIilcIlxuXHRcdFx0ZWxzZVxuXHRcdFx0XHQjIOesrOS4gOS4qnRyYWNl77yM5ZugdHJhY2Vz5Y+v6IO95Y+q5pyJ5LiA5Liq77yM6L+Z5pe26ZyA6KaB5Y2V54us5pi+56S65Ye65p2lXG5cdFx0XHRcdHRyYWNlLmFwcHJvdmVzLmZvckVhY2ggKGFwcHJvdmUpLT5cblx0XHRcdFx0XHR0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUgY3VycmVudFRyYWNlTmFtZSwgYXBwcm92ZS5oYW5kbGVyX25hbWVcblx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje2FwcHJvdmUuX2lkfShcXFwiI3t0cmFjZU5hbWV9XFxcIilcIlxuXG5cdFx0XHRGbG93dmVyc2lvbkFQSS5wdXNoQXBwcm92ZXNXaXRoVHlwZUdyYXBoU3ludGF4IG5vZGVzLCB0cmFjZVxuXG5cdFx0IyDnrb7mibnljobnqIvkuK3mnIDlkI7nmoRhcHByb3Zlc+mrmOS6ruaYvuekuu+8jOe7k+adn+atpemqpOeahHRyYWNl5Lit5piv5rKh5pyJYXBwcm92ZXPnmoTvvIzmiYDku6Xnu5PmnZ/mraXpqqTkuI3pq5jkuq7mmL7npLpcblx0XHRsYXN0QXBwcm92ZXM/LmZvckVhY2ggKGxhc3RBcHByb3ZlKS0+XG5cdFx0XHRub2Rlcy5wdXNoIFwiXHRjbGFzcyAje2xhc3RBcHByb3ZlLl9pZH0gY3VycmVudC1zdGVwLW5vZGU7XCJcblxuXHRcdGlmIGlzQ29udmVydFRvU3RyaW5nXG5cdFx0XHRncmFwaFN5bnRheCA9IG5vZGVzLmpvaW4gXCJcXG5cIlxuXHRcdFx0cmV0dXJuIGdyYXBoU3ludGF4XG5cdFx0ZWxzZVxuXHRcdFx0cmV0dXJuIG5vZGVzXG5cblx0c2VuZEh0bWxSZXNwb25zZTogKHJlcSwgcmVzLCB0eXBlKS0+XG5cdFx0cXVlcnkgPSByZXEucXVlcnlcblx0XHRpbnN0YW5jZV9pZCA9IHF1ZXJ5Lmluc3RhbmNlX2lkXG5cdFx0ZGlyZWN0aW9uID0gcXVlcnkuZGlyZWN0aW9uIHx8ICdURCdcblx0XHRhbGxvd0RpcmVjdGlvbnMgPSBbJ1RCJywnQlQnLCdSTCcsJ0xSJywnVEQnXTtcblxuXHRcdGlmICFfLmluY2x1ZGUoYWxsb3dEaXJlY3Rpb25zLCBkaXJlY3Rpb24pXG5cdFx0XHRyZXR1cm4gQHdyaXRlUmVzcG9uc2UocmVzLCA1MDAsIFwiSW52YWxpZCBkaXJlY3Rpb24uIFRoZSB2YWx1ZSBvZiBkaXJlY3Rpb24gc2hvdWxkIGJlIGluIFsnVEInLCAnQlQnLCAnUkwnLCAnTFInLCAnVEQnXVwiKTtcblxuXHRcdHVubGVzcyBpbnN0YW5jZV9pZFxuXHRcdFx0Rmxvd3ZlcnNpb25BUEkuc2VuZEludmFsaWRVUkxSZXNwb25zZSByZXMgXG5cdFx0XG5cdFx0dGl0bGUgPSBxdWVyeS50aXRsZVxuXHRcdGlmIHRpdGxlXG5cdFx0XHR0aXRsZSA9IGRlY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQodGl0bGUpKVxuXHRcdGVsc2Vcblx0XHRcdHRpdGxlID0gXCJXb3JrZmxvdyBDaGFydFwiXG5cblx0XHRlcnJvcl9tc2cgPSBcIlwiXG5cdFx0Z3JhcGhTeW50YXggPSBcIlwiXG5cdFx0Rmxvd3ZlcnNpb25BUEkuaXNFeHBhbmRBcHByb3ZlID0gZmFsc2Vcblx0XHRpZiB0eXBlID09IFwidHJhY2VzX2V4cGFuZFwiXG5cdFx0XHR0eXBlID0gXCJ0cmFjZXNcIlxuXHRcdFx0Rmxvd3ZlcnNpb25BUEkuaXNFeHBhbmRBcHByb3ZlID0gdHJ1ZVxuXHRcdHN3aXRjaCB0eXBlXG5cdFx0XHR3aGVuICd0cmFjZXMnXG5cdFx0XHRcdGluc3RhbmNlID0gZGIuaW5zdGFuY2VzLmZpbmRPbmUgaW5zdGFuY2VfaWQse2ZpZWxkczp7dHJhY2VzOiAxfX1cblx0XHRcdFx0aWYgaW5zdGFuY2Vcblx0XHRcdFx0XHR0cmFjZXMgPSBpbnN0YW5jZS50cmFjZXNcblx0XHRcdFx0XHRpZiB0cmFjZXM/Lmxlbmd0aFxuXHRcdFx0XHRcdFx0Z3JhcGhTeW50YXggPSB0aGlzLmdlbmVyYXRlVHJhY2VzR3JhcGhTeW50YXggdHJhY2VzLCBmYWxzZSwgZGlyZWN0aW9uXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0ZXJyb3JfbXNnID0gXCLmsqHmnInmib7liLDlvZPliY3nlLPor7fljZXnmoTmtYHnqIvmraXpqqTmlbDmja5cIlxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0ZXJyb3JfbXNnID0gXCLlvZPliY3nlLPor7fljZXkuI3lrZjlnKjmiJblt7LooqvliKDpmaRcIlxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRpbnN0YW5jZSA9IGRiLmluc3RhbmNlcy5maW5kT25lIGluc3RhbmNlX2lkLHtmaWVsZHM6e2Zsb3dfdmVyc2lvbjoxLGZsb3c6MSx0cmFjZXM6IHskc2xpY2U6IC0xfX19XG5cdFx0XHRcdGlmIGluc3RhbmNlXG5cdFx0XHRcdFx0Y3VycmVudFN0ZXBJZCA9IGluc3RhbmNlLnRyYWNlcz9bMF0/LnN0ZXBcblx0XHRcdFx0XHRmbG93dmVyc2lvbiA9IFdvcmtmbG93TWFuYWdlci5nZXRJbnN0YW5jZUZsb3dWZXJzaW9uKGluc3RhbmNlKVxuXHRcdFx0XHRcdHN0ZXBzID0gZmxvd3ZlcnNpb24/LnN0ZXBzXG5cdFx0XHRcdFx0aWYgc3RlcHM/Lmxlbmd0aFxuXHRcdFx0XHRcdFx0Z3JhcGhTeW50YXggPSB0aGlzLmdlbmVyYXRlU3RlcHNHcmFwaFN5bnRheCBzdGVwcyxjdXJyZW50U3RlcElkLGZhbHNlLCBkaXJlY3Rpb25cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRlcnJvcl9tc2cgPSBcIuayoeacieaJvuWIsOW9k+WJjeeUs+ivt+WNleeahOa1geeoi+atpemqpOaVsOaNrlwiXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRlcnJvcl9tc2cgPSBcIuW9k+WJjeeUs+ivt+WNleS4jeWtmOWcqOaIluW3suiiq+WIoOmZpFwiXG5cdFx0XHRcdGJyZWFrXG5cdFx0cmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCcpO1xuXHRcdHJldHVybiBAd3JpdGVSZXNwb25zZSByZXMsIDIwMCwgXCJcIlwiXG5cdFx0XHQ8IURPQ1RZUEUgaHRtbD5cblx0XHRcdDxodG1sPlxuXHRcdFx0XHQ8aGVhZD5cblx0XHRcdFx0XHQ8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx1c2VyLXNjYWxhYmxlPXllc1wiPlxuXHRcdFx0XHRcdDx0aXRsZT4je3RpdGxlfTwvdGl0bGU+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiaWNvblwiIHR5cGU9XCJpbWFnZS9wbmdcIiBzaXplcz1cIjE5MngxOTJcIiBocmVmPVwiL2Zhdmljb25zL2FuZHJvaWQtY2hyb21lLTE5MngxOTIucG5nXCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwibWFuaWZlc3RcIiBocmVmPVwiL2Zhdmljb25zL21hbmlmZXN0Lmpzb25cIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwibW9iaWxlLXdlYi1hcHAtY2FwYWJsZVwiIGNvbnRlbnQ9XCJ5ZXNcIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwidGhlbWUtY29sb3JcIiBjb250ZW50PVwiIzAwMFwiPlxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJhcHBsaWNhdGlvbi1uYW1lXCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiNTd4NTdcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi01N3g1Ny5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiNjB4NjBcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi02MHg2MC5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiNzJ4NzJcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi03Mng3Mi5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiNzZ4NzZcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi03Nng3Ni5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiMTE0eDExNFwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTExNHgxMTQucG5nXCIpfVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjEyMHgxMjBcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xMjB4MTIwLnBuZ1wiKX1cIj5cblx0XHRcdFx0XHQ8bGluayByZWw9XCJhcHBsZS10b3VjaC1pY29uXCIgc2l6ZXM9XCIxNDR4MTQ0XCIgaHJlZj1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTQ0eDE0NC5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiMTUyeDE1MlwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTE1MngxNTIucG5nXCIpfVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjE4MHgxODBcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xODB4MTgwLnBuZ1wiKX1cIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwiYXBwbGUtbW9iaWxlLXdlYi1hcHAtY2FwYWJsZVwiIGNvbnRlbnQ9XCJ5ZXNcIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwiYXBwbGUtbW9iaWxlLXdlYi1hcHAtc3RhdHVzLWJhci1zdHlsZVwiIGNvbnRlbnQ9XCJibGFjay10cmFuc2x1Y2VudFwiPlxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJhcHBsZS1tb2JpbGUtd2ViLWFwcC10aXRsZVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgc2l6ZXM9XCIyMjh4MjI4XCIgaHJlZj1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2NvYXN0LTIyOHgyMjgucG5nXCIpfVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgc2l6ZXM9XCIxNngxNlwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLTE2eDE2LnBuZ1wiKX1cIj5cblx0XHRcdFx0XHQ8bGluayByZWw9XCJpY29uXCIgdHlwZT1cImltYWdlL3BuZ1wiIHNpemVzPVwiMzJ4MzJcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi0zMngzMi5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiaWNvblwiIHR5cGU9XCJpbWFnZS9wbmdcIiBzaXplcz1cIjk2eDk2XCIgaHJlZj1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tOTZ4OTYucG5nXCIpfVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgc2l6ZXM9XCIyMzB4MjMwXCIgaHJlZj1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tMjMweDIzMC5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwic2hvcnRjdXQgaWNvblwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLmljb1wiKX1cIj5cblx0XHRcdFx0XHQ8bGluayByZWw9XCJ5YW5kZXgtdGFibGVhdS13aWRnZXRcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMveWFuZGV4LWJyb3dzZXItbWFuaWZlc3QuanNvblwiKX1cIj5cblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwibXNhcHBsaWNhdGlvbi1UaWxlQ29sb3JcIiBjb250ZW50PVwiI2ZmZlwiPlxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJtc2FwcGxpY2F0aW9uLVRpbGVJbWFnZVwiIGNvbnRlbnQ9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9tc3RpbGUtMTQ0eDE0NC5wbmdcIil9XCI+XG5cdFx0XHRcdFx0PG1ldGEgbmFtZT1cIm1zYXBwbGljYXRpb24tY29uZmlnXCIgY29udGVudD1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Jyb3dzZXJjb25maWcueG1sXCIpfVwiPlxuXHRcdFx0XHRcdDxtZXRhIHByb3BlcnR5PVwidHdpdHRlcjppbWFnZVwiIGNvbnRlbnQ9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy90d2l0dGVyLnBuZ1wiKX1cIj5cblx0XHRcdFx0XHQ8bWV0YSBwcm9wZXJ0eT1cIm9nOmltYWdlXCIgY29udGVudD1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL29wZW4tZ3JhcGgucG5nXCIpfVwiPlxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvcGFja2FnZXMvc3RlZWRvc193b3JrZmxvdy1jaGFydC9hc3NldHMvbWVybWFpZC9kaXN0L21lcm1haWQuY3NzXCIpfVwiLz5cblx0XHRcdFx0XHQ8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9saWIvanF1ZXJ5L2pxdWVyeS0xLjExLjIubWluLmpzXCIpfVwiPjwvc2NyaXB0PlxuXHRcdFx0XHRcdDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiIHNyYz1cIiN7QGdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLm1pbi5qc1wiKX1cIj48L3NjcmlwdD5cblx0XHRcdFx0XHQ8c3R5bGU+XG5cdFx0XHRcdFx0XHRib2R5IHsgXG5cdFx0XHRcdFx0XHRcdGZvbnQtZmFtaWx5OiAnU291cmNlIFNhbnMgUHJvJywgJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcblx0XHRcdFx0XHRcdFx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0LmxvYWRpbmd7XG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHRcdFx0XHRcdFx0bGVmdDogMHB4O1xuXHRcdFx0XHRcdFx0XHRyaWdodDogMHB4O1xuXHRcdFx0XHRcdFx0XHR0b3A6IDUwJTtcblx0XHRcdFx0XHRcdFx0ei1pbmRleDogMTEwMDtcblx0XHRcdFx0XHRcdFx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRcdFx0XHRcdFx0XHRtYXJnaW4tdG9wOiAtMzBweDtcblx0XHRcdFx0XHRcdFx0Zm9udC1zaXplOiAzNnB4O1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogI2RmZGZkZjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC5lcnJvci1tc2d7XG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHRcdFx0XHRcdFx0bGVmdDogMHB4O1xuXHRcdFx0XHRcdFx0XHRyaWdodDogMHB4O1xuXHRcdFx0XHRcdFx0XHRib3R0b206IDIwcHg7XG5cdFx0XHRcdFx0XHRcdHotaW5kZXg6IDExMDA7XG5cdFx0XHRcdFx0XHRcdHRleHQtYWxpZ246IGNlbnRlcjtcblx0XHRcdFx0XHRcdFx0Zm9udC1zaXplOiAyMHB4O1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogI2E5NDQ0Mjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZSByZWN0e1xuXHRcdFx0XHRcdFx0XHRmaWxsOiAjY2NjY2ZmO1xuXHRcdFx0XHRcdFx0XHRzdHJva2U6IHJnYigxNDQsIDE0NCwgMjU1KTtcbiAgICBcdFx0XHRcdFx0XHRzdHJva2Utd2lkdGg6IDJweDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZS5jdXJyZW50LXN0ZXAtbm9kZSByZWN0e1xuXHRcdFx0XHRcdFx0XHRmaWxsOiAjY2RlNDk4O1xuXHRcdFx0XHRcdFx0XHRzdHJva2U6ICMxMzU0MGM7XG5cdFx0XHRcdFx0XHRcdHN0cm9rZS13aWR0aDogMnB4O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlLmNvbmRpdGlvbiByZWN0e1xuXHRcdFx0XHRcdFx0XHRmaWxsOiAjZWNlY2ZmO1xuXHRcdFx0XHRcdFx0XHRzdHJva2U6IHJnYigyMDQsIDIwNCwgMjU1KTtcbiAgICBcdFx0XHRcdFx0XHRzdHJva2Utd2lkdGg6IDFweDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZSAudHJhY2UtaGFuZGxlci1uYW1le1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogIzc3Nztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZSAuc3RlcC1oYW5kbGVyLW5hbWV7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiAjNzc3O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGl2Lm1lcm1haWRUb29sdGlwe1xuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogZml4ZWQhaW1wb3J0YW50O1xuXHRcdFx0XHRcdFx0XHR0ZXh0LWFsaWduOiBsZWZ0IWltcG9ydGFudDtcblx0XHRcdFx0XHRcdFx0cGFkZGluZzogNHB4IWltcG9ydGFudDtcblx0XHRcdFx0XHRcdFx0Zm9udC1zaXplOiAxNHB4IWltcG9ydGFudDtcblx0XHRcdFx0XHRcdFx0bWF4LXdpZHRoOiA1MDBweCFpbXBvcnRhbnQ7XG5cdFx0XHRcdFx0XHRcdGxlZnQ6IGF1dG8haW1wb3J0YW50O1xuXHRcdFx0XHRcdFx0XHR0b3A6IDE1cHghaW1wb3J0YW50O1xuXHRcdFx0XHRcdFx0XHRyaWdodDogMTVweDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC5idG4tem9vbXtcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpO1xuXHRcdFx0XHRcdFx0XHRib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG5cdFx0XHRcdFx0XHRcdHBhZGRpbmc6IDJweCAxMHB4O1xuXHRcdFx0XHRcdFx0XHRmb250LXNpemU6IDI2cHg7XG5cdFx0XHRcdFx0XHRcdGJvcmRlci1yYWRpdXM6IDIwcHg7XG5cdFx0XHRcdFx0XHRcdGJhY2tncm91bmQ6ICNlZWU7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiAjNzc3O1xuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogZml4ZWQ7XG5cdFx0XHRcdFx0XHRcdGJvdHRvbTogMTVweDtcblx0XHRcdFx0XHRcdFx0b3V0bGluZTogbm9uZTtcblx0XHRcdFx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHRcdFx0XHR6LWluZGV4OiA5OTk5OTtcblx0XHRcdFx0XHRcdFx0LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcblx0XHRcdFx0XHRcdFx0LW1vei11c2VyLXNlbGVjdDogbm9uZTtcblx0XHRcdFx0XHRcdFx0LW1zLXVzZXItc2VsZWN0OiBub25lO1xuXHRcdFx0XHRcdFx0XHR1c2VyLXNlbGVjdDogbm9uZTtcblx0XHRcdFx0XHRcdFx0bGluZS1oZWlnaHQ6IDEuMjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuXHRcdFx0XHRcdFx0XHQuYnRuLXpvb217XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTpub25lO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQuYnRuLXpvb206aG92ZXJ7XG5cdFx0XHRcdFx0XHRcdGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4yKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC5idG4tem9vbS11cHtcblx0XHRcdFx0XHRcdFx0bGVmdDogMTVweDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC5idG4tem9vbS1kb3due1xuXHRcdFx0XHRcdFx0XHRsZWZ0OiA2MHB4O1xuXHRcdFx0XHRcdFx0XHRwYWRkaW5nOiAxcHggMTNweCAzcHggMTNweDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQ8L3N0eWxlPlxuXHRcdFx0XHQ8L2hlYWQ+XG5cdFx0XHRcdDxib2R5PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3MgPSBcImxvYWRpbmdcIj5Mb2FkaW5nLi4uPC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcyA9IFwiZXJyb3ItbXNnXCI+I3tlcnJvcl9tc2d9PC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lcm1haWRcIj48L2Rpdj5cblx0XHRcdFx0XHQ8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj5cblx0XHRcdFx0XHRcdG1lcm1haWQuaW5pdGlhbGl6ZSh7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0T25Mb2FkOmZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdCQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0dmFyIGdyYXBoTm9kZXMgPSAje0pTT04uc3RyaW5naWZ5KGdyYXBoU3ludGF4KX07XG5cdFx0XHRcdFx0XHRcdC8v5pa55L6/5YmN6Z2i5Y+v5Lul6YCa6L+H6LCD55SobWVybWFpZC5jdXJyZW50Tm9kZXPosIPlvI/vvIznibnmhI/lop7liqBjdXJyZW50Tm9kZXPlsZ7mgKfjgIJcblx0XHRcdFx0XHRcdFx0bWVybWFpZC5jdXJyZW50Tm9kZXMgPSBncmFwaE5vZGVzO1xuXHRcdFx0XHRcdFx0XHR2YXIgZ3JhcGhTeW50YXggPSBncmFwaE5vZGVzLmpvaW4oXCJcXFxcblwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZ3JhcGhOb2Rlcyk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGdyYXBoU3ludGF4KTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJZb3UgY2FuIGFjY2VzcyB0aGUgZ3JhcGggbm9kZXMgYnkgJ21lcm1haWQuY3VycmVudE5vZGVzJyBpbiB0aGUgY29uc29sZSBvZiBicm93c2VyLlwiKTtcblx0XHRcdFx0XHRcdFx0JChcIi5sb2FkaW5nXCIpLnJlbW92ZSgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBpZCA9IFwiZmxvdy1zdGVwcy1zdmdcIjtcblx0XHRcdFx0XHRcdFx0dmFyIGVsZW1lbnQgPSAkKCcubWVybWFpZCcpO1xuXHRcdFx0XHRcdFx0XHR2YXIgaW5zZXJ0U3ZnID0gZnVuY3Rpb24oc3ZnQ29kZSwgYmluZEZ1bmN0aW9ucykge1xuXHRcdFx0XHRcdFx0XHRcdGVsZW1lbnQuaHRtbChzdmdDb2RlKTtcblx0XHRcdFx0XHRcdFx0XHRpZih0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKXtcblx0XHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKGlkKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YmluZEZ1bmN0aW9ucyhlbGVtZW50WzBdKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0bWVybWFpZC5yZW5kZXIoaWQsIGdyYXBoU3ludGF4LCBpbnNlcnRTdmcsIGVsZW1lbnRbMF0pO1xuXG5cdFx0XHRcdFx0XHRcdHZhciB6b29tU1ZHID0gZnVuY3Rpb24oem9vbSl7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGN1cnJlbnRXaWR0aCA9ICQoXCJzdmdcIikud2lkdGgoKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbmV3V2lkdGggPSBjdXJyZW50V2lkdGggKiB6b29tO1xuXHRcdFx0XHRcdFx0XHRcdCQoXCJzdmdcIikuY3NzKFwibWF4V2lkdGhcIixuZXdXaWR0aCArIFwicHhcIikud2lkdGgobmV3V2lkdGgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly/mlK/mjIHpvKDmoIfmu5rova7nvKnmlL7nlLvluINcblx0XHRcdFx0XHRcdFx0JCh3aW5kb3cpLm9uKFwibW91c2V3aGVlbFwiLGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdFx0XHRcdFx0XHRpZihldmVudC5jdHJsS2V5KXtcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgem9vbSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDAgPyAxLjEgOiAwLjk7XG5cdFx0XHRcdFx0XHRcdFx0XHR6b29tU1ZHKHpvb20pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdCQoXCIuYnRuLXpvb21cIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0em9vbVNWRygkKHRoaXMpLmF0dHIoXCJ6b29tXCIpKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQ8L3NjcmlwdD5cblx0XHRcdFx0XHQ8YSBjbGFzcz1cImJ0bi16b29tIGJ0bi16b29tLXVwXCIgem9vbT0xLjEgdGl0bGU9XCLngrnlh7vmlL7lpKdcIj4rPC9hPlxuXHRcdFx0XHRcdDxhIGNsYXNzPVwiYnRuLXpvb20gYnRuLXpvb20tZG93blwiIHpvb209MC45IHRpdGxlPVwi54K55Ye757yp5bCPXCI+LTwvYT5cblx0XHRcdFx0PC9ib2R5PlxuXHRcdFx0PC9odG1sPlxuXHRcdFwiXCJcIlxuXG5Kc29uUm91dGVzLmFkZCAnZ2V0JywgJy9hcGkvd29ya2Zsb3cvY2hhcnQ/aW5zdGFuY2VfaWQ9Omluc3RhbmNlX2lkJywgKHJlcSwgcmVzLCBuZXh0KSAtPlxuXHQjIOa1geeoi+WbvlxuXHRGbG93dmVyc2lvbkFQSS5zZW5kSHRtbFJlc3BvbnNlIHJlcSwgcmVzXG5cbkpzb25Sb3V0ZXMuYWRkICdnZXQnLCAnL2FwaS93b3JrZmxvdy9jaGFydC90cmFjZXM/aW5zdGFuY2VfaWQ9Omluc3RhbmNlX2lkJywgKHJlcSwgcmVzLCBuZXh0KSAtPlxuXHQjIOaxh+aAu+etvuaJueWOhueoi+WbvlxuXHRGbG93dmVyc2lvbkFQSS5zZW5kSHRtbFJlc3BvbnNlIHJlcSwgcmVzLCBcInRyYWNlc1wiXG5cbkpzb25Sb3V0ZXMuYWRkICdnZXQnLCAnL2FwaS93b3JrZmxvdy9jaGFydC90cmFjZXNfZXhwYW5kP2luc3RhbmNlX2lkPTppbnN0YW5jZV9pZCcsIChyZXEsIHJlcywgbmV4dCkgLT5cblx0IyDlsZXlvIDmiYDmnInoioLngrnnmoTnrb7mibnljobnqIvlm75cblx0Rmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZSByZXEsIHJlcywgXCJ0cmFjZXNfZXhwYW5kXCJcblxuIiwidmFyIEZsb3d2ZXJzaW9uQVBJO1xuXG5GbG93dmVyc2lvbkFQSSA9IHtcbiAgdHJhY2VNYXhBcHByb3ZlQ291bnQ6IDEwLFxuICB0cmFjZVNwbGl0QXBwcm92ZXNJbmRleDogNSxcbiAgaXNFeHBhbmRBcHByb3ZlOiBmYWxzZSxcbiAgZ2V0QWJzb2x1dGVVcmw6IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciByb290VXJsO1xuICAgIHJvb3RVcmwgPSBfX21ldGVvcl9ydW50aW1lX2NvbmZpZ19fID8gX19tZXRlb3JfcnVudGltZV9jb25maWdfXy5ST09UX1VSTF9QQVRIX1BSRUZJWCA6IFwiXCI7XG4gICAgaWYgKHJvb3RVcmwpIHtcbiAgICAgIHVybCA9IHJvb3RVcmwgKyB1cmw7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH0sXG4gIHdyaXRlUmVzcG9uc2U6IGZ1bmN0aW9uKHJlcywgaHR0cENvZGUsIGJvZHkpIHtcbiAgICByZXMuc3RhdHVzQ29kZSA9IGh0dHBDb2RlO1xuICAgIHJldHVybiByZXMuZW5kKGJvZHkpO1xuICB9LFxuICBzZW5kSW52YWxpZFVSTFJlc3BvbnNlOiBmdW5jdGlvbihyZXMpIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVJlc3BvbnNlKHJlcywgNDA0LCBcInVybCBtdXN0IGhhcyBxdWVyeXMgYXMgaW5zdGFuY2VfaWQuXCIpO1xuICB9LFxuICBzZW5kQXV0aFRva2VuRXhwaXJlZFJlc3BvbnNlOiBmdW5jdGlvbihyZXMpIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVJlc3BvbnNlKHJlcywgNDAxLCBcInRoZSBhdXRoX3Rva2VuIGhhcyBleHBpcmVkLlwiKTtcbiAgfSxcbiAgcmVwbGFjZUVycm9yU3ltYm9sOiBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvXFxuL2csIFwiPGJyLz5cIik7XG4gIH0sXG4gIGdldFN0ZXBIYW5kbGVyTmFtZTogZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBhcHByb3Zlck5hbWVzLCBzdGVwSGFuZGxlck5hbWU7XG4gICAgc3dpdGNoIChzdGVwLmRlYWxfdHlwZSkge1xuICAgICAgY2FzZSAnc3BlY2lmeVVzZXInOlxuICAgICAgICBhcHByb3Zlck5hbWVzID0gc3RlcC5hcHByb3Zlcl91c2Vycy5tYXAoZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICAgICAgdmFyIHVzZXI7XG4gICAgICAgICAgdXNlciA9IGRiLnVzZXJzLmZpbmRPbmUodXNlcklkKTtcbiAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3RlcEhhbmRsZXJOYW1lID0gYXBwcm92ZXJOYW1lcy5qb2luKFwiLFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhcHBsaWNhbnRSb2xlJzpcbiAgICAgICAgYXBwcm92ZXJOYW1lcyA9IHN0ZXAuYXBwcm92ZXJfcm9sZXMubWFwKGZ1bmN0aW9uKHJvbGVJZCkge1xuICAgICAgICAgIHZhciByb2xlO1xuICAgICAgICAgIHJvbGUgPSBkYi5mbG93X3JvbGVzLmZpbmRPbmUocm9sZUlkKTtcbiAgICAgICAgICBpZiAocm9sZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJvbGUubmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3RlcEhhbmRsZXJOYW1lID0gYXBwcm92ZXJOYW1lcy5qb2luKFwiLFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzdGVwSGFuZGxlck5hbWUgPSAnJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzdGVwSGFuZGxlck5hbWU7XG4gIH0sXG4gIGdldFN0ZXBMYWJlbDogZnVuY3Rpb24oc3RlcE5hbWUsIHN0ZXBIYW5kbGVyTmFtZSkge1xuICAgIGlmIChzdGVwTmFtZSkge1xuICAgICAgc3RlcE5hbWUgPSBcIjxkaXYgY2xhc3M9J2dyYXBoLW5vZGUnPiA8ZGl2IGNsYXNzPSdzdGVwLW5hbWUnPlwiICsgc3RlcE5hbWUgKyBcIjwvZGl2PiA8ZGl2IGNsYXNzPSdzdGVwLWhhbmRsZXItbmFtZSc+XCIgKyBzdGVwSGFuZGxlck5hbWUgKyBcIjwvZGl2PiA8L2Rpdj5cIjtcbiAgICAgIHN0ZXBOYW1lID0gRmxvd3ZlcnNpb25BUEkucmVwbGFjZUVycm9yU3ltYm9sKHN0ZXBOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RlcE5hbWUgPSBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gc3RlcE5hbWU7XG4gIH0sXG4gIGdldFN0ZXBOYW1lOiBmdW5jdGlvbihzdGVwLCBjYWNoZWRTdGVwTmFtZXMpIHtcbiAgICB2YXIgY2FjaGVkU3RlcE5hbWUsIHN0ZXBIYW5kbGVyTmFtZSwgc3RlcE5hbWU7XG4gICAgY2FjaGVkU3RlcE5hbWUgPSBjYWNoZWRTdGVwTmFtZXNbc3RlcC5faWRdO1xuICAgIGlmIChjYWNoZWRTdGVwTmFtZSkge1xuICAgICAgcmV0dXJuIGNhY2hlZFN0ZXBOYW1lO1xuICAgIH1cbiAgICBzdGVwSGFuZGxlck5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwSGFuZGxlck5hbWUoc3RlcCk7XG4gICAgc3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTGFiZWwoc3RlcC5uYW1lLCBzdGVwSGFuZGxlck5hbWUpO1xuICAgIGNhY2hlZFN0ZXBOYW1lc1tzdGVwLl9pZF0gPSBzdGVwTmFtZTtcbiAgICByZXR1cm4gc3RlcE5hbWU7XG4gIH0sXG4gIGdlbmVyYXRlU3RlcHNHcmFwaFN5bnRheDogZnVuY3Rpb24oc3RlcHMsIGN1cnJlbnRTdGVwSWQsIGlzQ29udmVydFRvU3RyaW5nLCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgY2FjaGVkU3RlcE5hbWVzLCBncmFwaFN5bnRheCwgbm9kZXM7XG4gICAgbm9kZXMgPSBbXCJncmFwaCBcIiArIGRpcmVjdGlvbl07XG4gICAgY2FjaGVkU3RlcE5hbWVzID0ge307XG4gICAgc3RlcHMuZm9yRWFjaChmdW5jdGlvbihzdGVwKSB7XG4gICAgICB2YXIgbGluZXM7XG4gICAgICBsaW5lcyA9IHN0ZXAubGluZXM7XG4gICAgICBpZiAobGluZXMgIT0gbnVsbCA/IGxpbmVzLmxlbmd0aCA6IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gbGluZXMuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgdmFyIHN0ZXBOYW1lLCB0b1N0ZXAsIHRvU3RlcE5hbWU7XG4gICAgICAgICAgaWYgKHN0ZXAubmFtZSkge1xuICAgICAgICAgICAgaWYgKHN0ZXAuc3RlcF90eXBlID09PSBcImNvbmRpdGlvblwiKSB7XG4gICAgICAgICAgICAgIG5vZGVzLnB1c2goXCJcdGNsYXNzIFwiICsgc3RlcC5faWQgKyBcIiBjb25kaXRpb247XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTmFtZShzdGVwLCBjYWNoZWRTdGVwTmFtZXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGVwTmFtZSA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvU3RlcCA9IHN0ZXBzLmZpbmRQcm9wZXJ0eUJ5UEsoXCJfaWRcIiwgbGluZS50b19zdGVwKTtcbiAgICAgICAgICB0b1N0ZXBOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0U3RlcE5hbWUodG9TdGVwLCBjYWNoZWRTdGVwTmFtZXMpO1xuICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIHN0ZXAuX2lkICsgXCIoXFxcIlwiICsgc3RlcE5hbWUgKyBcIlxcXCIpLS0+XCIgKyBsaW5lLnRvX3N0ZXAgKyBcIihcXFwiXCIgKyB0b1N0ZXBOYW1lICsgXCJcXFwiKVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGN1cnJlbnRTdGVwSWQpIHtcbiAgICAgIG5vZGVzLnB1c2goXCJcdGNsYXNzIFwiICsgY3VycmVudFN0ZXBJZCArIFwiIGN1cnJlbnQtc3RlcC1ub2RlO1wiKTtcbiAgICB9XG4gICAgaWYgKGlzQ29udmVydFRvU3RyaW5nKSB7XG4gICAgICBncmFwaFN5bnRheCA9IG5vZGVzLmpvaW4oXCJcXG5cIik7XG4gICAgICByZXR1cm4gZ3JhcGhTeW50YXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gIH0sXG4gIGdldEFwcHJvdmVKdWRnZVRleHQ6IGZ1bmN0aW9uKGp1ZGdlKSB7XG4gICAgdmFyIGp1ZGdlVGV4dCwgbG9jYWxlO1xuICAgIGxvY2FsZSA9IFwiemgtQ05cIjtcbiAgICBzd2l0Y2ggKGp1ZGdlKSB7XG4gICAgICBjYXNlICdhcHByb3ZlZCc6XG4gICAgICAgIGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIGFwcHJvdmVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVqZWN0ZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWplY3RlZCcsIHt9LCBsb2NhbGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Rlcm1pbmF0ZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSB0ZXJtaW5hdGVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVhc3NpZ25lZCc6XG4gICAgICAgIGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJlYXNzaWduZWQnLCB7fSwgbG9jYWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyZWxvY2F0ZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWxvY2F0ZWQnLCB7fSwgbG9jYWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyZXRyaWV2ZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZXRyaWV2ZWQnLCB7fSwgbG9jYWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyZXR1cm5lZCc6XG4gICAgICAgIGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJldHVybmVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVhZGVkJzpcbiAgICAgICAganVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVhZGVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAganVkZ2VUZXh0ID0gJyc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4ganVkZ2VUZXh0O1xuICB9LFxuICBnZXRUcmFjZU5hbWU6IGZ1bmN0aW9uKHRyYWNlTmFtZSwgYXBwcm92ZUhhbmRsZXJOYW1lKSB7XG4gICAgaWYgKHRyYWNlTmFtZSkge1xuICAgICAgdHJhY2VOYW1lID0gXCI8ZGl2IGNsYXNzPSdncmFwaC1ub2RlJz4gPGRpdiBjbGFzcz0ndHJhY2UtbmFtZSc+XCIgKyB0cmFjZU5hbWUgKyBcIjwvZGl2PiA8ZGl2IGNsYXNzPSd0cmFjZS1oYW5kbGVyLW5hbWUnPlwiICsgYXBwcm92ZUhhbmRsZXJOYW1lICsgXCI8L2Rpdj4gPC9kaXY+XCI7XG4gICAgICB0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2wodHJhY2VOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhY2VOYW1lID0gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIHRyYWNlTmFtZTtcbiAgfSxcbiAgZ2V0VHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzV2l0aFR5cGU6IGZ1bmN0aW9uKHRyYWNlKSB7XG4gICAgdmFyIGFwcHJvdmVzLCBjb3VudGVycztcbiAgICBjb3VudGVycyA9IHt9O1xuICAgIGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXM7XG4gICAgaWYgKCFhcHByb3Zlcykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGFwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24oYXBwcm92ZSkge1xuICAgICAgaWYgKGFwcHJvdmUuZnJvbV9hcHByb3ZlX2lkKSB7XG4gICAgICAgIGlmICghY291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdKSB7XG4gICAgICAgICAgY291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXVthcHByb3ZlLnR5cGVdKSB7XG4gICAgICAgICAgcmV0dXJuIGNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXVthcHByb3ZlLnR5cGVdKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXVthcHByb3ZlLnR5cGVdID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3VudGVycztcbiAgfSxcbiAgZ2V0VHJhY2VDb3VudGVyc1dpdGhUeXBlOiBmdW5jdGlvbih0cmFjZSwgdHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzKSB7XG4gICAgdmFyIGFwcHJvdmVzLCBjb3VudGVycywgaXNFeHBhbmRBcHByb3ZlLCB0cmFjZU1heEFwcHJvdmVDb3VudDtcbiAgICBjb3VudGVycyA9IHt9O1xuICAgIGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXM7XG4gICAgaWYgKCFhcHByb3Zlcykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyYWNlTWF4QXBwcm92ZUNvdW50ID0gRmxvd3ZlcnNpb25BUEkudHJhY2VNYXhBcHByb3ZlQ291bnQ7XG4gICAgaXNFeHBhbmRBcHByb3ZlID0gRmxvd3ZlcnNpb25BUEkuaXNFeHBhbmRBcHByb3ZlO1xuICAgIGFwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24odG9BcHByb3ZlKSB7XG4gICAgICB2YXIgdG9BcHByb3ZlRnJvbUlkLCB0b0FwcHJvdmVIYW5kbGVyTmFtZSwgdG9BcHByb3ZlVHlwZTtcbiAgICAgIHRvQXBwcm92ZVR5cGUgPSB0b0FwcHJvdmUudHlwZTtcbiAgICAgIHRvQXBwcm92ZUZyb21JZCA9IHRvQXBwcm92ZS5mcm9tX2FwcHJvdmVfaWQ7XG4gICAgICB0b0FwcHJvdmVIYW5kbGVyTmFtZSA9IHRvQXBwcm92ZS5oYW5kbGVyX25hbWU7XG4gICAgICBpZiAoIXRvQXBwcm92ZUZyb21JZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gYXBwcm92ZXMuZm9yRWFjaChmdW5jdGlvbihmcm9tQXBwcm92ZSkge1xuICAgICAgICB2YXIgY291bnRlciwgY291bnRlcjIsIGNvdW50ZXJDb250ZW50LCByZWY7XG4gICAgICAgIGlmIChmcm9tQXBwcm92ZS5faWQgPT09IHRvQXBwcm92ZUZyb21JZCkge1xuICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyc1t0b0FwcHJvdmVGcm9tSWRdO1xuICAgICAgICAgIGlmICghY291bnRlcikge1xuICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXJzW3RvQXBwcm92ZUZyb21JZF0gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFjb3VudGVyW3RvQXBwcm92ZS50eXBlXSkge1xuICAgICAgICAgICAgY291bnRlclt0b0FwcHJvdmUudHlwZV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY291bnRlcjIgPSBjb3VudGVyW3RvQXBwcm92ZS50eXBlXTtcbiAgICAgICAgICBpZiAoKHJlZiA9IHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1t0b0FwcHJvdmUuX2lkXSkgIT0gbnVsbCA/IHJlZlt0b0FwcHJvdmVUeXBlXSA6IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXIyLnB1c2goe1xuICAgICAgICAgICAgICBmcm9tX3R5cGU6IGZyb21BcHByb3ZlLnR5cGUsXG4gICAgICAgICAgICAgIGZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWU6IGZyb21BcHByb3ZlLmhhbmRsZXJfbmFtZSxcbiAgICAgICAgICAgICAgdG9fYXBwcm92ZV9pZDogdG9BcHByb3ZlLl9pZCxcbiAgICAgICAgICAgICAgdG9fYXBwcm92ZV9oYW5kbGVyX25hbWU6IHRvQXBwcm92ZS5oYW5kbGVyX25hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb3VudGVyQ29udGVudCA9IGlzRXhwYW5kQXBwcm92ZSA/IG51bGwgOiBjb3VudGVyMi5maW5kUHJvcGVydHlCeVBLKFwiaXNfdG90YWxcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoY291bnRlckNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgY291bnRlckNvbnRlbnQuY291bnQrKztcbiAgICAgICAgICAgICAgaWYgKCEoY291bnRlckNvbnRlbnQuY291bnQgPiB0cmFjZU1heEFwcHJvdmVDb3VudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnRlckNvbnRlbnQudG9fYXBwcm92ZV9oYW5kbGVyX25hbWVzLnB1c2godG9BcHByb3ZlLmhhbmRsZXJfbmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBjb3VudGVyMi5wdXNoKHtcbiAgICAgICAgICAgICAgICBmcm9tX3R5cGU6IGZyb21BcHByb3ZlLnR5cGUsXG4gICAgICAgICAgICAgICAgZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZTogZnJvbUFwcHJvdmUuaGFuZGxlcl9uYW1lLFxuICAgICAgICAgICAgICAgIHRvX2FwcHJvdmVfaWQ6IHRvQXBwcm92ZS5faWQsXG4gICAgICAgICAgICAgICAgY291bnQ6IDEsXG4gICAgICAgICAgICAgICAgdG9fYXBwcm92ZV9oYW5kbGVyX25hbWVzOiBbdG9BcHByb3ZlLmhhbmRsZXJfbmFtZV0sXG4gICAgICAgICAgICAgICAgaXNfdG90YWw6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gY291bnRlcnM7XG4gIH0sXG4gIHB1c2hBcHByb3Zlc1dpdGhUeXBlR3JhcGhTeW50YXg6IGZ1bmN0aW9uKG5vZGVzLCB0cmFjZSkge1xuICAgIHZhciBhcHByb3ZlcywgY3VycmVudFRyYWNlTmFtZSwgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyLCBmcm9tQXBwcm92ZSwgZnJvbUFwcHJvdmVJZCwgcmVzdWx0cywgc3BsaXRJbmRleCwgdGVtcEhhbmRsZXJOYW1lcywgdG9BcHByb3ZlSWQsIHRvQXBwcm92ZVR5cGUsIHRvQXBwcm92ZXMsIHRyYWNlQ291bnRlcnMsIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVycywgdHJhY2VNYXhBcHByb3ZlQ291bnQ7XG4gICAgdHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzV2l0aFR5cGUodHJhY2UpO1xuICAgIHRyYWNlQ291bnRlcnMgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZUNvdW50ZXJzV2l0aFR5cGUodHJhY2UsIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVycyk7XG4gICAgaWYgKCF0cmFjZUNvdW50ZXJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlciA9IHt9O1xuICAgIHRyYWNlTWF4QXBwcm92ZUNvdW50ID0gRmxvd3ZlcnNpb25BUEkudHJhY2VNYXhBcHByb3ZlQ291bnQ7XG4gICAgc3BsaXRJbmRleCA9IEZsb3d2ZXJzaW9uQVBJLnRyYWNlU3BsaXRBcHByb3Zlc0luZGV4O1xuICAgIGN1cnJlbnRUcmFjZU5hbWUgPSB0cmFjZS5uYW1lO1xuICAgIGZvciAoZnJvbUFwcHJvdmVJZCBpbiB0cmFjZUNvdW50ZXJzKSB7XG4gICAgICBmcm9tQXBwcm92ZSA9IHRyYWNlQ291bnRlcnNbZnJvbUFwcHJvdmVJZF07XG4gICAgICBmb3IgKHRvQXBwcm92ZVR5cGUgaW4gZnJvbUFwcHJvdmUpIHtcbiAgICAgICAgdG9BcHByb3ZlcyA9IGZyb21BcHByb3ZlW3RvQXBwcm92ZVR5cGVdO1xuICAgICAgICB0b0FwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24odG9BcHByb3ZlKSB7XG4gICAgICAgICAgdmFyIGV4dHJhQ291bnQsIGlzVHlwZU5vZGUsIHN0clRvSGFuZGxlck5hbWVzLCB0b0hhbmRsZXJOYW1lcywgdHJhY2VOYW1lLCB0eXBlTmFtZTtcbiAgICAgICAgICB0eXBlTmFtZSA9IFwiXCI7XG4gICAgICAgICAgc3dpdGNoICh0b0FwcHJvdmVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdjYyc6XG4gICAgICAgICAgICAgIHR5cGVOYW1lID0gXCLkvKDpmIVcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmb3J3YXJkJzpcbiAgICAgICAgICAgICAgdHlwZU5hbWUgPSBcIui9rOWPkVwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rpc3RyaWJ1dGUnOlxuICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwi5YiG5Y+RXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzVHlwZU5vZGUgPSBbXCJjY1wiLCBcImZvcndhcmRcIiwgXCJkaXN0cmlidXRlXCJdLmluZGV4T2YodG9BcHByb3ZlLmZyb21fdHlwZSkgPj0gMDtcbiAgICAgICAgICBpZiAoaXNUeXBlTm9kZSkge1xuICAgICAgICAgICAgdHJhY2VOYW1lID0gdG9BcHByb3ZlLmZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlTmFtZShjdXJyZW50VHJhY2VOYW1lLCB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0b0FwcHJvdmUuaXNfdG90YWwpIHtcbiAgICAgICAgICAgIHRvSGFuZGxlck5hbWVzID0gdG9BcHByb3ZlLnRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lcztcbiAgICAgICAgICAgIGlmIChzcGxpdEluZGV4ICYmIHRvQXBwcm92ZS5jb3VudCA+IHNwbGl0SW5kZXgpIHtcbiAgICAgICAgICAgICAgdG9IYW5kbGVyTmFtZXMuc3BsaWNlKHNwbGl0SW5kZXgsIDAsIFwiPGJyLz4sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyVG9IYW5kbGVyTmFtZXMgPSB0b0hhbmRsZXJOYW1lcy5qb2luKFwiLFwiKS5yZXBsYWNlKFwiLCxcIiwgXCJcIik7XG4gICAgICAgICAgICBleHRyYUNvdW50ID0gdG9BcHByb3ZlLmNvdW50IC0gdHJhY2VNYXhBcHByb3ZlQ291bnQ7XG4gICAgICAgICAgICBpZiAoZXh0cmFDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgc3RyVG9IYW5kbGVyTmFtZXMgKz0gXCLnrYlcIiArIHRvQXBwcm92ZS5jb3VudCArIFwi5Lq6XCI7XG4gICAgICAgICAgICAgIGlmICghZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdID0ge307XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdW3RvQXBwcm92ZVR5cGVdID0gdG9BcHByb3ZlLnRvX2FwcHJvdmVfaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0clRvSGFuZGxlck5hbWVzID0gdG9BcHByb3ZlLnRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNUeXBlTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnB1c2goXCJcdFwiICsgZnJvbUFwcHJvdmVJZCArIFwiPlxcXCJcIiArIHRyYWNlTmFtZSArIFwiXFxcIl0tLVwiICsgdHlwZU5hbWUgKyBcIi0tPlwiICsgdG9BcHByb3ZlLnRvX2FwcHJvdmVfaWQgKyBcIj5cXFwiXCIgKyBzdHJUb0hhbmRsZXJOYW1lcyArIFwiXFxcIl1cIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIGZyb21BcHByb3ZlSWQgKyBcIihcXFwiXCIgKyB0cmFjZU5hbWUgKyBcIlxcXCIpLS1cIiArIHR5cGVOYW1lICsgXCItLT5cIiArIHRvQXBwcm92ZS50b19hcHByb3ZlX2lkICsgXCI+XFxcIlwiICsgc3RyVG9IYW5kbGVyTmFtZXMgKyBcIlxcXCJdXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXM7XG4gICAgaWYgKCFfLmlzRW1wdHkoZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyKSkge1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChmcm9tQXBwcm92ZUlkIGluIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcikge1xuICAgICAgICBmcm9tQXBwcm92ZSA9IGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcltmcm9tQXBwcm92ZUlkXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0czE7XG4gICAgICAgICAgcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKHRvQXBwcm92ZVR5cGUgaW4gZnJvbUFwcHJvdmUpIHtcbiAgICAgICAgICAgIHRvQXBwcm92ZUlkID0gZnJvbUFwcHJvdmVbdG9BcHByb3ZlVHlwZV07XG4gICAgICAgICAgICB0ZW1wSGFuZGxlck5hbWVzID0gW107XG4gICAgICAgICAgICBhcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKGFwcHJvdmUpIHtcbiAgICAgICAgICAgICAgdmFyIHJlZjtcbiAgICAgICAgICAgICAgaWYgKGZyb21BcHByb3ZlSWQgPT09IGFwcHJvdmUuZnJvbV9hcHByb3ZlX2lkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoKHJlZiA9IHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1thcHByb3ZlLl9pZF0pICE9IG51bGwgPyByZWZbdG9BcHByb3ZlVHlwZV0gOiB2b2lkIDApKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcEhhbmRsZXJOYW1lcy5wdXNoKGFwcHJvdmUuaGFuZGxlcl9uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzdWx0czEucHVzaChub2Rlcy5wdXNoKFwiXHRjbGljayBcIiArIHRvQXBwcm92ZUlkICsgXCIgY2FsbGJhY2sgXFxcIlwiICsgKHRlbXBIYW5kbGVyTmFtZXMuam9pbihcIixcIikpICsgXCJcXFwiXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMxO1xuICAgICAgICB9KSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgfSxcbiAgZ2VuZXJhdGVUcmFjZXNHcmFwaFN5bnRheDogZnVuY3Rpb24odHJhY2VzLCBpc0NvbnZlcnRUb1N0cmluZywgZGlyZWN0aW9uKSB7XG4gICAgdmFyIGdyYXBoU3ludGF4LCBsYXN0QXBwcm92ZXMsIGxhc3RUcmFjZSwgbm9kZXM7XG4gICAgbm9kZXMgPSBbXCJncmFwaCBcIiArIGRpcmVjdGlvbl07XG4gICAgbGFzdFRyYWNlID0gbnVsbDtcbiAgICBsYXN0QXBwcm92ZXMgPSBbXTtcbiAgICB0cmFjZXMuZm9yRWFjaChmdW5jdGlvbih0cmFjZSkge1xuICAgICAgdmFyIGN1cnJlbnRUcmFjZU5hbWUsIGxpbmVzO1xuICAgICAgbGluZXMgPSB0cmFjZS5wcmV2aW91c190cmFjZV9pZHM7XG4gICAgICBjdXJyZW50VHJhY2VOYW1lID0gdHJhY2UubmFtZTtcbiAgICAgIGlmIChsaW5lcyAhPSBudWxsID8gbGluZXMubGVuZ3RoIDogdm9pZCAwKSB7XG4gICAgICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgIHZhciBjdXJyZW50RnJvbVRyYWNlTmFtZSwgZnJvbUFwcHJvdmVzLCBmcm9tVHJhY2UsIHRvQXBwcm92ZXM7XG4gICAgICAgICAgZnJvbVRyYWNlID0gdHJhY2VzLmZpbmRQcm9wZXJ0eUJ5UEsoXCJfaWRcIiwgbGluZSk7XG4gICAgICAgICAgY3VycmVudEZyb21UcmFjZU5hbWUgPSBmcm9tVHJhY2UubmFtZTtcbiAgICAgICAgICBmcm9tQXBwcm92ZXMgPSBmcm9tVHJhY2UuYXBwcm92ZXM7XG4gICAgICAgICAgdG9BcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzO1xuICAgICAgICAgIGxhc3RUcmFjZSA9IHRyYWNlO1xuICAgICAgICAgIGxhc3RBcHByb3ZlcyA9IHRvQXBwcm92ZXM7XG4gICAgICAgICAgcmV0dXJuIGZyb21BcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKGZyb21BcHByb3ZlKSB7XG4gICAgICAgICAgICB2YXIgZnJvbUFwcHJvdmVIYW5kbGVyTmFtZSwgZnJvbVRyYWNlTmFtZSwganVkZ2VUZXh0LCB0b1RyYWNlTmFtZTtcbiAgICAgICAgICAgIGZyb21BcHByb3ZlSGFuZGxlck5hbWUgPSBmcm9tQXBwcm92ZS5oYW5kbGVyX25hbWU7XG4gICAgICAgICAgICBpZiAodG9BcHByb3ZlcyAhPSBudWxsID8gdG9BcHByb3Zlcy5sZW5ndGggOiB2b2lkIDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRvQXBwcm92ZXMuZm9yRWFjaChmdW5jdGlvbih0b0FwcHJvdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVRyYWNlTmFtZSwganVkZ2VUZXh0LCB0b1RyYWNlTmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoW1wiY2NcIiwgXCJmb3J3YXJkXCIsIFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKHRvQXBwcm92ZS50eXBlKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgIGlmIChbXCJjY1wiLCBcImZvcndhcmRcIiwgXCJkaXN0cmlidXRlXCJdLmluZGV4T2YoZnJvbUFwcHJvdmUudHlwZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb21UcmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUoY3VycmVudEZyb21UcmFjZU5hbWUsIGZyb21BcHByb3ZlSGFuZGxlck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0b1RyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlTmFtZShjdXJyZW50VHJhY2VOYW1lLCB0b0FwcHJvdmUuaGFuZGxlcl9uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAganVkZ2VUZXh0ID0gRmxvd3ZlcnNpb25BUEkuZ2V0QXBwcm92ZUp1ZGdlVGV4dChmcm9tQXBwcm92ZS5qdWRnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqdWRnZVRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBmcm9tQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyBmcm9tVHJhY2VOYW1lICsgXCJcXFwiKS0tXCIgKyBqdWRnZVRleHQgKyBcIi0tPlwiICsgdG9BcHByb3ZlLl9pZCArIFwiKFxcXCJcIiArIHRvVHJhY2VOYW1lICsgXCJcXFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBmcm9tQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyBmcm9tVHJhY2VOYW1lICsgXCJcXFwiKS0tPlwiICsgdG9BcHByb3ZlLl9pZCArIFwiKFxcXCJcIiArIHRvVHJhY2VOYW1lICsgXCJcXFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoW1wiY2NcIiwgXCJmb3J3YXJkXCIsIFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKGZyb21BcHByb3ZlLnR5cGUpIDwgMCkge1xuICAgICAgICAgICAgICAgIGZyb21UcmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUoY3VycmVudEZyb21UcmFjZU5hbWUsIGZyb21BcHByb3ZlSGFuZGxlck5hbWUpO1xuICAgICAgICAgICAgICAgIHRvVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkucmVwbGFjZUVycm9yU3ltYm9sKGN1cnJlbnRUcmFjZU5hbWUpO1xuICAgICAgICAgICAgICAgIGp1ZGdlVGV4dCA9IEZsb3d2ZXJzaW9uQVBJLmdldEFwcHJvdmVKdWRnZVRleHQoZnJvbUFwcHJvdmUuanVkZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChqdWRnZVRleHQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIGZyb21BcHByb3ZlLl9pZCArIFwiKFxcXCJcIiArIGZyb21UcmFjZU5hbWUgKyBcIlxcXCIpLS1cIiArIGp1ZGdlVGV4dCArIFwiLS0+XCIgKyB0cmFjZS5faWQgKyBcIihcXFwiXCIgKyB0b1RyYWNlTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIGZyb21BcHByb3ZlLl9pZCArIFwiKFxcXCJcIiArIGZyb21UcmFjZU5hbWUgKyBcIlxcXCIpLS0+XCIgKyB0cmFjZS5faWQgKyBcIihcXFwiXCIgKyB0b1RyYWNlTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhY2UuYXBwcm92ZXMuZm9yRWFjaChmdW5jdGlvbihhcHByb3ZlKSB7XG4gICAgICAgICAgdmFyIHRyYWNlTmFtZTtcbiAgICAgICAgICB0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUoY3VycmVudFRyYWNlTmFtZSwgYXBwcm92ZS5oYW5kbGVyX25hbWUpO1xuICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIGFwcHJvdmUuX2lkICsgXCIoXFxcIlwiICsgdHJhY2VOYW1lICsgXCJcXFwiKVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gRmxvd3ZlcnNpb25BUEkucHVzaEFwcHJvdmVzV2l0aFR5cGVHcmFwaFN5bnRheChub2RlcywgdHJhY2UpO1xuICAgIH0pO1xuICAgIGlmIChsYXN0QXBwcm92ZXMgIT0gbnVsbCkge1xuICAgICAgbGFzdEFwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24obGFzdEFwcHJvdmUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzLnB1c2goXCJcdGNsYXNzIFwiICsgbGFzdEFwcHJvdmUuX2lkICsgXCIgY3VycmVudC1zdGVwLW5vZGU7XCIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc0NvbnZlcnRUb1N0cmluZykge1xuICAgICAgZ3JhcGhTeW50YXggPSBub2Rlcy5qb2luKFwiXFxuXCIpO1xuICAgICAgcmV0dXJuIGdyYXBoU3ludGF4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICB9LFxuICBzZW5kSHRtbFJlc3BvbnNlOiBmdW5jdGlvbihyZXEsIHJlcywgdHlwZSkge1xuICAgIHZhciBhbGxvd0RpcmVjdGlvbnMsIGN1cnJlbnRTdGVwSWQsIGRpcmVjdGlvbiwgZXJyb3JfbXNnLCBmbG93dmVyc2lvbiwgZ3JhcGhTeW50YXgsIGluc3RhbmNlLCBpbnN0YW5jZV9pZCwgcXVlcnksIHJlZiwgcmVmMSwgc3RlcHMsIHRpdGxlLCB0cmFjZXM7XG4gICAgcXVlcnkgPSByZXEucXVlcnk7XG4gICAgaW5zdGFuY2VfaWQgPSBxdWVyeS5pbnN0YW5jZV9pZDtcbiAgICBkaXJlY3Rpb24gPSBxdWVyeS5kaXJlY3Rpb24gfHwgJ1REJztcbiAgICBhbGxvd0RpcmVjdGlvbnMgPSBbJ1RCJywgJ0JUJywgJ1JMJywgJ0xSJywgJ1REJ107XG4gICAgaWYgKCFfLmluY2x1ZGUoYWxsb3dEaXJlY3Rpb25zLCBkaXJlY3Rpb24pKSB7XG4gICAgICByZXR1cm4gdGhpcy53cml0ZVJlc3BvbnNlKHJlcywgNTAwLCBcIkludmFsaWQgZGlyZWN0aW9uLiBUaGUgdmFsdWUgb2YgZGlyZWN0aW9uIHNob3VsZCBiZSBpbiBbJ1RCJywgJ0JUJywgJ1JMJywgJ0xSJywgJ1REJ11cIik7XG4gICAgfVxuICAgIGlmICghaW5zdGFuY2VfaWQpIHtcbiAgICAgIEZsb3d2ZXJzaW9uQVBJLnNlbmRJbnZhbGlkVVJMUmVzcG9uc2UocmVzKTtcbiAgICB9XG4gICAgdGl0bGUgPSBxdWVyeS50aXRsZTtcbiAgICBpZiAodGl0bGUpIHtcbiAgICAgIHRpdGxlID0gZGVjb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudCh0aXRsZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9IFwiV29ya2Zsb3cgQ2hhcnRcIjtcbiAgICB9XG4gICAgZXJyb3JfbXNnID0gXCJcIjtcbiAgICBncmFwaFN5bnRheCA9IFwiXCI7XG4gICAgRmxvd3ZlcnNpb25BUEkuaXNFeHBhbmRBcHByb3ZlID0gZmFsc2U7XG4gICAgaWYgKHR5cGUgPT09IFwidHJhY2VzX2V4cGFuZFwiKSB7XG4gICAgICB0eXBlID0gXCJ0cmFjZXNcIjtcbiAgICAgIEZsb3d2ZXJzaW9uQVBJLmlzRXhwYW5kQXBwcm92ZSA9IHRydWU7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAndHJhY2VzJzpcbiAgICAgICAgaW5zdGFuY2UgPSBkYi5pbnN0YW5jZXMuZmluZE9uZShpbnN0YW5jZV9pZCwge1xuICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgdHJhY2VzOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgICAgdHJhY2VzID0gaW5zdGFuY2UudHJhY2VzO1xuICAgICAgICAgIGlmICh0cmFjZXMgIT0gbnVsbCA/IHRyYWNlcy5sZW5ndGggOiB2b2lkIDApIHtcbiAgICAgICAgICAgIGdyYXBoU3ludGF4ID0gdGhpcy5nZW5lcmF0ZVRyYWNlc0dyYXBoU3ludGF4KHRyYWNlcywgZmFsc2UsIGRpcmVjdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yX21zZyA9IFwi5rKh5pyJ5om+5Yiw5b2T5YmN55Sz6K+35Y2V55qE5rWB56iL5q2l6aqk5pWw5o2uXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVycm9yX21zZyA9IFwi5b2T5YmN55Sz6K+35Y2V5LiN5a2Y5Zyo5oiW5bey6KKr5Yig6ZmkXCI7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpbnN0YW5jZSA9IGRiLmluc3RhbmNlcy5maW5kT25lKGluc3RhbmNlX2lkLCB7XG4gICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBmbG93X3ZlcnNpb246IDEsXG4gICAgICAgICAgICBmbG93OiAxLFxuICAgICAgICAgICAgdHJhY2VzOiB7XG4gICAgICAgICAgICAgICRzbGljZTogLTFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICBjdXJyZW50U3RlcElkID0gKHJlZiA9IGluc3RhbmNlLnRyYWNlcykgIT0gbnVsbCA/IChyZWYxID0gcmVmWzBdKSAhPSBudWxsID8gcmVmMS5zdGVwIDogdm9pZCAwIDogdm9pZCAwO1xuICAgICAgICAgIGZsb3d2ZXJzaW9uID0gV29ya2Zsb3dNYW5hZ2VyLmdldEluc3RhbmNlRmxvd1ZlcnNpb24oaW5zdGFuY2UpO1xuICAgICAgICAgIHN0ZXBzID0gZmxvd3ZlcnNpb24gIT0gbnVsbCA/IGZsb3d2ZXJzaW9uLnN0ZXBzIDogdm9pZCAwO1xuICAgICAgICAgIGlmIChzdGVwcyAhPSBudWxsID8gc3RlcHMubGVuZ3RoIDogdm9pZCAwKSB7XG4gICAgICAgICAgICBncmFwaFN5bnRheCA9IHRoaXMuZ2VuZXJhdGVTdGVwc0dyYXBoU3ludGF4KHN0ZXBzLCBjdXJyZW50U3RlcElkLCBmYWxzZSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JfbXNnID0gXCLmsqHmnInmib7liLDlvZPliY3nlLPor7fljZXnmoTmtYHnqIvmraXpqqTmlbDmja5cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJyb3JfbXNnID0gXCLlvZPliY3nlLPor7fljZXkuI3lrZjlnKjmiJblt7LooqvliKDpmaRcIjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCcpO1xuICAgIHJldHVybiB0aGlzLndyaXRlUmVzcG9uc2UocmVzLCAyMDAsIFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+XFxuXHQ8aGVhZD5cXG5cdFx0PG1ldGEgY2hhcnNldD1cXFwidXRmLThcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx1c2VyLXNjYWxhYmxlPXllc1xcXCI+XFxuXHRcdDx0aXRsZT5cIiArIHRpdGxlICsgXCI8L3RpdGxlPlxcblx0XHQ8bGluayByZWw9XFxcImljb25cXFwiIHR5cGU9XFxcImltYWdlL3BuZ1xcXCIgc2l6ZXM9XFxcIjE5MngxOTJcXFwiIGhyZWY9XFxcIi9mYXZpY29ucy9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZ1xcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwibWFuaWZlc3RcXFwiIGhyZWY9XFxcIi9mYXZpY29ucy9tYW5pZmVzdC5qc29uXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwibW9iaWxlLXdlYi1hcHAtY2FwYWJsZVxcXCIgY29udGVudD1cXFwieWVzXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwidGhlbWUtY29sb3JcXFwiIGNvbnRlbnQ9XFxcIiMwMDBcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsaWNhdGlvbi1uYW1lXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJhcHBsZS10b3VjaC1pY29uXFxcIiBzaXplcz1cXFwiNTd4NTdcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi01N3g1Ny5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCI2MHg2MFxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTYweDYwLnBuZ1wiKSkgKyBcIlxcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwiYXBwbGUtdG91Y2gtaWNvblxcXCIgc2l6ZXM9XFxcIjcyeDcyXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tNzJ4NzIucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJhcHBsZS10b3VjaC1pY29uXFxcIiBzaXplcz1cXFwiNzZ4NzZcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi03Nng3Ni5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxMTR4MTE0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTE0eDExNC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxMjB4MTIwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTIweDEyMC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxNDR4MTQ0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTQ0eDE0NC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxNTJ4MTUyXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTUyeDE1Mi5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxODB4MTgwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTgweDE4MC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlXFxcIiBjb250ZW50PVxcXCJ5ZXNcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlXFxcIiBjb250ZW50PVxcXCJibGFjay10cmFuc2x1Y2VudFxcXCI+XFxuXHRcdDxtZXRhIG5hbWU9XFxcImFwcGxlLW1vYmlsZS13ZWItYXBwLXRpdGxlXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIyMjh4MjI4XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2NvYXN0LTIyOHgyMjgucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIxNngxNlxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLTE2eDE2LnBuZ1wiKSkgKyBcIlxcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwiaWNvblxcXCIgdHlwZT1cXFwiaW1hZ2UvcG5nXFxcIiBzaXplcz1cXFwiMzJ4MzJcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi0zMngzMi5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImljb25cXFwiIHR5cGU9XFxcImltYWdlL3BuZ1xcXCIgc2l6ZXM9XFxcIjk2eDk2XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tOTZ4OTYucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIyMzB4MjMwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tMjMweDIzMC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcInNob3J0Y3V0IGljb25cXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi5pY29cIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcInlhbmRleC10YWJsZWF1LXdpZGdldFxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy95YW5kZXgtYnJvd3Nlci1tYW5pZmVzdC5qc29uXCIpKSArIFwiXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwibXNhcHBsaWNhdGlvbi1UaWxlQ29sb3JcXFwiIGNvbnRlbnQ9XFxcIiNmZmZcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJtc2FwcGxpY2F0aW9uLVRpbGVJbWFnZVxcXCIgY29udGVudD1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9tc3RpbGUtMTQ0eDE0NC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJtc2FwcGxpY2F0aW9uLWNvbmZpZ1xcXCIgY29udGVudD1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9icm93c2VyY29uZmlnLnhtbFwiKSkgKyBcIlxcXCI+XFxuXHRcdDxtZXRhIHByb3BlcnR5PVxcXCJ0d2l0dGVyOmltYWdlXFxcIiBjb250ZW50PVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL3R3aXR0ZXIucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PG1ldGEgcHJvcGVydHk9XFxcIm9nOmltYWdlXFxcIiBjb250ZW50PVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL29wZW4tZ3JhcGgucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLmNzc1wiKSkgKyBcIlxcXCIvPlxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCIgc3JjPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2xpYi9qcXVlcnkvanF1ZXJ5LTEuMTEuMi5taW4uanNcIikpICsgXCJcXFwiPjwvc2NyaXB0Plxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCIgc3JjPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLm1pbi5qc1wiKSkgKyBcIlxcXCI+PC9zY3JpcHQ+XFxuXHRcdDxzdHlsZT5cXG5cdFx0XHRib2R5IHsgXFxuXHRcdFx0XHRmb250LWZhbWlseTogJ1NvdXJjZSBTYW5zIFBybycsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcblx0XHRcdH1cXG5cdFx0XHQubG9hZGluZ3tcXG5cdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG5cdFx0XHRcdGxlZnQ6IDBweDtcXG5cdFx0XHRcdHJpZ2h0OiAwcHg7XFxuXHRcdFx0XHR0b3A6IDUwJTtcXG5cdFx0XHRcdHotaW5kZXg6IDExMDA7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRtYXJnaW4tdG9wOiAtMzBweDtcXG5cdFx0XHRcdGZvbnQtc2l6ZTogMzZweDtcXG5cdFx0XHRcdGNvbG9yOiAjZGZkZmRmO1xcblx0XHRcdH1cXG5cdFx0XHQuZXJyb3ItbXNne1xcblx0XHRcdFx0cG9zaXRpb246IGFic29sdXRlO1xcblx0XHRcdFx0bGVmdDogMHB4O1xcblx0XHRcdFx0cmlnaHQ6IDBweDtcXG5cdFx0XHRcdGJvdHRvbTogMjBweDtcXG5cdFx0XHRcdHotaW5kZXg6IDExMDA7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRmb250LXNpemU6IDIwcHg7XFxuXHRcdFx0XHRjb2xvcjogI2E5NDQ0MjtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIHJlY3R7XFxuXHRcdFx0XHRmaWxsOiAjY2NjY2ZmO1xcblx0XHRcdFx0c3Ryb2tlOiByZ2IoMTQ0LCAxNDQsIDI1NSk7XFxuICAgIFx0XHRcdFx0XHRcdHN0cm9rZS13aWR0aDogMnB4O1xcblx0XHRcdH1cXG5cdFx0XHQjZmxvdy1zdGVwcy1zdmcgLm5vZGUuY3VycmVudC1zdGVwLW5vZGUgcmVjdHtcXG5cdFx0XHRcdGZpbGw6ICNjZGU0OTg7XFxuXHRcdFx0XHRzdHJva2U6ICMxMzU0MGM7XFxuXHRcdFx0XHRzdHJva2Utd2lkdGg6IDJweDtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlLmNvbmRpdGlvbiByZWN0e1xcblx0XHRcdFx0ZmlsbDogI2VjZWNmZjtcXG5cdFx0XHRcdHN0cm9rZTogcmdiKDIwNCwgMjA0LCAyNTUpO1xcbiAgICBcdFx0XHRcdFx0XHRzdHJva2Utd2lkdGg6IDFweDtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC50cmFjZS1oYW5kbGVyLW5hbWV7XFxuXHRcdFx0XHRjb2xvcjogIzc3NztcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC5zdGVwLWhhbmRsZXItbmFtZXtcXG5cdFx0XHRcdGNvbG9yOiAjNzc3O1xcblx0XHRcdH1cXG5cdFx0XHRkaXYubWVybWFpZFRvb2x0aXB7XFxuXHRcdFx0XHRwb3NpdGlvbjogZml4ZWQhaW1wb3J0YW50O1xcblx0XHRcdFx0dGV4dC1hbGlnbjogbGVmdCFpbXBvcnRhbnQ7XFxuXHRcdFx0XHRwYWRkaW5nOiA0cHghaW1wb3J0YW50O1xcblx0XHRcdFx0Zm9udC1zaXplOiAxNHB4IWltcG9ydGFudDtcXG5cdFx0XHRcdG1heC13aWR0aDogNTAwcHghaW1wb3J0YW50O1xcblx0XHRcdFx0bGVmdDogYXV0byFpbXBvcnRhbnQ7XFxuXHRcdFx0XHR0b3A6IDE1cHghaW1wb3J0YW50O1xcblx0XHRcdFx0cmlnaHQ6IDE1cHg7XFxuXHRcdFx0fVxcblx0XHRcdC5idG4tem9vbXtcXG5cdFx0XHRcdGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcXG5cdFx0XHRcdGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuXHRcdFx0XHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuXHRcdFx0XHRwYWRkaW5nOiAycHggMTBweDtcXG5cdFx0XHRcdGZvbnQtc2l6ZTogMjZweDtcXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDIwcHg7XFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAjZWVlO1xcblx0XHRcdFx0Y29sb3I6ICM3Nzc7XFxuXHRcdFx0XHRwb3NpdGlvbjogZml4ZWQ7XFxuXHRcdFx0XHRib3R0b206IDE1cHg7XFxuXHRcdFx0XHRvdXRsaW5lOiBub25lO1xcblx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xcblx0XHRcdFx0ei1pbmRleDogOTk5OTk7XFxuXHRcdFx0XHQtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcblx0XHRcdFx0LW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG5cdFx0XHRcdC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXG5cdFx0XHRcdHVzZXItc2VsZWN0OiBub25lO1xcblx0XHRcdFx0bGluZS1oZWlnaHQ6IDEuMjtcXG5cdFx0XHR9XFxuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XFxuXHRcdFx0XHQuYnRuLXpvb217XFxuXHRcdFx0XHRcdGRpc3BsYXk6bm9uZTtcXG5cdFx0XHRcdH1cXG5cdFx0XHR9XFxuXHRcdFx0LmJ0bi16b29tOmhvdmVye1xcblx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpO1xcblx0XHRcdH1cXG5cdFx0XHQuYnRuLXpvb20tdXB7XFxuXHRcdFx0XHRsZWZ0OiAxNXB4O1xcblx0XHRcdH1cXG5cdFx0XHQuYnRuLXpvb20tZG93bntcXG5cdFx0XHRcdGxlZnQ6IDYwcHg7XFxuXHRcdFx0XHRwYWRkaW5nOiAxcHggMTNweCAzcHggMTNweDtcXG5cdFx0XHR9XFxuXHRcdDwvc3R5bGU+XFxuXHQ8L2hlYWQ+XFxuXHQ8Ym9keT5cXG5cdFx0PGRpdiBjbGFzcyA9IFxcXCJsb2FkaW5nXFxcIj5Mb2FkaW5nLi4uPC9kaXY+XFxuXHRcdDxkaXYgY2xhc3MgPSBcXFwiZXJyb3ItbXNnXFxcIj5cIiArIGVycm9yX21zZyArIFwiPC9kaXY+XFxuXHRcdDxkaXYgY2xhc3M9XFxcIm1lcm1haWRcXFwiPjwvZGl2Plxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCI+XFxuXHRcdFx0bWVybWFpZC5pbml0aWFsaXplKHtcXG5cdFx0XHRcdHN0YXJ0T25Mb2FkOmZhbHNlXFxuXHRcdFx0fSk7XFxuXHRcdFx0JChmdW5jdGlvbigpe1xcblx0XHRcdFx0dmFyIGdyYXBoTm9kZXMgPSBcIiArIChKU09OLnN0cmluZ2lmeShncmFwaFN5bnRheCkpICsgXCI7XFxuXHRcdFx0XHQvL+aWueS+v+WJjemdouWPr+S7pemAmui/h+iwg+eUqG1lcm1haWQuY3VycmVudE5vZGVz6LCD5byP77yM54m55oSP5aKe5YqgY3VycmVudE5vZGVz5bGe5oCn44CCXFxuXHRcdFx0XHRtZXJtYWlkLmN1cnJlbnROb2RlcyA9IGdyYXBoTm9kZXM7XFxuXHRcdFx0XHR2YXIgZ3JhcGhTeW50YXggPSBncmFwaE5vZGVzLmpvaW4oXFxcIlxcXFxuXFxcIik7XFxuXHRcdFx0XHRjb25zb2xlLmxvZyhncmFwaE5vZGVzKTtcXG5cdFx0XHRcdGNvbnNvbGUubG9nKGdyYXBoU3ludGF4KTtcXG5cdFx0XHRcdGNvbnNvbGUubG9nKFxcXCJZb3UgY2FuIGFjY2VzcyB0aGUgZ3JhcGggbm9kZXMgYnkgJ21lcm1haWQuY3VycmVudE5vZGVzJyBpbiB0aGUgY29uc29sZSBvZiBicm93c2VyLlxcXCIpO1xcblx0XHRcdFx0JChcXFwiLmxvYWRpbmdcXFwiKS5yZW1vdmUoKTtcXG5cXG5cdFx0XHRcdHZhciBpZCA9IFxcXCJmbG93LXN0ZXBzLXN2Z1xcXCI7XFxuXHRcdFx0XHR2YXIgZWxlbWVudCA9ICQoJy5tZXJtYWlkJyk7XFxuXHRcdFx0XHR2YXIgaW5zZXJ0U3ZnID0gZnVuY3Rpb24oc3ZnQ29kZSwgYmluZEZ1bmN0aW9ucykge1xcblx0XHRcdFx0XHRlbGVtZW50Lmh0bWwoc3ZnQ29kZSk7XFxuXHRcdFx0XHRcdGlmKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpe1xcblx0XHRcdFx0XHRcdGNhbGxiYWNrKGlkKTtcXG5cdFx0XHRcdFx0fVxcblx0XHRcdFx0XHRiaW5kRnVuY3Rpb25zKGVsZW1lbnRbMF0pO1xcblx0XHRcdFx0fTtcXG5cdFx0XHRcdG1lcm1haWQucmVuZGVyKGlkLCBncmFwaFN5bnRheCwgaW5zZXJ0U3ZnLCBlbGVtZW50WzBdKTtcXG5cXG5cdFx0XHRcdHZhciB6b29tU1ZHID0gZnVuY3Rpb24oem9vbSl7XFxuXHRcdFx0XHRcdHZhciBjdXJyZW50V2lkdGggPSAkKFxcXCJzdmdcXFwiKS53aWR0aCgpO1xcblx0XHRcdFx0XHR2YXIgbmV3V2lkdGggPSBjdXJyZW50V2lkdGggKiB6b29tO1xcblx0XHRcdFx0XHQkKFxcXCJzdmdcXFwiKS5jc3MoXFxcIm1heFdpZHRoXFxcIixuZXdXaWR0aCArIFxcXCJweFxcXCIpLndpZHRoKG5ld1dpZHRoKTtcXG5cdFx0XHRcdH1cXG5cXG5cdFx0XHRcdC8v5pSv5oyB6byg5qCH5rua6L2u57yp5pS+55S75biDXFxuXHRcdFx0XHQkKHdpbmRvdykub24oXFxcIm1vdXNld2hlZWxcXFwiLGZ1bmN0aW9uKGV2ZW50KXtcXG5cdFx0XHRcdFx0aWYoZXZlbnQuY3RybEtleSl7XFxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcXG5cdFx0XHRcdFx0XHR2YXIgem9vbSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDAgPyAxLjEgOiAwLjk7XFxuXHRcdFx0XHRcdFx0em9vbVNWRyh6b29tKTtcXG5cdFx0XHRcdFx0fVxcblx0XHRcdFx0fSk7XFxuXHRcdFx0XHQkKFxcXCIuYnRuLXpvb21cXFwiKS5vbihcXFwiY2xpY2tcXFwiLGZ1bmN0aW9uKCl7XFxuXHRcdFx0XHRcdHpvb21TVkcoJCh0aGlzKS5hdHRyKFxcXCJ6b29tXFxcIikpO1xcblx0XHRcdFx0fSk7XFxuXHRcdFx0fSk7XFxuXHRcdDwvc2NyaXB0Plxcblx0XHQ8YSBjbGFzcz1cXFwiYnRuLXpvb20gYnRuLXpvb20tdXBcXFwiIHpvb209MS4xIHRpdGxlPVxcXCLngrnlh7vmlL7lpKdcXFwiPis8L2E+XFxuXHRcdDxhIGNsYXNzPVxcXCJidG4tem9vbSBidG4tem9vbS1kb3duXFxcIiB6b29tPTAuOSB0aXRsZT1cXFwi54K55Ye757yp5bCPXFxcIj4tPC9hPlxcblx0PC9ib2R5PlxcbjwvaHRtbD5cIik7XG4gIH1cbn07XG5cbkpzb25Sb3V0ZXMuYWRkKCdnZXQnLCAnL2FwaS93b3JrZmxvdy9jaGFydD9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXR1cm4gRmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZShyZXEsIHJlcyk7XG59KTtcblxuSnNvblJvdXRlcy5hZGQoJ2dldCcsICcvYXBpL3dvcmtmbG93L2NoYXJ0L3RyYWNlcz9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXR1cm4gRmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZShyZXEsIHJlcywgXCJ0cmFjZXNcIik7XG59KTtcblxuSnNvblJvdXRlcy5hZGQoJ2dldCcsICcvYXBpL3dvcmtmbG93L2NoYXJ0L3RyYWNlc19leHBhbmQ/aW5zdGFuY2VfaWQ9Omluc3RhbmNlX2lkJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgcmV0dXJuIEZsb3d2ZXJzaW9uQVBJLnNlbmRIdG1sUmVzcG9uc2UocmVxLCByZXMsIFwidHJhY2VzX2V4cGFuZFwiKTtcbn0pO1xuIl19
