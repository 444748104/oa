(this["webpackJsonp@steedos/webapp"]=this["webpackJsonp@steedos/webapp"]||[]).push([[0],{202:function(e){e.exports=JSON.parse('{"accounts.signin":"Sign In","accounts.signup":"Sign Up","accounts.submit":"Submit","accounts.username":"Username","accounts.forget_password":"Forget Password","accounts.reset_password":"Reset Password","accounts.goHome":"Go Home","accounts.emailVerifiedSuccess":"Your email has been verified","accounts.emailSent":"Email sent","accounts.passwordResetSuccessfully":"Your password has been reset successfully","accounts.incorrectPassword":"Incorrect password","accounts.unrecognizedOptionsForLogin":"Unrecognized options for login request","accounts.matchFailed":"Match failed","accounts.invalidUsername":"Invalid username","accounts.invalidEmail":"Invalid email","accounts.invalidMobile":"Invalid Mobile","accounts.invalidPassword":"Invalid password","accounts.invalidNewPassword":"Invalid new password","accounts.invalidToken":"Invalid token","accounts.invalidCode":"Invalid code","accounts.verifyEmailLinkExpired":"Verify email link expired","accounts.resetPasswordLinkExpired":"Reset password link expired","accounts.usernameAlreadyExists":"Username already exists","accounts.emailAlreadyExists":"Email already exists","accounts.mobileAlreadyExists":"Mobile already exists","accounts.usernameOrEmailRequired":"Mobile or Username or Email is required","accounts.emailRequired":"Email is required","accounts.mobileRequired":"Mobile is required","accounts.spaceUnExists":"Invalid Tenant Id","accounts.create_tenant":"Create Tenant","accounts.tenant_name":"Tenant Name","accounts.name":"Fullname","accounts.email":"Email","accounts.password":"Password","accounts.logout":"Logout","accounts.home":"Home","accounts.welcome":"Welcome","accounts.invalid_credentials":"Invalid username or password","accounts.update_password":"Change Password","accounts.oldPassword":"Old Password","accounts.newPassword":"New Password","accounts.confirmPassword":"Confirm Password","accounts.oldAndNewPasswordNotEQ":"Old and new passwords cannot be the same","accounts.passwordNotEQ":"Passwords are inconsistent","accounts.passwordRegError":"Password must contain characters, numbers and letters, and at least one capital letter, and no less than 8 digits","accounts.passwordExpired":"Password has expired, please change the password","accounts.access_denied":"You don\'t have permission","accounts.updatePassword_invalid_credentials":"Invalid old password","accounts.nameRequired":"Name is required","accounts.usernameRequired":"Username is required","accounts.passwordRequired":"Password is required","accounts.tenantNameRequired":"Tenant name is requiredd","accounts.verify":"Verify","accounts.verify_email":"Verify Email","accounts.verify_mobile":"Verify Mobile","accounts.verifyCode":"Verify code","accounts.next":"Next","accounts.reSendCode":"Resend code","accounts.goBack":"Back","accounts.unenableRegister":"This company is set to prohibit the registration of new accounts, please contact the company administrator.","accounts.userNotFound":"Account information not found","accounts.noPasswordSet":"Account has no password","accounts.noEmailSet":"Account has no email","accounts.loginCode":"Login with Verify code","accounts.loginCode.email":"Email","accounts.signupCode.email":"Email","accounts.loginCode.email_or_mobile":"Mobile or Email","accounts.signupCode.email_or_mobile":"Mobile or Email","accounts.set_fullname":"Fullname is required","accounts.mobile":"Mobile","accounts.signupCode.mobile":"Mobile","accounts.title.login":"Sign In","accounts.title.signup":"Sign Up","accounts.title.createTenant":"Create Tenant","accounts.title.resetPassword":"Login with Verify code","accounts.title.updatePassword":"Change Password","accounts.title.verifyEmail":"Verify Email","accounts.title.setName":"Set Fullname","accounts.title.chooseTenant":"Choose Tenant","accounts.title.verifyMobile":"Bind Mobile","accounts.title.verify":"Verify","accounts.emailHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>","accounts.mobileHelp":"SMS service is not configured\uff0c<mobile_help>View help</mobile_help>","accounts.emailHelp_mobileHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>; SMS service is not configured\uff0c<mobile_help>View help</mobile_help>.","accounts.codeRequired":"Verify code is required","accounts.codeExpired":"Verify code is expired","accounts.loginWithCode":"Login with Verify code","accounts.loginWithPassword":"Login with password","accounts.goIn":"Go In","accounts.verifyEmail":"Verify Email","accounts.verifyMobile":"Verify Mobile","accounts.verify.info":"A 6-digit code was sent to {name}, enter it within 10 minutes. Didn\'t get it? Try resending the code.","accounts.disablePasswordLogin":"Login with password is disabled, please contact the administrator","accounts.disableUnverifiedMobilePasswordLogin":"Your mobile is not verified, please login with the verify code","accounts.disableUnverifiedEmailPasswordLogin":"Your email is not verified, please login with the verify code","accounts.invalidRequest":"Invalid request","accounts.serverError":"Server error","accounts.tooManyFailures":"Too many failures, please try again in 10 minutes.","accounts.copyright":"\xa9 2020 steedos.com, inc.","accounts.privacy":"Privacy","accounts.privacyURL":"https://www.steedos.org/docs/steedos/privacy/","accounts.logoURL":"/images/logo_platform.en-us.png"}')},352:function(e){e.exports=JSON.parse('{"accounts.signin":"\u767b\u5f55","accounts.signin-MFA":"\u591a\u91cd\u8eab\u4efd\u9a8c\u8bc1","accounts.signup":"\u521b\u5efa\u8d26\u6237","accounts.no_account":"\u6ca1\u6709\u8d26\u6237\uff1f","accounts.has_account":"\u5df2\u6709\u8d26\u6237\uff1f","accounts.submit":"\u63d0\u4ea4","accounts.forget_password":"\u5fd8\u8bb0\u5bc6\u7801","accounts.reset_password":"\u91cd\u7f6e\u5bc6\u7801","accounts.username":"\u7528\u6237\u540d","accounts.create_tenant":"\u521b\u5efa\u65b0\u56e2\u961f","accounts.no_tenant":"\u60a8\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u56e2\u961f","accounts.create_tenant_description":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56e2\u961f\uff0c\u5e76\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u3002\u60a8\u5c06\u6210\u4e3a\u65b0\u56e2\u961f\u7684\u7ba1\u7406\u5458\u3002","accounts.tenant_name":"\u56e2\u961f\u540d\u79f0","accounts.name":"\u59d3\u540d","accounts.name_placeholder":"\u60a8\u7684\u59d3\u540d","accounts.email":"\u90ae\u7bb1","accounts.email_placeholder":"\u60a8\u7684\u90ae\u7bb1","accounts.mobile":"\u624b\u673a\u53f7","accounts.mobile_placeholder":"\u60a8\u7684\u624b\u673a\u53f7\u7801","accounts.email_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.email_mobile_username":"\u624b\u673a\u3001\u90ae\u7bb1\u6216\u7528\u6237\u540d","accounts.password":"\u5bc6\u7801","accounts.password_placeholder":"\u5bc6\u7801","accounts.password_create":"\u8bbe\u7f6e\u60a8\u7684\u8d26\u6237\u5bc6\u7801","accounts.switch_email":"\u6539\u4e3a\u4f7f\u7528\u7535\u5b50\u90ae\u4ef6","accounts.switch_mobile":"\u6539\u4e3a\u4f7f\u7528\u624b\u673a\u53f7\u7801","accounts.switch_code":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.switch_password":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.select_space":"\u9009\u62e9\u4f01\u4e1a","accounts.title.password":"\u8f93\u5165\u5bc6\u7801","accounts.title.setPassword":"\u8bbe\u7f6e\u5bc6\u7801","accounts.logout":"\u6ce8\u9500","accounts.title.signup":"\u521b\u5efa\u8d26\u6237","accounts.title.createTenant":"\u521b\u5efa\u4f01\u4e1a","accounts.title.resetPassword":"\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.title.updatePassword":"\u4fee\u6539\u5bc6\u7801","accounts.title.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.title.setName":"\u586b\u5199\u59d3\u540d","accounts.title.chooseTenant":"\u9009\u62e9\u4f01\u4e1a","accounts.title.verifyMobile":"\u7ed1\u5b9a\u624b\u673a\u53f7","accounts.title.verify":"\u9a8c\u8bc1\u7801","accounts.home":"\u9996\u9875","accounts.welcome":"\u6b22\u8fce\u60a8","accounts.invalid_credentials":"\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u3002","accounts.invalid_code":"\u8d26\u53f7\u6216\u9a8c\u8bc1\u7801\u9519\u3002","accounts.update_password":"\u4fee\u6539\u5bc6\u7801","accounts.oldPassword":"\u65e7\u5bc6\u7801","accounts.newPassword":"\u65b0\u5bc6\u7801","accounts.confirmPassword":"\u786e\u8ba4\u5bc6\u7801","accounts.oldAndNewPasswordNotEQ":"\u65b0\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c","accounts.passwordNotEQ":"\u5bc6\u7801\u4e0d\u4e00\u81f4","accounts.passwordRegError":"\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u5b57\u7b26\u3001\u6570\u5b57\u548c\u5b57\u6bcd\uff0c\u5e76\u81f3\u5c11\u6709\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\uff0c\u4e14\u4e0d\u80fd\u5c11\u4e8e8\u4f4d","accounts.passwordExpired":"\u5bc6\u7801\u5df2\u8fc7\u671f\uff0c\u8bf7\u4fee\u6539\u5bc6\u7801","accounts.access_denied":"\u60a8\u65e0\u6743\u6267\u884c\u6b64\u64cd\u4f5c\u3002","accounts.updatePassword_invalid_credentials":"\u65e7\u5bc6\u7801\u9519\u8bef","accounts.goHome":"\u8fd4\u56de\u9996\u9875","accounts.emailVerifiedSuccess":"\u60a8\u7684\u90ae\u4ef6\u5df2\u88ab\u9a8c\u8bc1","accounts.emailSent":"\u90ae\u4ef6\u5df2\u53d1\u9001","accounts.passwordResetSuccessfully":"\u60a8\u7684\u5bc6\u7801\u5df2\u88ab\u91cd\u7f6e\u6210\u529f","accounts.incorrectPassword":"\u5bc6\u7801\u9519\u8bef","accounts.unrecognizedOptionsForLogin":"\u65e0\u6cd5\u8bc6\u522b\u7684\u767b\u5f55\u8bf7\u6c42\u9009\u9879","accounts.matchFailed":"\u5339\u914d\u5931\u8d25","accounts.invalidUsername":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d","accounts.invalidEmail":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740","accounts.invalidMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a","accounts.invalidEmailMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u6216\u90ae\u7bb1","accounts.invalidPassword":"\u65e0\u6548\u7684\u5bc6\u7801","accounts.invalidNewPassword":"\u65e0\u6548\u7684\u65b0\u5bc6\u7801","accounts.invalidToken":"\u65e0\u6548\u7684token","accounts.invalidCode":"\u65e0\u6548\u7684\u9a8c\u8bc1\u7801","accounts.verifyEmailLinkExpired":"\u8be5\u90ae\u7bb1\u9a8c\u8bc1\u94fe\u63a5\u5df2\u5931\u6548","accounts.resetPasswordLinkExpired":"\u8be5\u91cd\u7f6e\u5bc6\u7801\u94fe\u63a5\u5df2\u5931\u6548","accounts.usernameAlreadyExists":"\u8be5\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.emailAlreadyExists":"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.mobileAlreadyExists":"\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.usernameOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.mobileOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.nameRequired":"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.emailRequired":"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a","accounts.mobileRequired":"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a","accounts.usernameRequired":"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.passwordRequired":"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.tenantNameRequired":"\u4f01\u4e1a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a","accounts.verify":"\u9a8c\u8bc1","accounts.verify_email":"\u9a8c\u8bc1\u90ae\u4ef6","accounts.verify_mobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verifyCode":"\u9a8c\u8bc1\u7801","accounts.next":"\u4e0b\u4e00\u6b65","accounts.sendCode":"\u83b7\u53d6\u9a8c\u8bc1\u7801","accounts.reSendCode":"\u91cd\u65b0\u83b7\u53d6","accounts.goBack":"\u8fd4\u56de","accounts.unenableRegister":"\u6b64\u516c\u53f8\u88ab\u8bbe\u7f6e\u4e3a\u7981\u6b62\u6ce8\u518c\u65b0\u8d26\u6237\uff0c\u8bf7\u8054\u7cfb\u516c\u53f8\u7ba1\u7406\u5458\u3002","accounts.userNotFound":"\u672a\u627e\u5230\u8d26\u6237\u4fe1\u606f","accounts.noPasswordSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u5bc6\u7801","accounts.noEmailSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u90ae\u7bb1","accounts.loginCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.signupCode.email":"\u90ae\u7bb1","accounts.signupCode.email_or_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.set_fullname":"\u8bf7\u586b\u5199\u59d3\u540d","accounts.spaceUnExists":"\u65e0\u6548\u7684\u4f01\u4e1a\u6807\u8bc6","accounts.signupCode.mobile":"\u624b\u673a\u53f7","accounts.emailHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>","accounts.mobileHelp":"\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.emailHelp_mobileHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>\uff1b\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.codeRequired":"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.codeExpired":"\u9a8c\u8bc1\u7801\u5df2\u5931\u6548","accounts.loginWithCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.loginWithPassword":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.goIn":"\u8fdb\u5165","accounts.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.verifyMobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verify.info":"\u8bf7\u8f93\u5165\u53d1\u9001\u81f3 {name} \u7684 6 \u4f4d\u6570\u5b57\u9a8c\u8bc1\u7801\uff0c\u6709\u6548\u671f10\u5206\u949f\u3002","accounts.disablePasswordLogin":"\u5df2\u7981\u6b62\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458","accounts.disableUnverifiedMobilePasswordLogin":"\u4f60\u7684\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.disableUnverifiedEmailPasswordLogin":"\u4f60\u7684\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.invalidRequest":"\u65e0\u6548\u7684\u8bf7\u6c42","accounts.serverError":"\u670d\u52a1\u5f02\u5e38","accounts.tooManyFailures":"\u9a8c\u8bc1\u6b21\u6570\u8fc7\u591a\uff0c\u8bf710\u5206\u949f\u540e\u518d\u8bd5!","accounts.invalidVerifyCode":"\u9a8c\u8bc1\u7801\u65e0\u6548","accounts.invalid_invite":"\u65e0\u6548\u9080\u8bf7\u94fe\u63a5\u3002\u8bf7\u8be2\u95ee\u60a8\u7684\u7ba1\u7406\u5458\u83b7\u5f97\u9080\u8bf7\u3002","accounts.copyright":"\xa9 2020 \u534e\u708e\u8f6f\u4ef6","accounts.privacy":"\u9690\u79c1","accounts.privacyURL":"https://www.steedos.com/cn/steedos/privacy/","accounts.logoURL":"/images/logo_platform.png"}')},707:function(e,t){},715:function(e,t,n){"use strict";n.r(t);n(370),n(374),n(375),n(376),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(174),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(422),n(424),n(425),n(426),n(427),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(438),n(439),n(440),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(485),n(486),n(487),n(488),n(500),n(501),n(502),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(306),n(517),n(518),n(519),n(521),n(522),n(523),n(524),n(261),n(525),n(526),n(527),n(528),n(529),n(530),n(532),n(533),n(534),n(535),n(536),n(538),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(592),n(594),n(596),n(597),n(600),n(601);var a=n(1),r=n.n(a),s=n(81),o=n.n(s),i=n(13),c=n(14),u=n(17),l=n(18),d=n(9),p=n(109),b=n(16),m=n(36),h=n(70),f=n(11);function g(e){return Object(d.a)({},e.settings)}function v(e){var t=Object.assign({},e.settings.tenant);return t.name||(t.name="Steedos"),t}function j(e){return e.requests}function x(e){if(e.settings&&e.settings.tenant)return e.settings.tenant._id}function O(e){return e.entities.users.users[y(e)]}function y(e){return e.entities.users.currentUserId}var E=n(5),w=n(3),S=n.n(w),_=n(49),C="undefined"!==typeof window?Object(_.b)():null,I="BATCHING_REDUCER.BATCH";function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return{type:t,meta:{batch:!0},payload:e}}function R(e){if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=n);return t}var N=R({CREATE_USER_REQUEST:null,CREATE_USER_SUCCESS:null,CREATE_USER_FAILURE:null,LOGIN_REQUEST:null,LOGIN_SUCCESS:null,LOGIN_FAILURE:null,LOGOUT_REQUEST:null,LOGOUT_SUCCESS:null,LOGOUT_FAILURE:null,REVOKE_ALL_USER_SESSIONS_SUCCESS:null,REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS:null,UPDATE_ME_REQUEST:null,UPDATE_ME_SUCCESS:null,UPDATE_ME_FAILURE:null,RECEIVED_ME:null,RECEIVED_PROFILE:null,RECEIVED_PROFILES:null,RECEIVED_PROFILES_LIST:null,RECEIVED_PROFILE_IN_TEAM:null,RECEIVED_PROFILE_NOT_IN_TEAM:null,RECEIVED_PROFILE_WITHOUT_TEAM:null,RECEIVED_SESSIONS:null,RECEIVED_REVOKED_SESSION:null,RESET_LOGOUT_STATE:null,RECEIVED_MY_USER_ACCESS_TOKEN:null,RECEIVED_MY_USER_ACCESS_TOKENS:null,CLEAR_MY_USER_ACCESS_TOKENS:null,REVOKED_USER_ACCESS_TOKEN:null,DISABLED_USER_ACCESS_TOKEN:null,ENABLED_USER_ACCESS_TOKEN:null,LOGIN:null,VERIFICATION_TOKEN_RECIEVED:null,CHANGEPASSWORD_REQUEST:null,CHANGEPASSWORD_FAILURE:null,CHANGEPASSWORD_RECEIVED:null,VERIFYEMAIL_REQUEST:null,VERIFYEMAIL_FAILURE:null,VERIFYEMAIL_RECEIVED:null,VERIFYMOBILE_REQUEST:null,VERIFYMOBILE_FAILURE:null,VERIFYMOBILE_RECEIVED:null,TO_MOBILE_CODE_LOGIN:null}),P=R({GET_SPACES_REQUEST:null,GET_SPACES_SUCCESS:null,GET_SPACES_FAILURE:null,MY_SPACES_REQUEST:null,MY_SPACES_SUCCESS:null,MY_SPACES_FAILURE:null,CREATE_SPACE_REQUEST:null,CREATE_SPACE_SUCCESS:null,CREATE_SPACE_FAILURE:null,JOIN_SPACE_REQUEST:null,JOIN_SPACE_SUCCESS:null,JOIN_SPACE_FAILURE:null,CREATED_SPACE:null,SELECT_SPACE:null,UPDATED_SPACE:null,RECEIVED_SPACE:null,RECEIVED_SPACES_LIST:null}),M=(R({DISMISS_ERROR:null,LOG_ERROR:null,CLEAR_ERRORS:null,RESTORE_ERRORS:null}),R({RECEIVED_SETTINGS:null,RECEIVED_APP_STATE:null,RECEIVED_APP_CREDENTIALS:null,REMOVED_APP_CREDENTIALS:null,RECEIVED_APP_DEVICE_TOKEN:null,PING_RESET:null,RECEIVED_SERVER_VERSION:null,CLIENT_CONFIG_RECEIVED:null,CLIENT_CONFIG_RESET:null,CLIENT_LICENSE_RECEIVED:null,CLIENT_LICENSE_RESET:null,RECEIVED_DATA_RETENTION_POLICY:null,LOG_CLIENT_ERROR_REQUEST:null,LOG_CLIENT_ERROR_SUCCESS:null,LOG_CLIENT_ERROR_FAILURE:null,SUPPORTED_TIMEZONES_REQUEST:null,SUPPORTED_TIMEZONES_SUCCESS:null,SUPPORTED_TIMEZONES_FAILURE:null,SUPPORTED_TIMEZONES_RECEIVED:null,WEBSOCKET_REQUEST:null,WEBSOCKET_SUCCESS:null,WEBSOCKET_FAILURE:null,WEBSOCKET_CLOSED:null,REDIRECT_LOCATION_SUCCESS:null,REDIRECT_LOCATION_FAILURE:null,SET_CONFIG_AND_LICENSE:null,WARN_METRICS_STATUS_RECEIVED:null,WARN_METRIC_STATUS_RECEIVED:null,WARN_METRIC_STATUS_REMOVED:null})),T=n(204),U=n(208),A=n(71),L=n(65),V={},B={},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{headers:{}};if(e=e||t.url,"GET"===t.method||!t.method){var n=B[e],a=V["".concat(e).concat(n)];return n&&(t.headers["If-None-Match"]=n),fetch(e,t).then((function(t){if(304===t.status)return a.clone();if(200===t.status){var n=t.headers.get("Etag");n&&(V["".concat(e).concat(n)]=t.clone(),B[e]=n)}return t}))}return Reflect.apply(fetch,void 0,[e,t])};function D(e){var t=Object.keys(e);if(0===t.length)return"";for(var n="?",a=0;a<t.length;a++){var r=t[a];n+=r+"="+encodeURIComponent(e[r]),a<t.length-1&&(n+="&")}return n}var W=n(353),G=Object(b.c)({currentUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.RECEIVED_ME:var n=t.data||t.payload;return n._id;case N.LOGIN:var a=t.data.user;return a?a._id:e;case N.LOGOUT_SUCCESS:return""}return e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.RECEIVED_ME:case N.RECEIVED_PROFILE:var n=t.data||t.payload,a=Object(d.a)({},n);return Object(d.a)(Object(d.a)({},e),{},Object(L.a)({},n._id,a));case N.LOGIN:var r=t.data.user;if(r){var s=Object(d.a)({},e);return s[r._id]=r,s}return e;case N.LOGOUT_SUCCESS:return{};case N.CHANGEPASSWORD_RECEIVED:var o=t.data||t.payload;return Object(d.a)(Object(d.a)({},e),{},Object(L.a)({},o.userId,Object.assign({},e[o.userId],{password_expired:o.password_expired})));case N.VERIFYEMAIL_RECEIVED:var i=t.data||t.payload;return Object(d.a)(Object(d.a)({},e),{},Object(L.a)({},i.userId,Object.assign({},e[i.userId],{email_verified:i.email_verified})));case N.VERIFYMOBILE_RECEIVED:var c=t.data||t.payload;return Object(d.a)(Object(d.a)({},e),{},Object(L.a)({},c.userId,Object.assign({},e[c.userId],{mobile_verified:c.mobile_verified})));default:return e}}}),z=Object(b.c)({currentSpaceId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.SELECT_SPACE:return t.data;case N.LOGOUT_SUCCESS:return"";default:return e}},spaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.RECEIVED_SPACES_LIST:return Object.assign({},e,ue(t.data));case N.LOGOUT_SUCCESS:return{};default:return e}}});var q=Object(b.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===M.RECEIVED_APP_STATE?t.data:e},credentials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M.RECEIVED_APP_CREDENTIALS:return Object.assign({},e,t.data);case N.LOGIN:return{url:t.data.url};case N.LOGOUT_SUCCESS:return{};default:return e}},deviceToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===M.RECEIVED_APP_DEVICE_TOKEN?t.data:e},serverVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M.RECEIVED_SERVER_VERSION:return t.data;case N.LOGOUT_SUCCESS:return"";default:return e}}}),H=Object(b.c)({general:q,users:G,spaces:z}),Y=n(202);var K=Object(b.c)({translations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{en:Y},t=arguments.length>1?arguments[1]:void 0;return"RECEIVED_TRANSLATIONS"===t.type?Object(d.a)(Object(d.a)({},e),{},Object(L.a)({},t.data.locale,t.data.translations)):e}}),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===M.RECEIVED_SETTINGS?Object.assign({},e,t.data):e},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"change"===t.type?Object.assign({},e,{status:t.data}):e},J=Object(b.c)({entities:H,i18n:K,settings:Q,requests:X}),$={entities:{general:{},users:{currentUserId:"",users:{}},spaces:{currentSpaceId:"",spaces:{}}},i18n:{translations:{en:n(202),"zh-CN":n(352)}},settings:{services:{}},requests:{status:"not_started"}},Z=Object(b.d)(J,$,Object(b.a)(W.a));var ee=Z,te={en:{value:"en",name:"English",order:1,translations:n(202)},"zh-CN":{value:"zh-CN",name:"\u4e2d\u6587 (\u7b80\u4f53)",order:13,translations:n(352)}};function ne(){return te}function ae(e){return ne()[e]}function re(e){return g(e).DefaultClientLocale,oe()}function se(e,t){return ae(t)?e.i18n.translations[t]:e.i18n.translations.en}var oe=function(){var e=window.navigator;return(e.userLanguage||e.language||"en").indexOf("zh")>=0?"zh-CN":"en"},ie=function(){var e=window.navigator;return(e.userLanguage||e.language||"en").indexOf("zh")>=0?"zh-cn":"en-us"};function ce(e,t){var n=ee.getState(),a=se(n,re(n));return a&&e in a?a[e]:t||e}function ue(e){for(var t={},n=0;n<e.length;n++)t[e[n]._id]=e[n];return t}var le=n(165),de=n.n(le),pe=(n(708),"X-Cluster-Id"),be="X-Version-Id",me=function(){function e(){var t=this;Object(i.a)(this,e),this.LOGIN_TOKEN_KEY="Meteor.loginToken",this.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires",this.USER_ID_KEY="Meteor.userId",this.logToConsole=!1,this._lastLoginTokenWhenPolled=null,this.loginExpirationInDays=null,this.serverVersion="",this.clusterId="",this.token="",this.csrf="",this.url="",this.urlVersion="",this.userAgent=null,this.enableLogging=!1,this.defaultHeaders={"Content-Type":"application/json"},this.userId="",this.diagnosticId="",this.includeCookies=!0,this.isRudderKeySet=!1,this.translations={connectionError:"There appears to be a problem with your internet connection.",unknownError:"We received an unexpected status code from the server."},this.userRoles=void 0,this.getTranslations=function(e){return t.doFetch(e,{method:"get"})},this.logClientError=function(e){},this.login=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t.trackEvent("api","api_users_login");var s={device_id:r,user:e,password:n?de()(n).toString():n,token:a,locale:ie()};return t.doFetch("".concat(t.getAccountsRoute(),"/password/login"),{method:"POST",body:JSON.stringify(s)})},this.createUser=function(e,n,a,r){t.trackEvent("api","api_users_createUser");var s={};return n&&(s.t=n),a&&(s.iid=a),r&&(s.r=r),e.password&&(e.password=e.password?de()(e.password).toString():e.password),t.doFetch("".concat(t.getAccountsRoute(),"/password/register").concat(D(s)),{method:"POST",body:JSON.stringify(e)})},this.createSpace=function(e){t.trackEvent("api","api_users_createTenant");return t.doFetch("".concat(t.getBaseRoute(),"/api/v4/spaces/register/tenant").concat(D({})),{method:"POST",body:JSON.stringify({name:e})})},this.sendVerificationToken=function(e){t.trackEvent("api","api_users_verify");var n={user:e};return t.doFetch("".concat(t.getAccountsRoute(),"/password/sendVerificationCode"),{method:"POST",body:JSON.stringify(n)})},this.getSettings=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/settings"),{method:"get"})},this.getMe=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user"),{method:"get"})},this.getMySpaces=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user/spaces"),{method:"get"})},this.logout=Object(E.a)(S.a.mark((function e(){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.trackEvent("api","api_users_logout"),e.next=3,t.doFetchWithResponse("".concat(t.getAccountsRoute(),"/logout"),{method:"post"});case 3:return n=e.sent,(a=n.response).ok&&(t.token=""),t.serverVersion="",e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),this.doFetch=function(){var e=Object(E.a)(S.a.mark((function e(n,a){var r,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doFetchWithResponse(n,a);case 2:return r=e.sent,s=r.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.doFetchWithResponse=function(){var e=Object(E.a)(S.a.mark((function e(n,a){var r,s,o,i,c,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(n,t.getOptions(a));case 2:return r=e.sent,s=he(r.headers),e.prev=4,e.next=7,r.json();case 7:o=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new fe(t.getUrl(),{message:"Received invalid response from the server.",intl:{id:"mobile.request.invalid_response",defaultMessage:"Received invalid response from the server."},url:n});case 13:if(s.has(be)&&!s.get("Cache-Control")&&(i=s.get(be))&&t.serverVersion!==i&&(t.serverVersion=i),s.has(pe)&&(c=s.get(pe))&&t.clusterId!==c&&(t.clusterId=c),!r.ok){e.next=17;break}return e.abrupt("return",{response:r,headers:s,data:o});case 17:throw u=o.message||"",t.logToConsole&&console.error(u),new fe(t.getUrl(),{message:u,server_error_id:o.id,status_code:o.status_code,url:n});case 20:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),this.changePassword=function(e,n){return t.doFetch("".concat(t.getAccountsRoute(),"/password/changePassword"),{method:"POST",body:JSON.stringify({oldPassword:e?de()(e).toString():e,newPassword:n?de()(n).toString():n})})},this.verifyEmail=function(e,n){return t.doFetch("".concat(t.getAccountsRoute(),"/password/verify/email"),{method:"POST",body:JSON.stringify({email:e,code:n})})},this.verifyMobile=function(e,n){return t.doFetch("".concat(t.getAccountsRoute(),"/password/verify/mobile"),{method:"POST",body:JSON.stringify({mobile:e,code:n})})}}return Object(c.a)(e,[{key:"getUrl",value:function(){var e=new URL(window.location.href).pathname.split("/accounts");if(!this.url){var t="";return e.length>1&&(t=e[0]),t}return this.url}},{key:"getAbsoluteUrl",value:function(e){return"string"===typeof e&&e.startsWith("/")?this.getUrl()+e:e}},{key:"setUrl",value:function(e){this.url=e}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"getToken",value:function(){return this.token}},{key:"setToken",value:function(e){this.token=e}},{key:"setCSRF",value:function(e){this.csrf=e}},{key:"setAcceptLanguage",value:function(e){this.defaultHeaders["Accept-Language"]=e}},{key:"setEnableLogging",value:function(e){this.enableLogging=e}},{key:"setIncludeCookies",value:function(e){this.includeCookies=e}},{key:"setUserId",value:function(e){this.userId=e}},{key:"setUserRoles",value:function(e){this.userRoles=e}},{key:"setDiagnosticId",value:function(e){this.diagnosticId=e}},{key:"enableRudderEvents",value:function(){this.isRudderKeySet=!0}},{key:"getServerVersion",value:function(){return this.serverVersion}},{key:"getUrlVersion",value:function(){return this.urlVersion}},{key:"getBaseRoute",value:function(){return"".concat(this.getUrl()).concat(this.urlVersion)}},{key:"getAccountsRoute",value:function(){return"".concat(this.getBaseRoute(),"/accounts")}},{key:"getCSRFFromCookie",value:function(){if("undefined"!==typeof document&&"undefined"!==typeof document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t].trim();if(n.startsWith("MMCSRF="))return n.replace("MMCSRF=","")}return""}},{key:"getOptions",value:function(e){var t=Object(d.a)({},e),n=Object(d.a)(Object(L.a)({},"X-Requested-With","XMLHttpRequest"),this.defaultHeaders);this.token&&(n.Authorization="".concat("BEARER"," ").concat(this.token));var a=this.csrf||this.getCSRFFromCookie();return e.method&&"get"!==e.method.toLowerCase()&&a&&(n["X-CSRF-Token"]=a),this.includeCookies&&(t.credentials="include"),this.userAgent&&(n["User-Agent"]=this.userAgent),t.headers&&Object.assign(n,t.headers),Object(d.a)(Object(d.a)({},t),{},{headers:n})}},{key:"trackEvent",value:function(e,t,n){if(this.isRudderKeySet)Object.assign({category:e,type:t,user_actual_id:this.userId},n)}}]),e}();function he(e){var t=new Map,n=new Map;return e.forEach((function(e,a){var r=a.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()})),s=e;if(e&&e.match(/\n\S+:\s\S+/)){var o=e.split("\n");s=o.shift();var i=new Map(o.map((function(e){return e.split(/:\s/)})));n=new Map([].concat(Object(A.a)(n),Object(A.a)(i)))}t.set(r,s)})),new Map([].concat(Object(A.a)(t),Object(A.a)(n)))}var fe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(i.a)(this,n),r=t.call(this,a.message+": "+function(e,t){var n=t,a=(n=n.substring(e.length)).indexOf("?");-1!==a&&(n=n.substring(0,a));var r=["api","v4","users","teams","scheme","name","members","channels","posts","reactions","commands","files","preferences","hooks","incoming","outgoing","oauth","apps","emoji","brand","image","data_retention","jobs","plugins","roles","system","timezones","schemes","redirect_location","patch","mfa","password","reset","send","active","verify","terms_of_service","login","logout","ids","usernames","me","username","email","default","sessions","revoke","all","audits","device","status","search","switch","authorized","authorize","deauthorize","tokens","disable","enable","exists","unread","invite","batch","stats","import","schemeRoles","direct","group","convert","view","search_autocomplete","thread","info","flagged","pinned","pin","unpin","opengraph","actions","thumbnail","preview","link","delete","logs","ping","config","client","license","websocket","webrtc","token","regen_token","autocomplete","execute","regen_secret","policy","type","cancel","reload","environment","s3_test","file","caches","invalidate","database","recycle","compliance","reports","cluster","ldap","test","sync","saml","certificate","public","private","idp","elasticsearch","purge_indexes","analytics","old","webapp","fake"];return n=n.split("/").map((function(e){return""!==e&&-1===r.indexOf(e)?"<filtered>":e})).join("/"),-1!==a&&(n+="?<filtered>"),n}(e,a.url||"")),r.url=void 0,r.intl=void 0,r.server_error_id=void 0,r.status_code=void 0,r.message=a.message,r.url=a.url,r.intl=a.intl,r.server_error_id=a.server_error_id,r.status_code=a.status_code,Object.defineProperty(Object(T.a)(r),"message",{enumerable:!0}),r}return Object(c.a)(n)}(Object(U.a)(Error)),ge=new me;function ve(e){return function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}"undefined"!==typeof window&&(window.Client4=ge);function je(e,t,n){var a=n().entities.users.currentUserId;"status_code"in e&&401===e.status_code&&e.url&&-1===e.url.indexOf("/login")&&a&&(ge.setToken(""),t({type:N.LOGOUT_SUCCESS,data:{}}))}function xe(e,t,n){-1===e.indexOf("SUCCESS")?n(function(e,t){return{type:e,data:t}}(e,t)):n(Oe(e))}function Oe(e){return{type:e,data:null}}function ye(e){var t=e.clientFunc,n=e.onRequest,a=e.onSuccess,r=e.onFailure,s=e.params,o=void 0===s?[]:s;return function(){var e=Object(E.a)(S.a.mark((function e(s,i){var c,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&s(Oe(n)),c=null,e.prev=2,e.next=5,t.apply(void 0,Object(A.a)(o));case 5:c=e.sent,e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(2),je(e.t0,s,i),u=[ve(e.t0)],r&&u.push((l=r,d=e.t0,{type:l,error:d})),s(k(u)),e.abrupt("return",{error:e.t0});case 15:return Array.isArray(a)?a.forEach((function(e){xe(e,c,s)})):a&&xe(a,c,s),e.abrupt("return",{data:c});case 17:case"end":return e.stop()}var l,d}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}()}Error;var Ee=function(e){return["user_prev_space",e].join(":")},we=function(e,t){return""===e||"/"===e?t:[e,t].join(":")},Se=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getItem",value:function(e){arguments.length>1&&void 0!==arguments[1]||ee.getState();var t="steedos";return localStorage.getItem(we(t,e))}},{key:"setItem",value:function(e,t){ee.getState();localStorage.setItem(we("steedos",e),t)}},{key:"removeItem",value:function(e){ee.getState();localStorage.removeItem(we("steedos",e))}},{key:"getPreviousSpaceId",value:function(e){return e||(e=this.getItem("userId")),this.getItem(Ee(e))}},{key:"setPreviousSpaceId",value:function(e,t){this.setItem(Ee(e),t),this.setItem("spaceId",t),localStorage.setItem("spaceId",t)}},{key:"getUserId",value:function(){return this.getItem("userId")}},{key:"setUserId",value:function(e,t){e?(this.setItem("userId",e),this.setItem("token",t),this.setItem("was_logged_in","true")):(this.removeItem("userId"),this.removeItem("token"),this.removeItem("spaceId"),localStorage.removeItem("spaceId"),this.setItem("was_logged_in","false"))}},{key:"setWasLoggedIn",value:function(e){e?this.setItem("was_logged_in","true"):this.setItem("was_logged_in","false")}},{key:"getWasLoggedIn",value:function(){return"true"===this.getItem("was_logged_in")}}]),e}(),_e=new Se;"undefined"!==typeof window&&(window.LocalStorageStore=_e);var Ce=_e;function Ie(e){return e.entities.spaces.spaces}function ke(e){return Object.values(e.entities.spaces.spaces)}function Re(e){return Object.keys(e.entities.spaces.spaces).length}function Ne(e){return e.entities.spaces.spaces[Pe(e)]}function Pe(e){return e.entities.spaces.currentSpaceId}function Me(e,t){return e.entities.spaces.spaces[t]}function Te(e){return function(){var t=Object(E.a)(S.a.mark((function t(n,a){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=y(a())){t.next=3;break}return t.abrupt("return",{data:!1});case 3:if(s=e){t.next=8;break}s=Ce.getPreviousSpaceId(r),t.next=11;break;case 8:if(Me(a(),s)){t.next=11;break}return t.abrupt("return",{data:!1});case 11:return n({type:P.SELECT_SPACE,data:s}),Ce.setPreviousSpaceId(r,s),t.abrupt("return",{data:s});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Ue(){return ye({clientFunc:ge.getMySpaces,onRequest:P.MY_SPACES_REQUEST,onSuccess:[P.RECEIVED_SPACES_LIST,P.MY_SPACES_SUCCESS],onFailure:P.MY_SPACES_FAILURE})}function Ae(e){return function(){var t=Object(E.a)(S.a.mark((function t(n,a){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,ge.createSpace(e);case 4:r=t.sent,t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(1),je(t.t0,n,a),n(ve(t.t0)),t.abrupt("return",{error:t.t0});case 12:if(!r||!r._id){t.next=22;break}return s=[n(Ue()),n(Te(r._id))],t.prev=14,t.next=17,Promise.all(s);case 17:t.next=22;break;case 19:return t.prev=19,t.t1=t.catch(14),t.abrupt("return",{error:t.t1});case 22:return t.abrupt("return",{data:r});case 23:case"end":return t.stop()}}),t,null,[[1,7],[14,19]])})));return function(e,n){return t.apply(this,arguments)}}()}function Le(e,t){return function(){var t=Object(E.a)(S.a.mark((function t(n,a){var r,s,o,i,c,u,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Ce.getItem("userId"),s=Ce.getItem("token"),o=Ce.getItem("spaceId"),n=ee.getState(),console.log(n),i=n.settings.root_url,c=new URLSearchParams(e.search),(u=c.get("redirect_uri"))?(u.startsWith("http://")||u.startsWith("https://")||(u=window.location.origin+u),(l=new URL(u)).searchParams.append("X-Space-Id",o),l.searchParams.append("X-Auth-Token",s),l.searchParams.append("X-User-Id",r),window.location.href=l.toString()):window.location.href=i||"/",t.abrupt("return",{data:!0});case 8:case"end":return t.stop()}var n}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Ve(e,t,n,a){return function(){var r=Object(E.a)(S.a.mark((function r(s,o){var i;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ge.createUser(e,t,n,a);case 3:i=r.sent,r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(0),je(r.t0,s,o),s(ve(r.t0)),r.abrupt("return",{error:r.t0});case 11:return s({type:N.RECEIVED_ME,data:i.user}),r.abrupt("return",Fe(i)(s,o));case 13:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e,t){return r.apply(this,arguments)}}()}function Be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var a=Object(E.a)(S.a.mark((function a(r,s){var o,i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:N.LOGIN_REQUEST,data:null}),o=s().entities.general.deviceToken,a.prev=2,a.next=5,ge.login(e,t,n,o);case 5:if(!(i=a.sent)._next){a.next=8;break}return a.abrupt("return",Object(d.a)({error:i._next},i));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),r(k([{type:N.LOGIN_FAILURE,error:a.t0},ve(a.t0)])),a.abrupt("return",{error:a.t0});case 14:return a.abrupt("return",Fe(i)(r,s));case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e,t){return a.apply(this,arguments)}}()}function Fe(e){return function(){var t=Object(E.a)(S.a.mark((function t(n,a){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:N.RECEIVED_ME,data:e.user}),ge.setToken(e.token),ge.setUserId(e.user._id),e.user&&e.user._id&&Ce.setUserId(e.user._id,e.token),r=[n(Ue()),n(Te())],t.prev=5,t.next=8,Promise.all(r);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),n(k([{type:N.LOGIN_FAILURE,error:t.t0},ve(t.t0)])),t.abrupt("return",{error:t.t0});case 14:return n(k([{type:N.LOGIN_SUCCESS}])),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(JSON.stringify({"X-Auth-Token":e.token,"X-User-Id":e.user._id,"X-Access-Token":e.tokens.accessToken})),t.abrupt("return",Object(d.a)({data:!0,_next:e._next},e));case 17:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n){return t.apply(this,arguments)}}()}function De(){return function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N.LOGOUT_REQUEST,data:null}),e.prev=1,e.next=4,ge.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return Ce.setUserId(null),t({type:N.LOGOUT_SUCCESS,data:null}),e.abrupt("return",{data:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}function We(e){return function(){var t=Object(E.a)(S.a.mark((function t(n,a){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a().entities.general.deviceToken,t.prev=1,t.next=4,ge.sendVerificationToken(e);case 4:r=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),n(k([{type:N.VERIFICATION_TOKEN_RECIEVED,error:t.t0}])),t.abrupt("return",{error:t.t0});case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()}function Ge(e,t){return function(){var n=Object(E.a)(S.a.mark((function n(a,r){var s,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:N.CHANGEPASSWORD_REQUEST,data:null}),n.prev=1,o=ye({clientFunc:ge.changePassword,onSuccess:N.CHANGEPASSWORD_RECEIVED,params:[e,t]}),n.next=5,o(a,r);case 5:s=n.sent,n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),a(k([{type:N.CHANGEPASSWORD_FAILURE,error:n.t0},ve(n.t0)])),n.abrupt("return",{error:n.t0});case 12:return n.abrupt("return",s);case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()}function ze(e,t){return function(){var n=Object(E.a)(S.a.mark((function n(a,r){var s,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:N.VERIFYEMAIL_REQUEST,data:null}),n.prev=1,o=ye({clientFunc:ge.verifyEmail,onSuccess:N.VERIFYEMAIL_RECEIVED,params:[e,t]}),n.next=5,o(a,r);case 5:s=n.sent,n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),a(k([{type:N.VERIFYEMAIL_FAILURE,error:n.t0},ve(n.t0)])),n.abrupt("return",{error:n.t0});case 12:return n.abrupt("return",s);case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()}function qe(e,t){return function(){var n=Object(E.a)(S.a.mark((function n(a,r){var s,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:N.VERIFYMOBILE_REQUEST,data:null}),n.prev=1,o=ye({clientFunc:ge.verifyMobile,onSuccess:N.VERIFYMOBILE_RECEIVED,params:[e,t]}),n.next=5,o(a,r);case 5:s=n.sent,n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),a(k([{type:N.VERIFYMOBILE_FAILURE,error:n.t0},ve(n.t0)])),n.abrupt("return",{error:n.t0});case 12:return n.abrupt("return",s);case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()}var He=ee.dispatch,Ye=ee.getState;function Ke(e){e||(e="/login"),He(De()).then((function(){Ce.setUserId(null),nt(e)})).catch((function(t){console.log(t),nt(e)}))}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(E.a)(S.a.mark((function e(t){var n,a,r,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ye(),a=O(n)){e.next=4;break}return e.abrupt("return");case 4:if(r=Ce.getPreviousSpaceId(a.id),!(s=Me(n,r))){e.next=11;break}return He(Te(s._id)),e.abrupt("return",s._id);case 11:C.push({pathname:"/select-space",search:t.search});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t);case 2:n=e.sent,C.push({pathname:"/home/".concat(n),search:t.search});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.push({pathname:"/update-password",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){return(Ze=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.push({pathname:"/verify/email",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.push({pathname:"/verify/mobile",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t){if(e&&e&&e.indexOf("no_redirect=1")<0){var n=Ce.getItem("userId"),a=Ce.getItem("token"),r=Ce.getItem("spaceId");e=e.indexOf("?")>0?e+"&no_redirect=1":e+"?no_redirect=1",n&&a&&(e="".concat(e,"&X-Auth-Token=").concat(a,"&X-User-Id=").concat(n,"&X-Space-Id=").concat(r)),e.match(/^\/([^/]|$)/)?t?C.push({pathname:e,search:t.search}):C.push(e):document.location.href=e}}function at(e,t,n){e.password_expired?function(e){$e.apply(this,arguments)}(n):!t.enable_bind_mobile||e.mobile_verified?!t.enable_bind_email||e.email_verified?n?C.push({pathname:"/home",search:n.search}):C.push("/home"):function(e){Ze.apply(this,arguments)}(n):et(n)}function rt(){return function(){var e=Object(E.a)(S.a.mark((function e(t,n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge.getSettings();case 3:a=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),je(e.t0,t,n),e.abrupt("return",{error:e.t0});case 10:return ge.setEnableLogging("true"===a.EnableDeveloper),ge.setDiagnosticId(a.DiagnosticId),t({type:M.RECEIVED_SETTINGS,data:a}),e.abrupt("return",{data:a});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}function st(){return function(){var e=Object(E.a)(S.a.mark((function e(t){var n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ce.getItem("token"))&&ge.setToken(n),a=[t(rt())],e.next=5,Promise.all(a);case 5:if(r=e.sent,!Ce.getWasLoggedIn()){e.next=12;break}return e.t0=r,e.next=10,t(function(){var e=Object(E.a)(S.a.mark((function e(t,n){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),a=[t(function(){var e=Object(E.a)(S.a.mark((function e(t,n){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce.getItem("userId")){e.next=2;break}return e.abrupt("return",{error:"user not found."});case 2:return a=ye({clientFunc:ge.getMe,onSuccess:N.RECEIVED_ME}),e.next=5,a(t,n);case 5:if(!("error"in(r=e.sent))){e.next=9;break}return Ce.removeItem("userId"),e.abrupt("return",r);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t(Ue()),t(Te())],e.next=4,Promise.all(a);case 4:return r=n().entities.users.currentUserId,n().entities.users.users[r],r&&ge.setUserId(r),e.abrupt("return",{data:!0});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ot(e,t){return function(){var n=Object(E.a)(S.a.mark((function n(a){var r,s,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[a(Object(E.a)(S.a.mark((function n(){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ge.doFetch("".concat(ge.getBaseRoute(),"/initServer"),{method:"POST",body:JSON.stringify({spaceId:e,apiKey:t})});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))))],n.next=3,Promise.all(r);case 3:if(s=n.sent,!(o=s[0])||1==o.success){n.next=7;break}return n.abrupt("return",{error:o.error});case 7:return n.t0=s,n.next=10,a(rt());case 10:return n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.abrupt("return",s);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var it=n(39),ct=n(737),ut=n(734),lt=n(733),dt=n(740),pt=n(0),bt=Object(lt.a)((function(e){return Object(dt.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.0)"}})}));var mt=Object(f.b)((function(e){return{requests:j(e)}}))((function(e){var t=e.requests,n=bt({}),s=r.a.useState(!1),o=Object(it.a)(s,2),i=o[0],c=o[1];return Object(a.useEffect)((function(){"started"===t.status?c(!0):c(!1)}),[t]),Object(pt.jsx)("div",{children:Object(pt.jsx)(ct.a,{className:n.backdrop,open:i,children:Object(pt.jsx)(ut.a,{})})})})),ht=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){return Object(i.a)(this,n),t.call(this,e,a)}return Object(c.a)(n,[{key:"isValidState",value:function(){return!(this.props.settings&&this.props.settings.serverInitInfo&&this.props.settings.serverInitInfo.allow_init)}},{key:"componentDidMount",value:function(){window.postMessage({type:"webapp-ready"},window.location.origin),this.props.settings&&this.props.settings.serverInitInfo&&this.props.settings.serverInitInfo.allow_init&&Ke("/init"+this.props.location.search,!0,!1)}},{key:"render",value:function(){return this.isValidState()?this.props.children:Object(pt.jsx)(mt,{})}}]),n}(r.a.PureComponent);var ft=Object(f.b)((function(e){return{settings:g(e)}}))(ht),gt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){return Object(i.a)(this,n),t.call(this,e,a)}return Object(c.a)(n,[{key:"isValidState",value:function(){return null!=this.props.currentUser}},{key:"componentDidMount",value:function(){window.postMessage({type:"webapp-ready"},window.location.origin),this.props.currentUser||Ke("/login?redirect_to="+encodeURIComponent(this.props.location.pathname),!0,!1)}},{key:"render",value:function(){return this.isValidState()?this.props.children:Object(pt.jsx)(mt,{})}}]),n}(r.a.PureComponent);var vt=Object(f.b)((function(e){return{currentUser:O(e),tenant:v(e)}}))(gt),jt=n(736),xt=n(742),Ot=n(209),yt=n(735),Et=n(57),wt=n(357),St=n.n(wt),_t=n(359),Ct=n.n(_t),It=n(360),kt=n.n(It),Rt=n(358),Nt=n.n(Rt),Pt=n(127),Mt=["className","message","onClose","variant"],Tt={success:St.a,warning:Nt.a,error:Ct.a,info:kt.a},Ut=Object(lt.a)((function(e){var t="light"===e.palette.type?Pt.a:Pt.d,n="light"===e.palette.type?Pt.d:Pt.a;return{success:{backgroundColor:Ot.a[600]},error:{color:t(e.palette.error.main,.6),backgroundColor:n(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},info:{color:t(e.palette.primary.main,.6),backgroundColor:n(e.palette.primary.main,.9),"& $icon":{color:e.palette.primary.main}},warning:{color:t(yt.a[700],.6),backgroundColor:n(yt.a[700],.9),"& $icon":{color:yt.a[700]}},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function At(e){var t=Ut({}),n=e.className,a=e.message,r=(e.onClose,e.variant),s=Object(p.a)(e,Mt),o=Tt[r];return Object(pt.jsx)(xt.a,Object(d.a)({elevation:0,className:Object(Et.a)(t[r],n),"aria-describedby":"client-snackbar",message:Object(pt.jsxs)("span",{id:"client-snackbar",className:t.message,children:[Object(pt.jsx)(o,{className:Object(Et.a)(t.icon,t.iconVariant)}),Object(pt.jsx)(jt.a,{id:a,defaultMessage:a,values:{mobile_help:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(pt.jsx)("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE",children:t})},email_help:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(pt.jsx)("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE",children:t})}}})]})},s))}var Lt=Object(lt.a)((function(e){return{margin:{marginBottom:e.spacing(1)}}})),Vt=(Object(lt.a)({formError:{color:"red"}}),function(e){var t=e.error,n=e.variant,a=Lt({}),r=n||"error";return Object(pt.jsx)(At,{variant:r,className:a.margin,message:t})}),Bt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).openPrivacyPage=Object(E.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce("accounts.privacyURL"),window&&window.AppBrowserOpen?window.AppBrowserOpen(t,"_blank"):window.open(t);case 2:case"end":return e.stop()}}),e)}))),e}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto md:p-10 h-full",children:[Object(pt.jsx)("div",{className:"relative rounded p-11 sm:shadow-md bg-white w-screen max-w-md",children:this.props.children}),Object(pt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 text-center m-2 text-gray-500 text-sm",children:[Object(pt.jsx)(jt.a,{id:"accounts.copyright",defaultMessage:"\xa9 2020 salesforce.com, inc."}),Object(pt.jsx)("span",{className:"ml-1 mr-1",children:" | "}),Object(pt.jsx)("a",{className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",href:"javascript:void(0)",onClick:this.openPrivacyPage,children:Object(pt.jsx)(jt.a,{id:"accounts.privacy",defaultMessage:"Privacy"})})]})]})}}]),n}(a.Component);var Ft=Object(f.b)((function(e){return{tenant:v(e)}}))(Bt);var Dt=Object(f.b)((function(e){return{tenant:v(e)}}))((function(e){var t=e.tenant,n=(e.location,"".concat(ge.getUrl()).concat(ce("accounts.logoURL")));return t.logo_url&&(n=t.logo_url),Object(pt.jsx)("div",{children:Object(pt.jsx)("img",{src:n,className:"h-10"})})}));var Wt=Object(f.b)((function(e){return{tenant:v(e)}}))((function(e){var t=e.tenant,n=(e.location,"".concat(ge.getUrl(),"/images/background.svg"));t.background_url&&(n=t.background_url);var a="#f8f8f8";t.background_color&&(a=t.background_color);var r=window.innerWidth>640?{backgroundImage:"url("+n+")",backgroundColor:a}:{};return Object(pt.jsx)("div",{className:"",children:Object(pt.jsx)("div",{className:"fixed bg-white justify-center mx-auto h-full w-full",style:r})})})),Gt=function(){try{return new MutationObserver((function(e){e.forEach((function(e){"attributes"===e.type&&"type"===e.attributeName&&e.target.remove()}))}))}catch(e){return void console.warn("MutationObserver Not Found:",e)}}(),zt=r.a.forwardRef((function(e,t){var n=Object(a.useRef)(),r=t||n,s=function(){return setTimeout((function(){var e=r.current;e&&"password"===e.getAttribute("type")&&e.hasAttribute("value")&&e.removeAttribute("value")}),50)};return Object(a.useEffect)((function(){var e=s();return function(){clearTimeout(e)}}),[e.value,e.type]),s(),Object(a.useEffect)((function(){var e=r.current;return e&&(null===Gt||void 0===Gt||Gt.observe(e,{attributes:!0})),function(){null===Gt||void 0===Gt||Gt.disconnect()}}),[]),Object(pt.jsx)("input",Object(d.a)(Object(d.a)({},e),{},{ref:r,onFocus:function(t){var n=e.onFocus;s(),n&&n(t)},onBlur:function(t){var n=e.onBlur;s(),n&&n(t)},onKeyDown:function(e){return!((e.ctrlKey||e.metaKey)&&[67,88,86,65].indexOf(e.keyCode)>-1)||(e.preventDefault(),!1)},onContextMenu:function(e){return e.preventDefault(),!1}}))}));zt.displayName="InputPassword";var qt=zt,Ht=["placeholder"],Yt=r.a.forwardRef((function(e,t){var n=e.placeholder,a=Object(p.a)(e,Ht);return Object(pt.jsx)(jt.a,{id:n.id,defaultMessage:n.defaultMessage,values:n.values,children:function(e){return"password"===a.type?Object(pt.jsx)(qt,Object(d.a)(Object(d.a)({},a),{},{ref:t,placeholder:e})):"textarea"===a.type?Object(pt.jsx)("textarea",Object(d.a)(Object(d.a)({},a),{},{placeholder:e})):Object(pt.jsx)("input",Object(d.a)(Object(d.a)({},a),{},{ref:t,placeholder:e}))}})}));Yt.displayName="LocalizedInput";var Kt=Yt,Qt=function(e,t){var n=Object(a.useMemo)((function(){var n,a,r=t.total||60,s=t.lifecycle||"session",o="__".concat(e),i=function(){return""+(Date.now()+1e3*r)};switch(s){case"always":a=function(){return localStorage.setItem(o,i())},n=function(){return localStorage.getItem(o)};break;case"session":a=function(){return sessionStorage.setItem(o,i())},n=function(){return sessionStorage.getItem(o)}}return[a,n]}),[t,e]),r=Object(it.a)(n,2),s=r[0],o=r[1],i=Object(a.useCallback)((function(){s()}),[s]),c=Object(a.useCallback)((function(){var e=o();if(e){if(e=+e,isNaN(e))return 0;var t=Math.floor((e-Date.now())/1e3);return t<0?0:t}return 0}),[o]),u=Object(a.useState)(c()),l=Object(it.a)(u,2),d=l[0],p=l[1];return Object(a.useEffect)((function(){var e=setInterval((function(){var e=c();d!==e&&p(e)}),500);return function(){clearInterval(e)}}),[c,d]),[d,i]},Xt=n(164);function Jt(e,t,n){var a=e.policy,r=e.policyError,s=e.policyerror,o=e.policyFunction,i=e.policies;if(!t||0===Object(Xt.trim)(t).length)throw new Error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a");if(n&&Object(Xt.includes)(t,n))throw new Error("\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u7528\u6237\u540d");if(a&&!new RegExp(a).test(t||""))throw new Error(r||s||"\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u5219");if(i)for(var c=0;c<i.length;c++){var u=i[c];if(!new RegExp(u.policy).test(t||""))throw new Error(u.policyError||u.policyerror||"\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u5219")}if(o)try{window.eval("var fun = ".concat(o)),fun(t)}catch(l){throw new Error(l.message)}}var $t=function(e){var t=e.onClick,n=e.id,a=e.loginId,r=Qt(a||"cnt1",{total:60,lifecycle:"session"}),s=Object(it.a)(r,2),o=s[0],i=s[1],c="text-blue-600 hover:text-blue-600";return o>0&&(c="text-gray-300 hover:text-gray-300"),Object(pt.jsx)("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+c,id:n,disabled:o>0,type:"button",onClick:function(e){i(),t&&t()},children:Object(pt.jsxs)("span",{className:"",children:[Object(pt.jsx)(jt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),o>0?" (".concat(o,")"):null]})})},Zt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var s;Object(i.a)(this,n),(s=t.call(this,e,a)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ce(e)},s.handleEmailChange=function(e){s.setState({email:e.target.value})},s.handleNameChange=function(e){s.setState({name:e.target.value})},s.switchLoginByMobile=function(e){s.setState({loginBy:"mobile"})},s.switchLoginByEmail=function(e){s.setState({loginBy:"email"})},s.tabColor=function(e){return s.state.loginBy===e?"text-blue-600 hover:text-blue-700 border-blue-600 hover:border-blue-300":"text-gray-600 hover:text-gray-500 hover:border-gray-300"},s.handleMobileChange=function(e){s.setState({mobile:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.goLogin=function(){var e={email:s.state.email,mobile:s.state.mobile};s.props.history.push({pathname:"/login",search:s.props.location.search,state:e})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile.trim()){var t={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(s.state.name&&s.state.name.trim()){e.next=12;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.nameRequired"})}),e.abrupt("return");case 12:if(!(n={password:s.state.password?s.state.password.trim():s.state.password,name:s.state.name.trim(),locale:ie(),verifyCode:s.state.verifyCode?s.state.verifyCode.trim():s.state.verifyCode}).password){e.next=22;break}e.prev=14,Jt(s.props.settings.password,n.password,n.name),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(14),s.setState({serverError:Object(pt.jsx)(jt.a,{id:e.t0.message})}),e.abrupt("return");case 22:s.state.spaceId&&(n.spaceId=s.state.spaceId),s.state.invite_token&&(n.invite_token=s.state.invite_token),"mobile"===s.state.loginBy?n.mobile=s.state.mobile:"email"===s.state.loginBy&&(n.email=s.state.email),s.props.actions.createUser(n).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.error,a=t._next,!n){e.next=4;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 4:s.finishSignin(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 26:case"end":return e.stop()}}),e,null,[[14,18]])})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){if("TO_VERIFY_MOBILE"===e)return et(s.props.location);var t=new URLSearchParams(s.props.location.search).get("redirect_to");t&&t.match(/^\/([^/]|$)/)?s.props.history.push(t):(s.state.loginSuccess=!0,function(e){Je.apply(this,arguments)}(s.props.location))},s.goSignup=function(){var e={};s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var c="";new URLSearchParams(s.props.location.search).get("mobile")&&(c=new URLSearchParams(s.props.location.search).get("mobile"));var u="";new URLSearchParams(s.props.location.search).get("invite_token")&&(u=new URLSearchParams(s.props.location.search).get("invite_token"));var l=s.props.settingsTenantId;return s.state={invite_token:u,spaceId:l,email:o,mobile:c,userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!1,loginByMobile:!1,loginBy:"mobile",loginWithCode:!1,loginWithPassword:!1,serverError:"",loading:!1},s.props.tenant.enable_mobile_code_login&&s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!0,s.state.loginBy="mobile"):s.props.tenant.enable_mobile_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!0,s.state.loginByEmail=!1,s.state.loginBy="mobile"):s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!1,s.state.loginByEmail=!0,s.state.loginBy="email"):s.props.tenant.enable_password_login&&(s.state.loginWithPassword=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!1,s.state.loginBy="email"),s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ce("accounts.signup")+" | ".concat(s.props.tenant.name),s}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.signup",defaultMessage:"Sign Up"})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsxs)("div",{className:"rounded-md shadow-sm my-2",children:["email"===this.state.loginBy&&Object(pt.jsx)("div",{children:Object(pt.jsx)(Kt,{id:"email",name:"email",ref:this.emailInput,value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Please enter email"},onChange:this.handleEmailChange})}),"mobile"===this.state.loginBy&&Object(pt.jsx)("div",{children:Object(pt.jsx)(Kt,{id:"mobile",name:"mobile",ref:this.mobileInput,value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Please enter mobile"},onChange:this.handleMobileChange})}),Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"password",id:"password",name:"password",autocomplete:"new-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_create",defaultMessage:"Set Password"},onChange:this.handlePasswordChange})}),this.state.loginWithCode&&Object(pt.jsxs)("div",{className:"-mt-px grid grid-cols-5",children:[Object(pt.jsx)(Kt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),Object(pt.jsx)($t,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})]}),Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.name_placeholder",defaultMessage:"Name"},onChange:this.handleNameChange})})]}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),this.state.loginByEmail&&"mobile"===this.state.loginBy&&Object(pt.jsx)("div",{className:"text-sm leading-5 my-4",children:Object(pt.jsx)("button",{type:"button",onClick:this.switchLoginByEmail,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.switch_email",defaultMessage:"Use email"})})}),this.state.loginByMobile&&"email"===this.state.loginBy&&Object(pt.jsx)("div",{className:"text-sm leading-5 my-4",children:Object(pt.jsx)("button",{type:"button",onClick:this.switchLoginByMobile,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.switch_mobile",defaultMessage:"Use mobile"})})}),Object(pt.jsxs)("div",{className:"text-sm leading-5 my-4",children:[Object(pt.jsx)(jt.a,{id:"accounts.has_account",defaultMessage:"Has Account?"}),Object(pt.jsx)("button",{type:"button",onClick:this.goLogin,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.signin",defaultMessage:"Login"})})]}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.Component);var en=Object(f.b)((function(e){return{getCurrentUserId:y(e),settings:g(e),tenant:v(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({createUser:Ve,sendVerificationToken:We},e)}}))(Object(m.g)(Zt)),tn=function(e){var t=e.onClick,n=e.id,a=e.loginId,r=Qt(a||"cnt1",{total:60,lifecycle:"session"}),s=Object(it.a)(r,2),o=s[0],i=s[1],c="text-blue-600 hover:text-blue-600";return o>0&&(c="text-gray-300 hover:text-gray-300"),Object(pt.jsx)("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+c,id:n,disabled:o>0,type:"button",onClick:function(e){i(),t&&t()},children:Object(pt.jsxs)("span",{className:"",children:[Object(pt.jsx)(jt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),o>0?" (".concat(o,")"):null]})})},nn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var s;Object(i.a)(this,n),(s=t.call(this,e,a)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ce(e)},s.handleLoginIdChange=function(e){var t=e.target.value;s.state.MFA?s.setState({loginId:t,mobile:e.target.value,username:null,email:null,loginBy:"mobile"}):t.indexOf("@")>0?s.setState({loginId:t,email:e.target.value,username:null,mobile:null,loginBy:"email"}):new RegExp("^[0-9]{11}$").test(e.target.value)?s.setState({loginId:t,mobile:e.target.value,username:null,email:null,loginBy:"mobile"}):s.setState({loginId:t,username:e.target.value,mobile:null,email:null,loginBy:"username"})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.switchLoginWithCode=function(e){s.setState({loginWith:"code"})},s.switchLoginWithPassword=function(e){s.setState({loginWith:"password"})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile&&s.state.mobile.trim()&&new RegExp("^[0-9]{11}$").test(s.state.mobile)){var t={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t,t||s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.userNotFound",defaultMessage:"User not found."})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:n={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():"",username:"password"===s.state.loginWith&&"username"===s.state.loginBy?s.state.username.trim():"",spaceId:s.state.spaceId},s.props.actions.login(n,s.state.password?s.state.password.trim():s.state.password,s.state.verifyCode?s.state.verifyCode.trim():s.state.verifyCode).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.error,a=t.mobile_verified,r=t.mobile,"TO_MOBILE_CODE_LOGIN"!==n){e.next=5;break}return e.abrupt("return",s.setState({loginByEmail:!1,loginByMobile:!0,loginBy:"mobile",loginWith:"code",MFA:!0,loginId:r,mobile_verified:a,email:null,username:null}));case 5:"TO_VERIFY_MOBILE"===n&&et(s.props.location);case 6:if(!n){e.next=9;break}return s.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 9:s.finishSignin();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){at(s.props.currentUser,s.props.tenant,s.props.location)},s.goSignup=function(){var e={};s.state.email&&s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.state.mobile&&s.state.mobile.trim().length>0&&(e={mobile:s.state.mobile.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var c="";return new URLSearchParams(s.props.location.search).get("X-Space-Id")?c=new URLSearchParams(s.props.location.search).get("email"):s.props.settingsTenantId&&(c=s.props.settingsTenantId),s.state={spaceId:c,email:o,username:"",mobile:"",loginId:"",userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!0,loginByMobile:!0,loginBy:"mobile",loginWith:s.props.tenant.enable_password_login?"password":"code",loginWithCode:s.props.tenant.enable_mobile_code_login||s.props.tenant.enable_email_code_login,loginWithPassword:s.props.tenant.enable_password_login,serverError:"",loading:!1,MFA:!1,mobile_verified:!1},s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ce("accounts.signin")+" | ".concat(s.props.tenant.name),s}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsxs)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:[this.state.MFA&&Object(pt.jsx)(jt.a,{id:"accounts.signin-MFA",defaultMessage:"Multi-Factor Authentication"}),!this.state.MFA&&Object(pt.jsx)(jt.a,{id:"accounts.signin",defaultMessage:"Login"})]}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsxs)("div",{className:"rounded-md shadow-sm my-2",children:[Object(pt.jsx)("div",{style:this.state.MFA&&this.state.mobile_verified?{display:"none"}:{},children:Object(pt.jsx)(Kt,{id:"loginId",name:"loginId",ref:this.loginIdInput,value:this.state.loginId,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:this.state.MFA?{id:"accounts.mobile",defaultMessage:"Mobile"}:{id:"accounts.email_mobile",defaultMessage:"Email or mobile"},onChange:this.handleLoginIdChange})}),this.state.MFA&&this.state.mobile_verified&&Object(pt.jsx)("div",{children:Object(pt.jsx)(Kt,{id:"loginIdShow",name:"loginIdShow",value:Object(Xt.isString)(this.state.loginId)?this.state.loginId.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):this.state.loginId,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:this.state.MFA?{id:"accounts.mobile",defaultMessage:"Mobile"}:{id:"accounts.email_mobile",defaultMessage:"Email or mobile"},disabled:!0})}),"password"==this.state.loginWith&&Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"password",id:"password",name:"password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_placeholder",defaultMessage:"Password"},onChange:this.handlePasswordChange,autocomplete:"new-password"})}),"code"==this.state.loginWith&&Object(pt.jsxs)("div",{className:"-mt-px grid grid-cols-5",children:[Object(pt.jsx)(Kt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),Object(pt.jsx)(tn,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})]})]}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),!this.state.MFA&&this.state.loginWithPassword&&"code"===this.state.loginWith&&Object(pt.jsx)("div",{className:"text-sm leading-5 my-4",children:Object(pt.jsx)("button",{type:"button",onClick:this.switchLoginWithPassword,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.switch_password",defaultMessage:"Login with password"})})}),this.state.loginWithCode&&"password"===this.state.loginWith&&Object(pt.jsx)("div",{className:"text-sm leading-5 my-4",children:Object(pt.jsx)("button",{type:"button",onClick:this.switchLoginWithCode,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.switch_code",defaultMessage:"Login with verfiy code"})})}),!this.state.MFA&&this.props.tenant.enable_register&&Object(pt.jsxs)("div",{className:"text-sm leading-5 my-4",children:[Object(pt.jsx)(jt.a,{id:"accounts.no_account",defaultMessage:"No Account?"}),Object(pt.jsx)("button",{type:"button",onClick:this.goSignup,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.signup",defaultMessage:"Sign Up"})})]}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.Component);var an=Object(f.b)((function(e){return{getCurrentUserId:y(e),currentUser:O(e),settings:g(e),tenant:v(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({login:Be,sendVerificationToken:We},e)}}))(Object(m.g)(nn)),rn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){return Object(i.a)(this,n),t.call(this,e,a)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("redirect_uri");e||(e="/login"),Ke(e)}},{key:"render",value:function(){return null}}]),n}(r.a.PureComponent);var sn=Object(f.b)((function(e){return{currentUser:O(e),settings:g(e)}}),(function(e){return{actions:Object(b.b)({logout:De},e)}}))(rn),on=n(362);var cn=Object(f.b)((function(e){return{tenant:v(e)}}))((function(e){e.tenant;var t=e.user,n=Object(a.useState)(!1),r=Object(it.a)(n,2),s=r[0],o=r[1],i=function(){var e=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(pt.jsx)("div",{children:Object(pt.jsx)("nav",{className:"bg-white shadow border-gray-200",children:Object(pt.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:Object(pt.jsxs)("div",{className:"flex items-center justify-between h-15",children:[Object(pt.jsxs)("div",{className:"flex items-center",children:[Object(pt.jsx)("div",{className:"flex-shrink-0",children:Object(pt.jsx)("a",{href:"/",children:Object(pt.jsx)(Dt,{})})}),Object(pt.jsx)("div",{className:"hidden md:block",children:Object(pt.jsx)("div",{className:"ml-10 flex items-baseline space-x-4"})})]}),Object(pt.jsx)("div",{className:"md:block",children:Object(pt.jsxs)("div",{className:"ml-4 flex items-center md:ml-6",children:[Object(pt.jsx)("a",{href:"https://www.steedos.com/help/",target:"_blank",className:"p-1 text-cool-gray-400 rounded-full hover:bg-cool-gray-100 hover:text-cool-gray-500 focus:outline-none focus:shadow-outline focus:text-cool-gray-500","aria-label":"Notifications",children:Object(pt.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(pt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Object(pt.jsxs)("div",{className:"ml-3 relative",children:[Object(pt.jsx)("div",{children:Object(pt.jsxs)("button",{className:"max-w-xs flex items-center text-sm rounded-full focus:outline-none focus:bg-cool-gray-100 lg:p-2 lg:rounded-md lg:hover:bg-cool-gray-100",id:"user-menu","aria-label":"User menu","aria-haspopup":"true",onClick:function(){return o(!s)},children:[Object(pt.jsx)("span",{className:"inline-block h-8 w-8 rounded-full overflow-hidden bg-gray-100",children:Object(pt.jsx)("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:Object(pt.jsx)("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})}),Object(pt.jsx)("p",{className:"hidden ml-3 text-cool-gray-700 text-sm leading-5 font-medium lg:block",children:t&&t.name&&t.name}),Object(pt.jsx)("svg",{className:"hidden flex-shrink-0 ml-1 h-5 w-5 text-cool-gray-400 lg:block",viewBox:"0 0 20 20",fill:"currentColor",children:Object(pt.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),Object(pt.jsx)(on.a,{show:s,children:Object(pt.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg",children:Object(pt.jsxs)("div",{className:"py-1 rounded-md bg-white shadow-xs",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu",children:[Object(pt.jsx)("a",{href:"#/select-space",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"\u9009\u62e9\u4f01\u4e1a"}),Object(pt.jsx)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:i,children:"\u6ce8\u9500"})]})})})]})]})})]})})})})})),un=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e,a)).goHome=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.actions.goSpaceHome(r.props.location);case 1:case"end":return e.stop()}}),e)}))),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Ce.getPreviousSpaceId(),n=this.props.match&&this.props.match.params?this.props.match.params.spaceId:null,a=this.props,r=a.currentSpaceId,s=a.settingsTenantId,o=n||(r||(t&&"null"!==t?t:s));o?this.props.actions.selectSpace(o).then(function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}if(0!=n.data){t.next=6;break}return C.push({pathname:"/select-space",search:e.props.location.search}),t.abrupt("return");case 6:return e.goHome(),t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):C.push({pathname:"/select-space",search:this.props.location.search}),this.props.currentUser&&this.props.currentSpace&&this.goHome()}},{key:"render",value:function(){return null}}]),n}(r.a.PureComponent);var ln=Object(f.b)((function(e){return{currentUser:O(e),currentSpace:Ne(e),currentSpaceId:Pe(e),tenant:v(e),settings:g(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({selectSpace:Te,goSpaceHome:Le},e)}}))(un),dn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e,a)).handleInitParamsChange=function(e){r.setState({initParams:e.target.value})},r.goConsoleServer=function(){window.open(r.props.settings.serverInitInfo.cloud_url)},r.goSignup=function(){var e={};r.state.email&&r.state.email.trim().length>0&&(e={email:r.state.email.trim()}),r.state.mobile&&r.state.mobile.trim().length>0&&(e={mobile:r.state.mobile.trim()}),r.props.history.push({pathname:"/signup",search:r.props.location.search,state:e})},r.goHelpServer=function(){window.open(r.props.settings.serverInitInfo.help_url)},r.onSubmit=function(e){r.setState({serverError:null,loading:!0}),e.preventDefault(),r.setState({error:null});var t=r.state.initParams;if(t&&t.trim()){var n=t.trim().split("\n");if(2==n.length){var a=n[0],s=n[1];r.props.actions.initServer(a,s).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.error,t._next,!n){e.next=4;break}return r.setState({loading:!1,serverError:n}),e.abrupt("return");case 4:r.props.history.push({pathname:"/login",search:r.props.location.search});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else r.setState({loading:!1,serverError:"\u65e0\u6548\u7684\u521d\u59cb\u5316\u53c2\u6570"})}else r.setState({loading:!1,serverError:"\u8bf7\u586b\u5199\u521d\u59cb\u5316\u53c2\u6570"})},r.state={initParams:"",serverError:"",loading:!1},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(ct.a,{style:{zIndex:1},open:this.state.loading,children:Object(pt.jsx)(ut.a,{})}),Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.server_init",defaultMessage:"\u521d\u59cb\u5316\u534e\u708e\u9b54\u65b9"})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsx)("div",{className:"rounded-md shadow-sm my-2",children:Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"textarea",id:"init_params",name:"init_params",rows:"4",autocomplete:"\u8bf7\u8f93\u5165\u6fc0\u6d3b\u53c2\u6570",value:this.state.initParams,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.init_params",defaultMessage:"\u8bf7\u8f93\u5165\u6fc0\u6d3b\u53c2\u6570"},onChange:this.handleInitParamsChange})})}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),Object(pt.jsxs)("div",{className:"text-sm leading-5 my-4",children:[Object(pt.jsx)("button",{type:"button",onClick:this.goSignup,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.signup",defaultMessage:"Sign Up"})}),Object(pt.jsx)("span",{class:"ml-1 mr-1",children:" | "}),Object(pt.jsx)("button",{type:"button",onClick:this.goHelpServer,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",children:Object(pt.jsx)(jt.a,{id:"accounts.get_init_params",defaultMessage:"\u5e2e\u52a9"})})]}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.PureComponent);var pn=Object(f.b)((function(e){return{settings:g(e)}}),(function(e){return{actions:Object(b.b)({initServer:ot},e)}}))(dn),bn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e,a)).handleOldPasswordChange=function(e){r.setState({oldPassword:e.target.value})},r.handleNewPasswordChange=function(e){r.setState({newPassword:e.target.value})},r.handleConfirmPasswordChange=function(e){r.setState({confirmPassword:e.target.value})},r.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({serverError:null,loading:!0}),t.preventDefault(),r.setState({error:null}),r.state.oldPassword!==r.state.newPassword){e.next=6;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.oldAndNewPasswordNotEQ"})}),e.abrupt("return");case 6:if(r.state.newPassword===r.state.confirmPassword){e.next=9;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.passwordNotEQ"})}),e.abrupt("return");case 9:e.prev=9,Jt(r.props.settings.password,r.state.newPassword,r.props.currentUser.username),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(9),r.setState({serverError:Object(pt.jsx)(jt.a,{id:e.t0.message})}),e.abrupt("return");case 17:r.props.actions.changePassword(r.state.oldPassword,r.state.newPassword).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t&&(n=t.error),!n){e.next=8;break}return"accounts.invalid_credentials"===n.message&&(n.message="accounts.updatePassword_invalid_credentials"),r.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 8:Ke("/login");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:case"end":return e.stop()}}),e,null,[[9,13]])})));return function(t){return e.apply(this,arguments)}}(),r.state={oldPassword:"",newPassword:"",confirmPassword:"",serverError:"",loading:!1},window.browserHistory=r.props.history,document.title=ce("accounts.title.updatePassword")+" | ".concat(r.props.tenant.name),r}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.update_password",defaultMessage:"Change Password"})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsxs)("div",{className:"rounded-md shadow-sm my-2",children:[Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"password",id:"oldPassword",name:"oldPassword",autocomplete:"old-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.oldPassword",defaultMessage:"Set oldPassword"},onChange:this.handleOldPasswordChange})}),Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"password",id:"newPassword",name:"newPassword",autocomplete:"new-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.newPassword",defaultMessage:"Set newPassword"},onChange:this.handleNewPasswordChange})}),Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{type:"password",id:"confirmPassword",name:"confirmPassword",autocomplete:"confirm-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.confirmPassword",defaultMessage:"Set confirmPassword"},onChange:this.handleConfirmPasswordChange})})]}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.Component);var mn=Object(f.b)((function(e){return{currentUser:O(e),getCurrentUserId:y(e),settings:g(e),tenant:v(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({changePassword:Ge},e)}}))(Object(m.g)(bn)),hn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e,a)).handleNameChange=function(e){r.setState({name:e.target.value})},r.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({serverError:null,loading:!0}),t.preventDefault(),r.props.actions.createSpace(r.state.name).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,console.log(n),n&&r.selectSpace(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.selectSpace=function(e){e&&e._id&&(r.props.actions.selectSpace(e._id),at(r.props.currentUser,r.props.tenant,r.props.location))},r.state={name:""},r}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"my-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.title.createTenant",defaultMessage:"Create Team"})}),Object(pt.jsx)("div",{class:"mt-2 max-w-xl text-sm leading-5 text-gray-500",children:Object(pt.jsx)("p",{children:Object(pt.jsx)(jt.a,{id:"accounts.create_tenant_description",defaultMessage:"Create a new team and invite your colleagues to join."})})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",children:[Object(pt.jsx)("div",{className:"rounded-md shadow-sm my-2",children:Object(pt.jsx)("div",{children:Object(pt.jsx)(Kt,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-2 border-b border-gray-500 bg-blue-50 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:{id:"accounts.tenant_name",defaultMessage:"Team Name"},onChange:this.handleNameChange})})}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})}}]),n}(r.a.PureComponent);var fn=Object(f.b)((function(e){return{currentUser:O(e),settings:g(e),tenant:v(e)}}),(function(e){return{actions:Object(b.b)({createSpace:Ae,selectSpace:Te},e)}}))(hn),gn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleCreateTenant=function(){C.push({pathname:"/create-space",search:a.props.location.search})},a.handleSpaceClick=function(e){e&&(a.props.actions.selectSpace(e._id),C.push({pathname:"/home/".concat(e._id),search:a.props.location.search}))},a.state={loadingSpaceId:"",error:null},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=[];return Object.keys(this.props.spaces).forEach((function(n){var a=e.props.spaces[n];t.push(Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{space:a,onClick:function(t){return e.handleSpaceClick(a)},className:"w-full text-left border-b border-gray-100 block hover:bg-blue-100 focus:outline-none transition duration-150 ease-in-out",children:Object(pt.jsxs)("div",{className:"flex items-center sm:px-10 py-4",children:[Object(pt.jsxs)("div",{className:"min-w-0 flex-1 flex items-center",children:[Object(pt.jsx)("div",{className:"flex-shrink-0 pr-4 text-gray-600",children:Object(pt.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(pt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),Object(pt.jsx)("div",{className:"min-w-0 flex-1",children:Object(pt.jsx)("div",{children:Object(pt.jsx)("div",{className:"text-lg leading-5 font-medium truncate",children:a.name})})})]}),Object(pt.jsx)("div",{children:Object(pt.jsx)("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:Object(pt.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})})},n))})),Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsx)("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto p-10",children:Object(pt.jsxs)("div",{className:"relative rounded sm:shadow bg-white w-screen max-w-md",children:[Object(pt.jsxs)("div",{className:"sm:pt-10 sm:pl-10 sm:pr-10",children:[Object(pt.jsx)(Dt,{}),Object(pt.jsxs)("h2",{className:"mt-6 text-left text-2xl leading-9 font-extrabold text-gray-900",children:[this.props.spaceCount>0&&Object(pt.jsx)(jt.a,{id:"accounts.select_space",defaultMessage:"Select Company"}),0==this.props.spaceCount&&Object(pt.jsx)(jt.a,{id:"accounts.no_tenant",defaultMessage:"No Company"})]})]}),Object(pt.jsxs)("div",{className:"mt-4 bg-white overflow-hidden mb-10",children:[Object(pt.jsx)("ul",{className:"border-t border-gray-100",children:t}),Object(pt.jsx)("div",{className:"mt-6 mx-10 flex justify-end",children:Object(pt.jsx)("button",{type:"button",onClick:this.handleCreateTenant,className:"rounded group relative w-full justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.create_tenant",defaultMessage:"Create Company"})})})]})]})})]})}}]),n}(r.a.PureComponent);var vn=Object(f.b)((function(e){return{currentUser:O(e),currentSpace:Ne(e),spaces:Ie(e),mySpaces:ke(e),spaceCount:Re(e)}}),(function(e){return{actions:Object(b.b)({selectSpace:Te},e)}}))(gn);var jn=Object(f.b)((function(e){return{currentUser:O(e),settings:g(e),tenant:v(e)}}))((function(e){var t=e.currentUser,n=(e.match,e.settings,e.history,e.location),r=(e.tenant,Object(a.useState)(null)),s=Object(it.a)(r,2),o=s[0],i=s[1],c=Object(a.useState)(t.name),u=Object(it.a)(c,2),l=u[0],d=u[1],p=(new URLSearchParams(n.search).get("X-Space-Id"),Object(a.useState)({spaces:[],name:""})),b=Object(it.a)(p,2),m=(b[0],b[1],function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i(null),e.prev=2,l.trim()){e.next=5;break}throw new Error("accounts.nameRequired");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),i(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}());return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(cn,{}),Object(pt.jsx)("main",{className:"bg-cool-gray-100 h-screen",children:Object(pt.jsx)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:Object(pt.jsxs)("div",{className:"px-4 py-8 sm:px-0",children:[Object(pt.jsx)("header",{children:Object(pt.jsx)("div",{className:"max-w-7xl",children:Object(pt.jsx)("h1",{className:"text-3xl font-bold leading-tight text-gray-900",children:"\u8d26\u6237\u8bbe\u7f6e"})})}),Object(pt.jsx)("div",{className:"hidden sm:block",children:Object(pt.jsx)("div",{className:"py-5",children:Object(pt.jsx)("div",{className:"border-t border-gray-200"})})}),Object(pt.jsx)("div",{className:"mt-10 sm:mt-0",children:Object(pt.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[Object(pt.jsx)("div",{className:"md:col-span-1",children:Object(pt.jsx)("div",{className:"px-4 sm:px-0",children:Object(pt.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"\u4e2a\u4eba\u4fe1\u606f"})})}),Object(pt.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:Object(pt.jsx)("form",{onSubmit:m,children:Object(pt.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[Object(pt.jsx)("div",{className:"px-4 py-5 bg-white sm:p-6",children:Object(pt.jsx)("div",{className:"grid grid-cols-6 gap-6",children:Object(pt.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(pt.jsx)("label",{className:"block text-sm font-medium leading-5 text-gray-700",children:"\u59d3\u540d"}),Object(pt.jsx)("input",{id:"fullname",value:l,onChange:function(e){return d(e.target.value)},className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})]})})}),o&&Object(pt.jsx)(Vt,{error:o}),Object(pt.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Object(pt.jsx)("button",{className:"py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:shadow-outline-blue active:bg-indigo-600 transition duration-150 ease-in-out",children:"\u4fdd\u5b58"})})]})})})]})})]})})})]})})),xn=function(e){var t=e.onClick,n=e.id,a=e.loginId,r=Qt(a||"cnt1",{total:60,lifecycle:"session"}),s=Object(it.a)(r,2),o=s[0],i=s[1],c="text-blue-600 hover:text-blue-600";return o>0&&(c="text-gray-300 hover:text-gray-300"),Object(pt.jsx)("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+c,id:n,disabled:o>0,type:"button",onClick:function(e){i(),t&&t()},children:Object(pt.jsxs)("span",{className:"",children:[Object(pt.jsx)(jt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),o>0?" (".concat(o,")"):null]})})},On=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;Object(i.a)(this,n),(r=t.call(this,e,a)).handleEmailChange=function(e){r.setState({email:e.target.value})},r.handleMobileChange=function(e){r.setState({mobile:e.target.value})},r.handleCodeChange=function(e){r.setState({verifyCode:e.target.value})},r.sendVerificationToken=function(e){if(r.setState({serverError:null,loading:!0}),"email"!==r.state.verifyBy||r.state.email.trim())if("mobile"!==r.state.verifyBy||r.state.mobile.trim()){var t={email:"email"===r.state.verifyBy?r.state.email.trim():"",mobile:"mobile"===r.state.verifyBy?r.state.mobile.trim():""};r.props.actions.sendVerificationToken(t).then(function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t===r.props.currentUserId){e.next=4;break}return"email"===r.state.verifyBy&&r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.emailAlreadyExists"})}),"mobile"===r.state.verifyBy&&r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.mobileAlreadyExists"})}),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})});else r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})})},r.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({serverError:null,loading:!0}),t.preventDefault(),r.setState({error:null}),"email"!==r.state.verifyBy||r.state.email.trim()){e.next=6;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==r.state.verifyBy||r.state.mobile.trim()){e.next=9;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(r.state.verifyCode&&r.state.verifyCode.trim()){e.next=12;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.accounts.codeRequired"})}),e.abrupt("return");case 12:"email"===r.state.verifyBy&&r.props.actions.verifyEmail(r.state.email.trim(),r.state.verifyCode.trim()).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.error)){e.next=4;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 4:r.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),"mobile"===r.state.verifyBy&&r.props.actions.verifyMobile(r.state.mobile.trim(),r.state.verifyCode.trim()).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.error)){e.next=4;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 4:r.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.finish=function(e){at(r.props.currentUser,r.props.tenant,r.props.location)};var s="email";return r.state={verifyBy:s,email:"",mobile:"",verifyCode:"",serverError:"",loading:!1},window.browserHistory=r.props.history,document.title=ce("accounts.verify_".concat(s))+" | ".concat(r.props.tenant.name),r}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.verify_".concat(this.state.verifyBy),defaultMessage:"verify ".concat(this.state.verifyBy)})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsxs)("div",{className:"rounded-md shadow-sm my-2",children:["email"==this.state.verifyBy&&Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{id:"email",name:"email",value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Email"},onChange:this.handleEmailChange})}),"mobile"==this.state.verifyBy&&Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{id:"mobile",name:"mobile",value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Mobile"},onChange:this.handleMobileChange})}),Object(pt.jsxs)("div",{className:"-mt-px grid grid-cols-5",children:[Object(pt.jsx)(Kt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),Object(pt.jsx)(xn,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})]})]}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.Component);var yn=Object(f.b)((function(e){return{currentUserId:y(e),currentUser:O(e),settings:g(e),tenant:v(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({verifyEmail:ze,verifyMobile:qe,sendVerificationToken:We},e)}}))(Object(m.g)(On)),En=function(e){var t=e.onClick,n=e.id,a=e.loginId,r=Qt(a||"cnt1",{total:60,lifecycle:"session"}),s=Object(it.a)(r,2),o=s[0],i=s[1],c="text-blue-600 hover:text-blue-600";return o>0&&(c="text-gray-300 hover:text-gray-300"),Object(pt.jsx)("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+c,id:n,disabled:o>0,type:"button",onClick:function(e){i(),t&&t()},children:Object(pt.jsxs)("span",{className:"",children:[Object(pt.jsx)(jt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),o>0?" (".concat(o,")"):null]})})},wn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;Object(i.a)(this,n),(r=t.call(this,e,a)).handleEmailChange=function(e){r.setState({email:e.target.value})},r.handleMobileChange=function(e){r.setState({mobile:e.target.value})},r.handleCodeChange=function(e){r.setState({verifyCode:e.target.value})},r.sendVerificationToken=function(e){if(r.setState({serverError:null,loading:!0}),"email"!==r.state.verifyBy||r.state.email.trim())if("mobile"!==r.state.verifyBy||r.state.mobile.trim()){var t={email:"email"===r.state.verifyBy?r.state.email.trim():"",mobile:"mobile"===r.state.verifyBy?r.state.mobile.trim():""};r.props.actions.sendVerificationToken(t).then(function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t===r.props.currentUserId){e.next=4;break}return"email"===r.state.verifyBy&&r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.emailAlreadyExists"})}),"mobile"===r.state.verifyBy&&r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.mobileAlreadyExists"})}),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})});else r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})})},r.onSubmit=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({serverError:null,loading:!0}),t.preventDefault(),r.setState({error:null}),"email"!==r.state.verifyBy||r.state.email.trim()){e.next=6;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==r.state.verifyBy||r.state.mobile.trim()){e.next=9;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(r.state.verifyCode&&r.state.verifyCode.trim()){e.next=12;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:"accounts.accounts.codeRequired"})}),e.abrupt("return");case 12:"email"===r.state.verifyBy&&r.props.actions.verifyEmail(r.state.email.trim(),r.state.verifyCode.trim()).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.error)){e.next=4;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 4:r.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),"mobile"===r.state.verifyBy&&r.props.actions.verifyMobile(r.state.mobile.trim(),r.state.verifyCode.trim()).then(function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.error)){e.next=4;break}return r.setState({serverError:Object(pt.jsx)(jt.a,{id:n.message})}),e.abrupt("return");case 4:r.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.finish=function(e){at(r.props.currentUser,r.props.tenant,r.props.location)};var s="mobile";return r.state={verifyBy:s,email:"",mobile:"",verifyCode:"",serverError:"",loading:!1},window.browserHistory=r.props.history,document.title=ce("accounts.verify_".concat(s))+" | ".concat(r.props.tenant.name),r}return Object(c.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Wt,{}),Object(pt.jsxs)(Ft,{children:[Object(pt.jsx)(Dt,{}),Object(pt.jsx)("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900",children:Object(pt.jsx)(jt.a,{id:"accounts.verify_".concat(this.state.verifyBy),defaultMessage:"verify ".concat(this.state.verifyBy)})}),Object(pt.jsxs)("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none",children:[Object(pt.jsxs)("div",{className:"rounded-md shadow-sm my-2",children:["email"==this.state.verifyBy&&Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{id:"email",name:"email",value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Email"},onChange:this.handleEmailChange})}),"mobile"==this.state.verifyBy&&Object(pt.jsx)("div",{className:"-mt-px",children:Object(pt.jsx)(Kt,{id:"mobile",name:"mobile",value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Mobile"},onChange:this.handleMobileChange})}),Object(pt.jsxs)("div",{className:"-mt-px grid grid-cols-5",children:[Object(pt.jsx)(Kt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),Object(pt.jsx)(En,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})]})]}),this.state.serverError&&Object(pt.jsx)(Vt,{error:this.state.serverError}),Object(pt.jsx)("div",{className:"mt-6 flex justify-end",children:Object(pt.jsx)("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out",children:Object(pt.jsx)(jt.a,{id:"accounts.submit",defaultMessage:"Submit"})})})]})]})]})}}]),n}(r.a.Component);var Sn=Object(f.b)((function(e){return{currentUserId:y(e),currentUser:O(e),settings:g(e),tenant:v(e),settingsTenantId:x(e)}}),(function(e){return{actions:Object(b.b)({verifyEmail:ze,verifyMobile:qe,sendVerificationToken:We},e)}}))(Object(m.g)(wn)),_n=["component"],Cn=["component"],In=function(e){var t=e.component,n=Object(p.a)(e,_n);return t?Object(pt.jsx)(m.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return Object(pt.jsx)(ft,Object(d.a)(Object(d.a)({},e),{},{children:Object(pt.jsx)(t,Object(d.a)({},e))}))}})):null},kn=function(e){var t=e.component,n=Object(p.a)(e,Cn);return t?Object(pt.jsx)(m.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return Object(pt.jsx)(vt,Object(d.a)(Object(d.a)({},e),{},{children:Object(pt.jsx)(t,Object(d.a)({},e))}))}})):null},Rn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onConfigLoaded=function(){a.setState({configLoaded:!0})},a.state={configLoaded:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadMeAndConfig().then((function(t){e.onConfigLoaded()})).then((function(){}))}},{key:"render",value:function(){return this.state.configLoaded?Object(pt.jsx)(h.a,{basename:"",children:Object(pt.jsxs)("div",{className:"absolute w-full h-full",children:[Object(pt.jsx)(mt,{}),Object(pt.jsxs)(m.d,{children:[Object(pt.jsx)(m.b,{path:"/browsers.html",exact:!0}),Object(pt.jsx)(m.b,{path:"/logout",component:sn}),Object(pt.jsx)(kn,{exact:!0,path:"/",component:ln}),Object(pt.jsx)(m.b,{path:"/init",component:pn}),Object(pt.jsx)(In,{path:"/signup",component:en}),Object(pt.jsx)(In,{path:"/login",component:an}),Object(pt.jsx)(kn,{path:"/create-space",component:fn}),Object(pt.jsx)(kn,{path:"/select-space",component:vn}),Object(pt.jsx)(kn,{exact:!0,path:"/update-password",component:mn}),Object(pt.jsx)(kn,{path:"/verify/email",component:yn}),Object(pt.jsx)(kn,{path:"/verify/mobile",component:Sn}),Object(pt.jsx)(kn,{path:"/preference",component:jn}),Object(pt.jsx)(kn,{path:"/home",component:ln}),Object(pt.jsx)(kn,{path:"/home/:spaceId",component:ln}),Object(pt.jsx)(m.a,{to:Object(d.a)(Object(d.a)({},this.props.location),{},{pathname:"/login"})})]})]})}):Object(pt.jsx)("div",{})}}]),n}(r.a.PureComponent);var Nn=Object(f.b)((function(e){return{tenant:v(e),currentUser:O(e)}}),(function(e){return{actions:Object(b.b)({loadMeAndConfig:st},e)}}))(Rn);function Pn(e,t){var n={};if("en"===e){var a=ne()[e].translations;return Object.assign(n,a),{type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:n}}}return function(n){ge.doFetch(t).then((function(t){n({type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:t}})})).catch((function(e){console.warn("Actions - loadTranslations - recreived error: ",e)}))}}var Mn=n(738),Tn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleLocaleChange=function(e){a.loadTranslationsIfNecessary(e)},a.loadTranslationsIfNecessary=function(e){if(!a.props.translations){var t=ae(e);"en"!==e&&t&&a.props.actions.loadTranslations(e,t.url)}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.handleLocaleChange(this.props.locale)}},{key:"componentDidUpdate",value:function(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}},{key:"render",value:function(){return Object(pt.jsx)(Mn.a,{locale:this.props.locale,messages:this.props.translations,children:this.props.children},this.props.locale)}}]),n}(r.a.PureComponent);var Un=Object(f.b)((function(e){var t=re(e);return{locale:t,translations:se(e,t)}}),(function(e){return{actions:Object(b.b)({loadTranslations:Pn},e)}}))(Tn);o.a.render(Object(pt.jsx)(f.a,{store:ee,children:Object(pt.jsx)(Un,{children:Object(pt.jsx)(Nn,{})})}),document.getElementById("root"))}},[[715,1,2]]]);