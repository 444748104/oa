(this["webpackJsonp@steedos/webapp"]=this["webpackJsonp@steedos/webapp"]||[]).push([[0],{124:function(e){e.exports=JSON.parse('{"accounts.signin":"Sign In","accounts.signup":"Sign Up","accounts.submit":"Submit","accounts.username":"Username","accounts.forget_password":"Forget Password","accounts.reset_password":"Reset Password","accounts.goHome":"Go Home","accounts.emailVerifiedSuccess":"Your email has been verified","accounts.emailSent":"Email sent","accounts.passwordResetSuccessfully":"Your password has been reset successfully","accounts.incorrectPassword":"Incorrect password","accounts.unrecognizedOptionsForLogin":"Unrecognized options for login request","accounts.matchFailed":"Match failed","accounts.invalidUsername":"Invalid username","accounts.invalidEmail":"Invalid email","accounts.invalidMobile":"Invalid Mobile","accounts.invalidPassword":"Invalid password","accounts.invalidNewPassword":"Invalid new password","accounts.invalidToken":"Invalid token","accounts.invalidCode":"Invalid code","accounts.verifyEmailLinkExpired":"Verify email link expired","accounts.resetPasswordLinkExpired":"Reset password link expired","accounts.usernameAlreadyExists":"Username already exists","accounts.emailAlreadyExists":"Email already exists","accounts.mobileAlreadyExists":"Mobile already exists","accounts.usernameOrEmailRequired":"Mobile or Username or Email is required","accounts.emailRequired":"Email is required","accounts.mobileRequired":"Mobile is required","accounts.spaceUnExists":"Invalid Tenant Id","accounts.create_tenant":"Create Tenant","accounts.tenant_name":"Tenant Name","accounts.name":"Fullname","accounts.email":"Email","accounts.password":"Password","accounts.logout":"Logout","accounts.home":"Home","accounts.welcome":"Welcome","accounts.invalid_credentials":"Invalid username or password","accounts.update_password":"Change Password","accounts.oldPassword":"Old Password","accounts.newPassword":"New Password","accounts.confirmPassword":"Confirm Password","accounts.oldAndNewPasswordNotEQ":"Old and new passwords cannot be the same","accounts.passwordNotEQ":"Passwords are inconsistent","accounts.passwordRegError":"Password must contain characters, numbers and letters, and at least one capital letter, and no less than 8 digits","accounts.passwordExpired":"Password has expired, please change the password","accounts.access_denied":"You don\'t have permission","accounts.updatePassword_invalid_credentials":"Invalid old password","accounts.nameRequired":"Name is required","accounts.usernameRequired":"Username is required","accounts.passwordRequired":"Password is required","accounts.tenantNameRequired":"Tenant name is requiredd","accounts.verify":"Verify","accounts.verify_email":"Verify Email","accounts.verify_mobile":"Verify Mobile","accounts.verifyCode":"Verify code","accounts.next":"Next","accounts.reSendCode":"Resend code","accounts.goBack":"Back","accounts.unenableRegister":"This company is set to prohibit the registration of new accounts, please contact the company administrator.","accounts.userNotFound":"Account information not found","accounts.noPasswordSet":"Account has no password","accounts.noEmailSet":"Account has no email","accounts.loginCode":"Login with Verify code","accounts.loginCode.email":"Email","accounts.signupCode.email":"Email","accounts.loginCode.email_or_mobile":"Mobile or Email","accounts.signupCode.email_or_mobile":"Mobile or Email","accounts.set_fullname":"Fullname is required","accounts.mobile":"Mobile","accounts.signupCode.mobile":"Mobile","accounts.title.login":"Sign In","accounts.title.signup":"Sign Up","accounts.title.createTenant":"Create Tenant","accounts.title.resetPassword":"Login with Verify code","accounts.title.updatePassword":"Change Password","accounts.title.verifyEmail":"Verify Email","accounts.title.setName":"Set Fullname","accounts.title.chooseTenant":"Choose Tenant","accounts.title.verifyMobile":"Bind Mobile","accounts.title.verify":"Verify","accounts.emailHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>","accounts.mobileHelp":"SMS service is not configured\uff0c<mobile_help>View help</mobile_help>","accounts.emailHelp_mobileHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>; SMS service is not configured\uff0c<mobile_help>View help</mobile_help>.","accounts.codeRequired":"Verify code is required","accounts.codeExpired":"Verify code is expired","accounts.loginWithCode":"Login with Verify code","accounts.loginWithPassword":"Login with password","accounts.goIn":"Go In","accounts.verifyEmail":"Verify Email","accounts.verifyMobile":"Verify Mobile","accounts.verify.info":"A 6-digit code was sent to {name}, enter it within 10 minutes. Didn\'t get it? Try resending the code.","accounts.disablePasswordLogin":"Login with password is disabled, please contact the administrator","accounts.disableUnverifiedMobilePasswordLogin":"Your mobile is not verified, please login with the verify code","accounts.disableUnverifiedEmailPasswordLogin":"Your email is not verified, please login with the verify code","accounts.invalidRequest":"Invalid request","accounts.serverError":"Server error","accounts.tooManyFailures":"Too many failures, please try again in 10 minutes.","accounts.copyright":"\xa9 2020 steedos.com, inc.","accounts.privacy":"Privacy","accounts.privacyURL":"https://www.steedos.org/docs/steedos/privacy/","accounts.logoURL":"/images/logo_platform.en-us.png"}')},234:function(e){e.exports=JSON.parse('{"accounts.signin":"\u767b\u5f55","accounts.signin-MFA":"\u591a\u91cd\u8eab\u4efd\u9a8c\u8bc1","accounts.signup":"\u521b\u5efa\u8d26\u6237","accounts.no_account":"\u6ca1\u6709\u8d26\u6237\uff1f","accounts.has_account":"\u5df2\u6709\u8d26\u6237\uff1f","accounts.submit":"\u63d0\u4ea4","accounts.forget_password":"\u5fd8\u8bb0\u5bc6\u7801","accounts.reset_password":"\u91cd\u7f6e\u5bc6\u7801","accounts.username":"\u7528\u6237\u540d","accounts.create_tenant":"\u521b\u5efa\u65b0\u56e2\u961f","accounts.no_tenant":"\u60a8\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u56e2\u961f","accounts.create_tenant_description":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56e2\u961f\uff0c\u5e76\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u3002\u60a8\u5c06\u6210\u4e3a\u65b0\u56e2\u961f\u7684\u7ba1\u7406\u5458\u3002","accounts.tenant_name":"\u56e2\u961f\u540d\u79f0","accounts.name":"\u59d3\u540d","accounts.name_placeholder":"\u60a8\u7684\u59d3\u540d","accounts.email":"\u90ae\u7bb1","accounts.email_placeholder":"\u60a8\u7684\u90ae\u7bb1","accounts.mobile":"\u624b\u673a\u53f7","accounts.mobile_placeholder":"\u60a8\u7684\u624b\u673a\u53f7\u7801","accounts.email_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.email_mobile_username":"\u624b\u673a\u3001\u90ae\u7bb1\u6216\u7528\u6237\u540d","accounts.password":"\u5bc6\u7801","accounts.password_placeholder":"\u5bc6\u7801","accounts.password_create":"\u8bbe\u7f6e\u60a8\u7684\u8d26\u6237\u5bc6\u7801","accounts.switch_email":"\u6539\u4e3a\u4f7f\u7528\u7535\u5b50\u90ae\u4ef6","accounts.switch_mobile":"\u6539\u4e3a\u4f7f\u7528\u624b\u673a\u53f7\u7801","accounts.switch_code":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.switch_password":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.select_space":"\u9009\u62e9\u4f01\u4e1a","accounts.title.password":"\u8f93\u5165\u5bc6\u7801","accounts.title.setPassword":"\u8bbe\u7f6e\u5bc6\u7801","accounts.logout":"\u6ce8\u9500","accounts.title.signup":"\u521b\u5efa\u8d26\u6237","accounts.title.createTenant":"\u521b\u5efa\u4f01\u4e1a","accounts.title.resetPassword":"\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.title.updatePassword":"\u4fee\u6539\u5bc6\u7801","accounts.title.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.title.setName":"\u586b\u5199\u59d3\u540d","accounts.title.chooseTenant":"\u9009\u62e9\u4f01\u4e1a","accounts.title.verifyMobile":"\u7ed1\u5b9a\u624b\u673a\u53f7","accounts.title.verify":"\u9a8c\u8bc1\u7801","accounts.home":"\u9996\u9875","accounts.welcome":"\u6b22\u8fce\u60a8","accounts.invalid_credentials":"\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u3002","accounts.invalid_code":"\u8d26\u53f7\u6216\u9a8c\u8bc1\u7801\u9519\u3002","accounts.update_password":"\u4fee\u6539\u5bc6\u7801","accounts.oldPassword":"\u65e7\u5bc6\u7801","accounts.newPassword":"\u65b0\u5bc6\u7801","accounts.confirmPassword":"\u786e\u8ba4\u5bc6\u7801","accounts.oldAndNewPasswordNotEQ":"\u65b0\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c","accounts.passwordNotEQ":"\u5bc6\u7801\u4e0d\u4e00\u81f4","accounts.passwordRegError":"\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u5b57\u7b26\u3001\u6570\u5b57\u548c\u5b57\u6bcd\uff0c\u5e76\u81f3\u5c11\u6709\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\uff0c\u4e14\u4e0d\u80fd\u5c11\u4e8e8\u4f4d","accounts.passwordExpired":"\u5bc6\u7801\u5df2\u8fc7\u671f\uff0c\u8bf7\u4fee\u6539\u5bc6\u7801","accounts.access_denied":"\u60a8\u65e0\u6743\u6267\u884c\u6b64\u64cd\u4f5c\u3002","accounts.updatePassword_invalid_credentials":"\u65e7\u5bc6\u7801\u9519\u8bef","accounts.goHome":"\u8fd4\u56de\u9996\u9875","accounts.emailVerifiedSuccess":"\u60a8\u7684\u90ae\u4ef6\u5df2\u88ab\u9a8c\u8bc1","accounts.emailSent":"\u90ae\u4ef6\u5df2\u53d1\u9001","accounts.passwordResetSuccessfully":"\u60a8\u7684\u5bc6\u7801\u5df2\u88ab\u91cd\u7f6e\u6210\u529f","accounts.incorrectPassword":"\u5bc6\u7801\u9519\u8bef","accounts.unrecognizedOptionsForLogin":"\u65e0\u6cd5\u8bc6\u522b\u7684\u767b\u5f55\u8bf7\u6c42\u9009\u9879","accounts.matchFailed":"\u5339\u914d\u5931\u8d25","accounts.invalidUsername":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d","accounts.invalidEmail":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740","accounts.invalidMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a","accounts.invalidEmailMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u6216\u90ae\u7bb1","accounts.invalidPassword":"\u65e0\u6548\u7684\u5bc6\u7801","accounts.invalidNewPassword":"\u65e0\u6548\u7684\u65b0\u5bc6\u7801","accounts.invalidToken":"\u65e0\u6548\u7684token","accounts.invalidCode":"\u65e0\u6548\u7684\u9a8c\u8bc1\u7801","accounts.verifyEmailLinkExpired":"\u8be5\u90ae\u7bb1\u9a8c\u8bc1\u94fe\u63a5\u5df2\u5931\u6548","accounts.resetPasswordLinkExpired":"\u8be5\u91cd\u7f6e\u5bc6\u7801\u94fe\u63a5\u5df2\u5931\u6548","accounts.usernameAlreadyExists":"\u8be5\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.emailAlreadyExists":"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.mobileAlreadyExists":"\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.usernameOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.mobileOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.nameRequired":"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.emailRequired":"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a","accounts.mobileRequired":"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a","accounts.usernameRequired":"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.passwordRequired":"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.tenantNameRequired":"\u4f01\u4e1a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a","accounts.verify":"\u9a8c\u8bc1","accounts.verify_email":"\u9a8c\u8bc1\u90ae\u4ef6","accounts.verify_mobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verifyCode":"\u9a8c\u8bc1\u7801","accounts.next":"\u4e0b\u4e00\u6b65","accounts.sendCode":"\u83b7\u53d6\u9a8c\u8bc1\u7801","accounts.reSendCode":"\u91cd\u65b0\u83b7\u53d6","accounts.goBack":"\u8fd4\u56de","accounts.unenableRegister":"\u6b64\u516c\u53f8\u88ab\u8bbe\u7f6e\u4e3a\u7981\u6b62\u6ce8\u518c\u65b0\u8d26\u6237\uff0c\u8bf7\u8054\u7cfb\u516c\u53f8\u7ba1\u7406\u5458\u3002","accounts.userNotFound":"\u672a\u627e\u5230\u8d26\u6237\u4fe1\u606f","accounts.noPasswordSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u5bc6\u7801","accounts.noEmailSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u90ae\u7bb1","accounts.loginCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.signupCode.email":"\u90ae\u7bb1","accounts.signupCode.email_or_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.set_fullname":"\u8bf7\u586b\u5199\u59d3\u540d","accounts.spaceUnExists":"\u65e0\u6548\u7684\u4f01\u4e1a\u6807\u8bc6","accounts.signupCode.mobile":"\u624b\u673a\u53f7","accounts.emailHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>","accounts.mobileHelp":"\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.emailHelp_mobileHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>\uff1b\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.codeRequired":"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.codeExpired":"\u9a8c\u8bc1\u7801\u5df2\u5931\u6548","accounts.loginWithCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.loginWithPassword":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.goIn":"\u8fdb\u5165","accounts.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.verifyMobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verify.info":"\u8bf7\u8f93\u5165\u53d1\u9001\u81f3 {name} \u7684 6 \u4f4d\u6570\u5b57\u9a8c\u8bc1\u7801\uff0c\u6709\u6548\u671f10\u5206\u949f\u3002","accounts.disablePasswordLogin":"\u5df2\u7981\u6b62\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458","accounts.disableUnverifiedMobilePasswordLogin":"\u4f60\u7684\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.disableUnverifiedEmailPasswordLogin":"\u4f60\u7684\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.invalidRequest":"\u65e0\u6548\u7684\u8bf7\u6c42","accounts.serverError":"\u670d\u52a1\u5f02\u5e38","accounts.tooManyFailures":"\u9a8c\u8bc1\u6b21\u6570\u8fc7\u591a\uff0c\u8bf710\u5206\u949f\u540e\u518d\u8bd5!","accounts.invalidVerifyCode":"\u9a8c\u8bc1\u7801\u65e0\u6548","accounts.invalid_invite":"\u65e0\u6548\u9080\u8bf7\u94fe\u63a5\u3002\u8bf7\u8be2\u95ee\u60a8\u7684\u7ba1\u7406\u5458\u83b7\u5f97\u9080\u8bf7\u3002","accounts.copyright":"\xa9 2020 \u534e\u708e\u8f6f\u4ef6","accounts.privacy":"\u9690\u79c1","accounts.privacyURL":"https://www.steedos.com/cn/steedos/privacy/","accounts.logoURL":"/images/logo_platform.png"}')},252:function(e,t,a){e.exports=a(491)},487:function(e,t){},491:function(e,t,a){"use strict";a.r(t);a(162),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(191),a(262),a(263),a(109),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(279),a(280),a(198),a(199),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(297),a(203),a(298),a(299),a(300),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(311),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(150),a(332),a(333),a(334),a(335),a(338),a(339),a(340),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(349),a(350),a(351),a(352),a(215),a(353),a(354),a(217),a(355),a(356),a(357),a(358),a(118),a(359),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(227),a(424),a(425),a(426),a(428),a(229),a(429);var n=a(0),r=a.n(n),s=a(70),o=a.n(s),i=a(25),c=a(11),l=a(9),u=a(13),d=a(14),m=a(16),p=a(12),f=a(31),h=a(55),b=a(8);function g(e){return Object(i.a)({},e.settings)}function v(e){var t=Object.assign({},e.settings.tenant);return t.name||(t.name="Steedos"),t}function E(e){return e.requests}function y(e){if(e.settings&&e.settings.tenant)return e.settings.tenant._id}function w(e){return e.entities.users.users[S(e)]}function S(e){return e.entities.users.currentUserId}var _=a(2),x=a.n(_),C=a(4),O=a(45),I="undefined"!==typeof window?Object(O.b)():null,k="BATCHING_REDUCER.BATCH";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;return{type:t,meta:{batch:!0},payload:e}}function N(e){if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=a);return t}var j=N({CREATE_USER_REQUEST:null,CREATE_USER_SUCCESS:null,CREATE_USER_FAILURE:null,LOGIN_REQUEST:null,LOGIN_SUCCESS:null,LOGIN_FAILURE:null,LOGOUT_REQUEST:null,LOGOUT_SUCCESS:null,LOGOUT_FAILURE:null,REVOKE_ALL_USER_SESSIONS_SUCCESS:null,REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS:null,UPDATE_ME_REQUEST:null,UPDATE_ME_SUCCESS:null,UPDATE_ME_FAILURE:null,RECEIVED_ME:null,RECEIVED_PROFILE:null,RECEIVED_PROFILES:null,RECEIVED_PROFILES_LIST:null,RECEIVED_PROFILE_IN_TEAM:null,RECEIVED_PROFILE_NOT_IN_TEAM:null,RECEIVED_PROFILE_WITHOUT_TEAM:null,RECEIVED_SESSIONS:null,RECEIVED_REVOKED_SESSION:null,RESET_LOGOUT_STATE:null,RECEIVED_MY_USER_ACCESS_TOKEN:null,RECEIVED_MY_USER_ACCESS_TOKENS:null,CLEAR_MY_USER_ACCESS_TOKENS:null,REVOKED_USER_ACCESS_TOKEN:null,DISABLED_USER_ACCESS_TOKEN:null,ENABLED_USER_ACCESS_TOKEN:null,LOGIN:null,VERIFICATION_TOKEN_RECIEVED:null,CHANGEPASSWORD_REQUEST:null,CHANGEPASSWORD_FAILURE:null,CHANGEPASSWORD_RECEIVED:null,VERIFYEMAIL_REQUEST:null,VERIFYEMAIL_FAILURE:null,VERIFYEMAIL_RECEIVED:null,VERIFYMOBILE_REQUEST:null,VERIFYMOBILE_FAILURE:null,VERIFYMOBILE_RECEIVED:null,TO_MOBILE_CODE_LOGIN:null}),P=N({GET_SPACES_REQUEST:null,GET_SPACES_SUCCESS:null,GET_SPACES_FAILURE:null,MY_SPACES_REQUEST:null,MY_SPACES_SUCCESS:null,MY_SPACES_FAILURE:null,CREATE_SPACE_REQUEST:null,CREATE_SPACE_SUCCESS:null,CREATE_SPACE_FAILURE:null,JOIN_SPACE_REQUEST:null,JOIN_SPACE_SUCCESS:null,JOIN_SPACE_FAILURE:null,CREATED_SPACE:null,SELECT_SPACE:null,UPDATED_SPACE:null,RECEIVED_SPACE:null,RECEIVED_SPACES_LIST:null}),T=(N({DISMISS_ERROR:null,LOG_ERROR:null,CLEAR_ERRORS:null,RESTORE_ERRORS:null}),N({RECEIVED_SETTINGS:null,RECEIVED_APP_STATE:null,RECEIVED_APP_CREDENTIALS:null,REMOVED_APP_CREDENTIALS:null,RECEIVED_APP_DEVICE_TOKEN:null,PING_RESET:null,RECEIVED_SERVER_VERSION:null,CLIENT_CONFIG_RECEIVED:null,CLIENT_CONFIG_RESET:null,CLIENT_LICENSE_RECEIVED:null,CLIENT_LICENSE_RESET:null,RECEIVED_DATA_RETENTION_POLICY:null,LOG_CLIENT_ERROR_REQUEST:null,LOG_CLIENT_ERROR_SUCCESS:null,LOG_CLIENT_ERROR_FAILURE:null,SUPPORTED_TIMEZONES_REQUEST:null,SUPPORTED_TIMEZONES_SUCCESS:null,SUPPORTED_TIMEZONES_FAILURE:null,SUPPORTED_TIMEZONES_RECEIVED:null,WEBSOCKET_REQUEST:null,WEBSOCKET_SUCCESS:null,WEBSOCKET_FAILURE:null,WEBSOCKET_CLOSED:null,REDIRECT_LOCATION_SUCCESS:null,REDIRECT_LOCATION_FAILURE:null,SET_CONFIG_AND_LICENSE:null,WARN_METRICS_STATUS_RECEIVED:null,WARN_METRIC_STATUS_RECEIVED:null,WARN_METRIC_STATUS_REMOVED:null})),M=a(78),U=a(129),A=a(39),L=a(32),V={},B={},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{headers:{}};if(e=e||t.url,"GET"===t.method||!t.method){var a=B[e],n=V["".concat(e).concat(a)];return a&&(t.headers["If-None-Match"]=a),fetch(e,t).then((function(t){if(304===t.status)return n.clone();if(200===t.status){var a=t.headers.get("Etag");a&&(V["".concat(e).concat(a)]=t.clone(),B[e]=a)}return t}))}return Reflect.apply(fetch,void 0,[e,t])};function F(e){var t=Object.keys(e);if(0===t.length)return"";for(var a="?",n=0;n<t.length;n++){var r=t[n];a+=r+"="+encodeURIComponent(e[r]),n<t.length-1&&(a+="&")}return a}var W=a(237),G=Object(p.c)({currentUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_ME:var a=t.data||t.payload;return a._id;case j.LOGIN:var n=t.data.user;return n?n._id:e;case j.LOGOUT_SUCCESS:return""}return e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_ME:case j.RECEIVED_PROFILE:var a=t.data||t.payload,n=Object(i.a)({},a);return Object(i.a)(Object(i.a)({},e),{},Object(L.a)({},a._id,n));case j.LOGIN:var r=t.data.user;if(r){var s=Object(i.a)({},e);return s[r._id]=r,s}return e;case j.LOGOUT_SUCCESS:return{};case j.CHANGEPASSWORD_RECEIVED:var o=t.data||t.payload;return Object(i.a)(Object(i.a)({},e),{},Object(L.a)({},o.userId,Object.assign({},e[o.userId],{password_expired:o.password_expired})));case j.VERIFYEMAIL_RECEIVED:var c=t.data||t.payload;return Object(i.a)(Object(i.a)({},e),{},Object(L.a)({},c.userId,Object.assign({},e[c.userId],{email_verified:c.email_verified})));case j.VERIFYMOBILE_RECEIVED:var l=t.data||t.payload;return Object(i.a)(Object(i.a)({},e),{},Object(L.a)({},l.userId,Object.assign({},e[l.userId],{mobile_verified:l.mobile_verified})));default:return e}}}),z=Object(p.c)({currentSpaceId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.SELECT_SPACE:return t.data;case j.LOGOUT_SUCCESS:return"";default:return e}},spaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.RECEIVED_SPACES_LIST:return Object.assign({},e,le(t.data));case j.LOGOUT_SUCCESS:return{};default:return e}}});var q=Object(p.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.RECEIVED_APP_STATE:return t.data;default:return e}},credentials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.RECEIVED_APP_CREDENTIALS:return Object.assign({},e,t.data);case j.LOGIN:return{url:t.data.url};case j.LOGOUT_SUCCESS:return{};default:return e}},deviceToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.RECEIVED_APP_DEVICE_TOKEN:return t.data;default:return e}},serverVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.RECEIVED_SERVER_VERSION:return t.data;case j.LOGOUT_SUCCESS:return"";default:return e}}}),H=Object(p.c)({general:q,users:G,spaces:z}),Y=a(124);var K=Object(p.c)({translations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{en:Y},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_TRANSLATIONS":return Object(i.a)(Object(i.a)({},e),{},Object(L.a)({},t.data.locale,t.data.translations));default:return e}}}),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.RECEIVED_SETTINGS:return Object.assign({},e,t.data);default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"change":return Object.assign({},e,{status:t.data});default:return e}},J=Object(p.c)({entities:H,i18n:K,settings:Q,requests:X}),$={entities:{general:{},users:{currentUserId:"",users:{}},spaces:{currentSpaceId:"",spaces:{}}},i18n:{translations:{en:a(124),"zh-CN":a(234)}},settings:{services:{}},requests:{status:"not_started"}},Z=Object(p.d)(J,$,Object(p.a)(W.a));var ee=Z,te={en:{value:"en",name:"English",order:1,translations:a(124)},"zh-CN":{value:"zh-CN",name:"\u4e2d\u6587 (\u7b80\u4f53)",order:13,translations:a(234)}};function ae(){return te}function ne(e){return ae()[e]}function re(e){return g(e).DefaultClientLocale,oe()}function se(e,t){return ne(t)?e.i18n.translations[t]:e.i18n.translations.en}a(487);var oe=function(){var e=window.navigator;return(e.userLanguage||e.language||"en").indexOf("zh")>=0?"zh-CN":"en"},ie=function(){var e=window.navigator;return(e.userLanguage||e.language||"en").indexOf("zh")>=0?"zh-cn":"en-us"};function ce(e,t){var a=ee.getState(),n=se(a,re(a));return n&&e in n?n[e]:t||e}function le(e){for(var t={},a=0;a<e.length;a++)t[e[a]._id]=e[a];return t}a(488);var ue=function(){function e(){var t=this;Object(c.a)(this,e),this.LOGIN_TOKEN_KEY="Meteor.loginToken",this.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires",this.USER_ID_KEY="Meteor.userId",this.logToConsole=!1,this._lastLoginTokenWhenPolled=null,this.loginExpirationInDays=null,this.serverVersion="",this.clusterId="",this.token="",this.csrf="",this.url="",this.urlVersion="",this.userAgent=null,this.enableLogging=!1,this.defaultHeaders={"Content-Type":"application/json"},this.userId="",this.diagnosticId="",this.includeCookies=!0,this.isRudderKeySet=!1,this.translations={connectionError:"There appears to be a problem with your internet connection.",unknownError:"We received an unexpected status code from the server."},this.userRoles=void 0,this.getTranslations=function(e){return t.doFetch(e,{method:"get"})},this.logClientError=function(e){},this.login=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t.trackEvent("api","api_users_login");var s={device_id:r,user:e,password:a,token:n,locale:ie()};return t.doFetch("".concat(t.getAccountsRoute(),"/password/login"),{method:"POST",body:JSON.stringify(s)})},this.createUser=function(e,a,n,r){t.trackEvent("api","api_users_createUser");var s={};return a&&(s.t=a),n&&(s.iid=n),r&&(s.r=r),t.doFetch("".concat(t.getAccountsRoute(),"/password/register").concat(F(s)),{method:"POST",body:JSON.stringify(e)})},this.createSpace=function(e){t.trackEvent("api","api_users_createTenant");return t.doFetch("".concat(t.getBaseRoute(),"/api/v4/spaces/register/tenant").concat(F({})),{method:"POST",body:JSON.stringify({name:e})})},this.sendVerificationToken=function(e){t.trackEvent("api","api_users_verify");var a={user:e};return t.doFetch("".concat(t.getAccountsRoute(),"/password/sendVerificationCode"),{method:"POST",body:JSON.stringify(a)})},this.getSettings=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/settings"),{method:"get"})},this.getMe=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user"),{method:"get"})},this.getMySpaces=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user/spaces"),{method:"get"})},this.logout=Object(C.a)(x.a.mark((function e(){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.trackEvent("api","api_users_logout"),e.next=3,t.doFetchWithResponse("".concat(t.getAccountsRoute(),"/logout"),{method:"post"});case 3:return a=e.sent,(n=a.response).ok&&(t.token=""),t.serverVersion="",e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),this.doFetch=function(){var e=Object(C.a)(x.a.mark((function e(a,n){var r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doFetchWithResponse(a,n);case 2:return r=e.sent,s=r.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.doFetchWithResponse=function(){var e=Object(C.a)(x.a.mark((function e(a,n){var r,s,o,i,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(a,t.getOptions(n));case 2:return r=e.sent,s=de(r.headers),e.prev=4,e.next=7,r.json();case 7:o=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new me(t.getUrl(),{message:"Received invalid response from the server.",intl:{id:"mobile.request.invalid_response",defaultMessage:"Received invalid response from the server."},url:a});case 13:if(s.has("X-Version-Id")&&!s.get("Cache-Control")&&(i=s.get("X-Version-Id"))&&t.serverVersion!==i&&(t.serverVersion=i),s.has("X-Cluster-Id")&&(c=s.get("X-Cluster-Id"))&&t.clusterId!==c&&(t.clusterId=c),!r.ok){e.next=17;break}return e.abrupt("return",{response:r,headers:s,data:o});case 17:throw l=o.message||"",t.logToConsole&&console.error(l),new me(t.getUrl(),{message:l,server_error_id:o.id,status_code:o.status_code,url:a});case 20:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,a){return e.apply(this,arguments)}}(),this.changePassword=function(e,a){return t.doFetch("".concat(t.getAccountsRoute(),"/password/changePassword"),{method:"POST",body:JSON.stringify({oldPassword:e,newPassword:a})})},this.verifyEmail=function(e,a){return t.doFetch("".concat(t.getAccountsRoute(),"/password/verify/email"),{method:"POST",body:JSON.stringify({email:e,code:a})})},this.verifyMobile=function(e,a){return t.doFetch("".concat(t.getAccountsRoute(),"/password/verify/mobile"),{method:"POST",body:JSON.stringify({mobile:e,code:a})})}}return Object(l.a)(e,[{key:"getUrl",value:function(){var e=new URL(window.location.href).pathname.split("/accounts");if(!this.url){var t="";return e.length>1&&(t=e[0]),t}return this.url}},{key:"getAbsoluteUrl",value:function(e){return"string"===typeof e&&e.startsWith("/")?this.getUrl()+e:e}},{key:"setUrl",value:function(e){this.url=e}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"getToken",value:function(){return this.token}},{key:"setToken",value:function(e){this.token=e}},{key:"setCSRF",value:function(e){this.csrf=e}},{key:"setAcceptLanguage",value:function(e){this.defaultHeaders["Accept-Language"]=e}},{key:"setEnableLogging",value:function(e){this.enableLogging=e}},{key:"setIncludeCookies",value:function(e){this.includeCookies=e}},{key:"setUserId",value:function(e){this.userId=e}},{key:"setUserRoles",value:function(e){this.userRoles=e}},{key:"setDiagnosticId",value:function(e){this.diagnosticId=e}},{key:"enableRudderEvents",value:function(){this.isRudderKeySet=!0}},{key:"getServerVersion",value:function(){return this.serverVersion}},{key:"getUrlVersion",value:function(){return this.urlVersion}},{key:"getBaseRoute",value:function(){return"".concat(this.getUrl()).concat(this.urlVersion)}},{key:"getAccountsRoute",value:function(){return"".concat(this.getBaseRoute(),"/accounts")}},{key:"getCSRFFromCookie",value:function(){if("undefined"!==typeof document&&"undefined"!==typeof document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var a=e[t].trim();if(a.startsWith("MMCSRF="))return a.replace("MMCSRF=","")}return""}},{key:"getOptions",value:function(e){var t=Object(i.a)({},e),a=Object(i.a)(Object(L.a)({},"X-Requested-With","XMLHttpRequest"),this.defaultHeaders);this.token&&(a.Authorization="".concat("BEARER"," ").concat(this.token));var n=this.csrf||this.getCSRFFromCookie();return e.method&&"get"!==e.method.toLowerCase()&&n&&(a["X-CSRF-Token"]=n),this.includeCookies&&(t.credentials="include"),this.userAgent&&(a["User-Agent"]=this.userAgent),t.headers&&Object.assign(a,t.headers),Object(i.a)(Object(i.a)({},t),{},{headers:a})}},{key:"trackEvent",value:function(e,t,a){if(this.isRudderKeySet)Object.assign({category:e,type:t,user_actual_id:this.userId},a)}}]),e}();function de(e){var t=new Map,a=new Map;return e.forEach((function(e,n){var r=n.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()})),s=e;if(e&&e.match(/\n\S+:\s\S+/)){var o=e.split("\n");s=o.shift();var i=new Map(o.map((function(e){return e.split(/:\s/)})));a=new Map([].concat(Object(A.a)(a),Object(A.a)(i)))}t.set(r,s)})),new Map([].concat(Object(A.a)(t),Object(A.a)(a)))}var me=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(c.a)(this,a),(r=t.call(this,n.message+": "+function(e,t){var a=t,n=(a=a.substring(e.length)).indexOf("?");-1!==n&&(a=a.substring(0,n));var r=["api","v4","users","teams","scheme","name","members","channels","posts","reactions","commands","files","preferences","hooks","incoming","outgoing","oauth","apps","emoji","brand","image","data_retention","jobs","plugins","roles","system","timezones","schemes","redirect_location","patch","mfa","password","reset","send","active","verify","terms_of_service","login","logout","ids","usernames","me","username","email","default","sessions","revoke","all","audits","device","status","search","switch","authorized","authorize","deauthorize","tokens","disable","enable","exists","unread","invite","batch","stats","import","schemeRoles","direct","group","convert","view","search_autocomplete","thread","info","flagged","pinned","pin","unpin","opengraph","actions","thumbnail","preview","link","delete","logs","ping","config","client","license","websocket","webrtc","token","regen_token","autocomplete","execute","regen_secret","policy","type","cancel","reload","environment","s3_test","file","caches","invalidate","database","recycle","compliance","reports","cluster","ldap","test","sync","saml","certificate","public","private","idp","elasticsearch","purge_indexes","analytics","old","webapp","fake"];return a=a.split("/").map((function(e){return""!==e&&-1===r.indexOf(e)?"<filtered>":e})).join("/"),-1!==n&&(a+="?<filtered>"),a}(e,n.url||""))).url=void 0,r.intl=void 0,r.server_error_id=void 0,r.status_code=void 0,r.message=n.message,r.url=n.url,r.intl=n.intl,r.server_error_id=n.server_error_id,r.status_code=n.status_code,Object.defineProperty(Object(M.a)(r),"message",{enumerable:!0}),r}return a}(Object(U.a)(Error)),pe=new ue;function fe(e){return function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}"undefined"!==typeof window&&(window.Client4=pe);function he(e,t,a){var n=a().entities.users.currentUserId;"status_code"in e&&401===e.status_code&&e.url&&-1===e.url.indexOf("/login")&&n&&(pe.setToken(""),t({type:j.LOGOUT_SUCCESS,data:{}}))}function be(e,t,a){-1===e.indexOf("SUCCESS")?a(function(e,t){return{type:e,data:t}}(e,t)):a(ge(e))}function ge(e){return{type:e,data:null}}function ve(e){var t=e.clientFunc,a=e.onRequest,n=e.onSuccess,r=e.onFailure,s=e.params,o=void 0===s?[]:s;return function(){var e=Object(C.a)(x.a.mark((function e(s,i){var c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&s(ge(a)),c=null,e.prev=2,e.next=5,t.apply(void 0,Object(A.a)(o));case 5:c=e.sent,e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(2),he(e.t0,s,i),l=[fe(e.t0)],r&&l.push((u=r,d=e.t0,{type:u,error:d})),s(R(l)),e.abrupt("return",{error:e.t0});case 15:return Array.isArray(n)?n.forEach((function(e){be(e,c,s)})):n&&be(n,c,s),e.abrupt("return",{data:c});case 17:case"end":return e.stop()}var u,d}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}()}Error;var Ee=function(e){return["user_prev_space",e].join(":")},ye=function(e,t){return""===e||"/"===e?t:[e,t].join(":")},we=new(function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"getItem",value:function(e){arguments.length>1&&void 0!==arguments[1]||ee.getState();var t="steedos";return localStorage.getItem(ye(t,e))}},{key:"setItem",value:function(e,t){ee.getState();localStorage.setItem(ye("steedos",e),t)}},{key:"removeItem",value:function(e){ee.getState();localStorage.removeItem(ye("steedos",e))}},{key:"getPreviousSpaceId",value:function(e){return e||(e=this.getItem("userId")),this.getItem(Ee(e))}},{key:"setPreviousSpaceId",value:function(e,t){this.setItem(Ee(e),t),this.setItem("spaceId",t),localStorage.setItem("spaceId",t)}},{key:"getUserId",value:function(){return this.getItem("userId")}},{key:"setUserId",value:function(e,t){e?(this.setItem("userId",e),this.setItem("token",t),this.setItem("was_logged_in","true")):(this.removeItem("userId"),this.removeItem("token"),this.removeItem("spaceId"),localStorage.removeItem("spaceId"),this.setItem("was_logged_in","false"))}},{key:"setWasLoggedIn",value:function(e){e?this.setItem("was_logged_in","true"):this.setItem("was_logged_in","false")}},{key:"getWasLoggedIn",value:function(){return"true"===this.getItem("was_logged_in")}}]),e}());"undefined"!==typeof window&&(window.LocalStorageStore=we);var Se=we;function _e(e){return e.entities.spaces.spaces}function xe(e){return Object.values(e.entities.spaces.spaces)}function Ce(e){return Object.keys(e.entities.spaces.spaces).length}function Oe(e){return e.entities.spaces.spaces[Ie(e)]}function Ie(e){return e.entities.spaces.currentSpaceId}function ke(e,t){return e.entities.spaces.spaces[t]}function Re(e){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=S(n())){t.next=3;break}return t.abrupt("return",{data:!1});case 3:if(s=e){t.next=8;break}s=Se.getPreviousSpaceId(r),t.next=11;break;case 8:if(ke(n(),s)){t.next=11;break}return t.abrupt("return",{data:!1});case 11:return a({type:P.SELECT_SPACE,data:s}),Se.setPreviousSpaceId(r,s),t.abrupt("return",{data:s});case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}function Ne(){return ve({clientFunc:pe.getMySpaces,onRequest:P.MY_SPACES_REQUEST,onSuccess:[P.RECEIVED_SPACES_LIST,P.MY_SPACES_SUCCESS],onFailure:P.MY_SPACES_FAILURE})}function je(e){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,pe.createSpace(e);case 4:r=t.sent,t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(1),he(t.t0,a,n),a(fe(t.t0)),t.abrupt("return",{error:t.t0});case 12:if(!r||!r._id){t.next=22;break}return s=[a(Ne()),a(Re(r._id))],t.prev=14,t.next=17,Promise.all(s);case 17:t.next=22;break;case 19:return t.prev=19,t.t1=t.catch(14),t.abrupt("return",{error:t.t1});case 22:return t.abrupt("return",{data:r});case 23:case"end":return t.stop()}}),t,null,[[1,7],[14,19]])})));return function(e,a){return t.apply(this,arguments)}}()}function Pe(e,t){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r,s,o,i,c,l,u;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Se.getItem("userId"),s=Se.getItem("token"),o=Se.getItem("spaceId"),a=ee.getState(),console.log(a),i=a.settings.root_url,c=new URLSearchParams(e.search),(l=c.get("redirect_uri"))?(l.startsWith("http://")||l.startsWith("https://")||(l=window.location.origin+l),(u=new URL(l)).searchParams.append("X-Space-Id",o),u.searchParams.append("X-Auth-Token",s),u.searchParams.append("X-User-Id",r),window.location.href=u.toString()):window.location.href=i||"/",t.abrupt("return",{data:!0});case 8:case"end":return t.stop()}var a}),t)})));return function(e,a){return t.apply(this,arguments)}}()}function Te(e,t,a,n){return function(){var r=Object(C.a)(x.a.mark((function r(s,o){var i;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,pe.createUser(e,t,a,n);case 3:i=r.sent,r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(0),he(r.t0,s,o),s(fe(r.t0)),r.abrupt("return",{error:r.t0});case 11:return s({type:j.RECEIVED_ME,data:i.user}),r.abrupt("return",Ue(i)(s,o));case 13:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e,t){return r.apply(this,arguments)}}()}function Me(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var n=Object(C.a)(x.a.mark((function n(r,s){var o,i;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:j.LOGIN_REQUEST,data:null}),o=s().entities.general.deviceToken,n.prev=2,n.next=5,pe.login(e,t,a,o);case 5:if(!(i=n.sent)._next){n.next=8;break}return n.abrupt("return",{error:i._next});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(2),r(R([{type:j.LOGIN_FAILURE,error:n.t0},fe(n.t0)])),n.abrupt("return",{error:n.t0});case 14:return n.abrupt("return",Ue(i)(r,s));case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e,t){return n.apply(this,arguments)}}()}function Ue(e){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:j.RECEIVED_ME,data:e.user}),pe.setToken(e.token),pe.setUserId(e.user._id),e.user&&e.user._id&&Se.setUserId(e.user._id,e.token),r=[a(Ne()),a(Re())],t.prev=5,t.next=8,Promise.all(r);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),a(R([{type:j.LOGIN_FAILURE,error:t.t0},fe(t.t0)])),t.abrupt("return",{error:t.t0});case 14:return a(R([{type:j.LOGIN_SUCCESS}])),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(JSON.stringify({"X-Auth-Token":e.token,"X-User-Id":e.user._id,"X-Access-Token":e.tokens.accessToken})),t.abrupt("return",{data:!0,_next:e._next});case 17:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,a){return t.apply(this,arguments)}}()}function Ae(){return function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:j.LOGOUT_REQUEST,data:null}),e.prev=1,e.next=4,pe.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return Se.setUserId(null),t({type:j.LOGOUT_SUCCESS,data:null}),e.abrupt("return",{data:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}function Le(e){return function(){var t=Object(C.a)(x.a.mark((function t(a,n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n().entities.general.deviceToken,t.prev=1,t.next=4,pe.sendVerificationToken(e);case 4:r=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),a(R([{type:j.VERIFICATION_TOKEN_RECIEVED,error:t.t0}])),t.abrupt("return",{error:t.t0});case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,a){return t.apply(this,arguments)}}()}function Ve(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n,r){var s,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:j.CHANGEPASSWORD_REQUEST,data:null}),a.prev=1,o=ve({clientFunc:pe.changePassword,onSuccess:j.CHANGEPASSWORD_RECEIVED,params:[e,t]}),a.next=5,o(n,r);case 5:s=a.sent,a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),n(R([{type:j.CHANGEPASSWORD_FAILURE,error:a.t0},fe(a.t0)])),a.abrupt("return",{error:a.t0});case 12:return a.abrupt("return",s);case 13:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e,t){return a.apply(this,arguments)}}()}function Be(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n,r){var s,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:j.VERIFYEMAIL_REQUEST,data:null}),a.prev=1,o=ve({clientFunc:pe.verifyEmail,onSuccess:j.VERIFYEMAIL_RECEIVED,params:[e,t]}),a.next=5,o(n,r);case 5:s=a.sent,a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),n(R([{type:j.VERIFYEMAIL_FAILURE,error:a.t0},fe(a.t0)])),a.abrupt("return",{error:a.t0});case 12:return a.abrupt("return",s);case 13:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e,t){return a.apply(this,arguments)}}()}function De(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n,r){var s,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:j.VERIFYMOBILE_REQUEST,data:null}),a.prev=1,o=ve({clientFunc:pe.verifyMobile,onSuccess:j.VERIFYMOBILE_RECEIVED,params:[e,t]}),a.next=5,o(n,r);case 5:s=a.sent,a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),n(R([{type:j.VERIFYMOBILE_FAILURE,error:a.t0},fe(a.t0)])),a.abrupt("return",{error:a.t0});case 12:return a.abrupt("return",s);case 13:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e,t){return a.apply(this,arguments)}}()}var Fe=ee.dispatch,We=ee.getState;function Ge(e){e||(e="/login"),Fe(Ae()).then((function(){Se.setUserId(null),Je(e)})).catch((function(t){console.log(t),Je(e)}))}function ze(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(C.a)(x.a.mark((function e(t){var a,n,r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=We(),n=w(a)){e.next=4;break}return e.abrupt("return");case 4:if(r=Se.getPreviousSpaceId(n.id),!(s=ke(a,r))){e.next=11;break}return Fe(Re(s._id)),e.abrupt("return",s._id);case 11:I.push({pathname:"/select-space",search:t.search});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(){return(He=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(t);case 2:a=e.sent,I.push({pathname:"/home/".concat(a),search:t.search});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.push({pathname:"/update-password",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return(Ke=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.push({pathname:"/verify/email",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.push({pathname:"/verify/mobile",search:t.search});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t){if(e&&e&&e.indexOf("no_redirect=1")<0){var a=Se.getItem("userId"),n=Se.getItem("token"),r=Se.getItem("spaceId");e=e.indexOf("?")>0?e+"&no_redirect=1":e+"?no_redirect=1",a&&n&&(e="".concat(e,"&X-Auth-Token=").concat(n,"&X-User-Id=").concat(a,"&X-Space-Id=").concat(r)),e.match(/^\/([^/]|$)/)?t?I.push({pathname:e,search:t.search}):I.push(e):document.location.href=e}}function $e(e,t,a){e.password_expired?function(e){Ye.apply(this,arguments)}(a):!t.enable_bind_mobile||e.mobile_verified?!t.enable_bind_email||e.email_verified?a?I.push({pathname:"/home",search:a.search}):I.push("/home"):function(e){Ke.apply(this,arguments)}(a):Qe(a)}function Ze(){return function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getSettings();case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),he(e.t0,t,a),e.abrupt("return",{error:e.t0});case 10:return pe.setEnableLogging("true"===n.EnableDeveloper),pe.setDiagnosticId(n.DiagnosticId),t({type:T.RECEIVED_SETTINGS,data:n}),e.abrupt("return",{data:n});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()}function et(){return function(){var e=Object(C.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Se.getItem("token"))&&pe.setToken(a),n=[t(Ze())],e.next=5,Promise.all(n);case 5:if(r=e.sent,!Se.getWasLoggedIn()){e.next=12;break}return e.t0=r,e.next=10,t(function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),n=[t(function(){var e=Object(C.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se.getItem("userId")){e.next=2;break}return e.abrupt("return",{error:"user not found."});case 2:return n=ve({clientFunc:pe.getMe,onSuccess:j.RECEIVED_ME}),e.next=5,n(t,a);case 5:if(!("error"in(r=e.sent))){e.next=9;break}return Se.removeItem("userId"),e.abrupt("return",r);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t(Ne()),t(Re())],e.next=4,Promise.all(n);case 4:return r=a().entities.users.currentUserId,a().entities.users.users[r],r&&pe.setUserId(r),e.abrupt("return",{data:!0});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function tt(e,t){return function(){var a=Object(C.a)(x.a.mark((function a(n){var r,s,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=[n(Object(C.a)(x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pe.doFetch("".concat(pe.getBaseRoute(),"/initServer"),{method:"POST",body:JSON.stringify({spaceId:e,apiKey:t})});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))))],a.next=3,Promise.all(r);case 3:if(s=a.sent,!(o=s[0])||1==o.success){a.next=7;break}return a.abrupt("return",{error:o.error});case 7:return a.t0=s,a.next=10,n(Ze());case 10:return a.t1=a.sent,a.t0.push.call(a.t0,a.t1),a.abrupt("return",s);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}var at=a(24),nt=a(513),rt=a(510),st=a(508),ot=a(515),it=Object(st.a)((function(e){return Object(ot.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.0)"}})}));var ct=Object(b.b)((function(e){return{requests:E(e)}}))((function(e){var t=e.requests,a=it({}),s=r.a.useState(!1),o=Object(at.a)(s,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){"started"===t.status?c(!0):c(!1)}),[t]),r.a.createElement("div",null,r.a.createElement(nt.a,{className:a.backdrop,open:i},r.a.createElement(rt.a,null)))})),lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){return Object(c.a)(this,a),t.call(this,e,n)}return Object(l.a)(a,[{key:"isValidState",value:function(){return!(this.props.settings&&this.props.settings.serverInitInfo&&this.props.settings.serverInitInfo.allow_init)}},{key:"componentDidMount",value:function(){window.postMessage({type:"webapp-ready"},window.location.origin),this.props.settings&&this.props.settings.serverInitInfo&&this.props.settings.serverInitInfo.allow_init&&Ge("/init?redirect_to="+encodeURIComponent(this.props.location.pathname),!0,!1)}},{key:"render",value:function(){return this.isValidState()?this.props.children:r.a.createElement(ct,null)}}]),a}(r.a.PureComponent);var ut=Object(b.b)((function(e){return{settings:g(e)}}))(lt),dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){return Object(c.a)(this,a),t.call(this,e,n)}return Object(l.a)(a,[{key:"isValidState",value:function(){return null!=this.props.currentUser}},{key:"componentDidMount",value:function(){window.postMessage({type:"webapp-ready"},window.location.origin),this.props.currentUser||Ge("/login?redirect_to="+encodeURIComponent(this.props.location.pathname),!0,!1)}},{key:"render",value:function(){return this.isValidState()?this.props.children:r.a.createElement(ct,null)}}]),a}(r.a.PureComponent);var mt=Object(b.b)((function(e){return{currentUser:w(e),tenant:v(e)}}))(dt),pt=a(512),ft=a(517),ht=a(130),bt=a(511),gt=a(44),vt=a(240),Et=a.n(vt),yt=a(242),wt=a.n(yt),St=a(243),_t=a.n(St),xt=a(241),Ct=a.n(xt),Ot=a(82),It={success:Et.a,warning:Ct.a,error:wt.a,info:_t.a},kt=Object(st.a)((function(e){var t="light"===e.palette.type?Ot.a:Ot.d,a="light"===e.palette.type?Ot.d:Ot.a;return{success:{backgroundColor:ht.a[600]},error:{color:t(e.palette.error.main,.6),backgroundColor:a(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},info:{color:t(e.palette.primary.main,.6),backgroundColor:a(e.palette.primary.main,.9),"& $icon":{color:e.palette.primary.main}},warning:{color:t(bt.a[700],.6),backgroundColor:a(bt.a[700],.9),"& $icon":{color:bt.a[700]}},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function Rt(e){var t=kt({}),a=e.className,n=e.message,s=(e.onClose,e.variant),o=Object(m.a)(e,["className","message","onClose","variant"]),i=It[s];return r.a.createElement(ft.a,Object.assign({elevation:0,className:Object(gt.a)(t[s],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Object(gt.a)(t.icon,t.iconVariant)}),r.a.createElement(pt.a,{id:n,defaultMessage:n,values:{mobile_help:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE"},t)},email_help:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE"},t)}}}))},o))}var Nt=Object(st.a)((function(e){return{margin:{marginBottom:e.spacing(1)}}})),jt=(Object(st.a)({formError:{color:"red"}}),function(e){var t=e.error,a=e.variant,n=Nt({}),s=a||"error";return r.a.createElement(Rt,{variant:s,className:n.margin,message:t})}),Pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).openPrivacyPage=Object(C.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce("accounts.privacyURL"),window&&window.AppBrowserOpen?window.AppBrowserOpen(t,"_blank"):window.open(t);case 2:case"end":return e.stop()}}),e)}))),e}return Object(l.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto md:p-10 h-full"},n.createElement("div",{className:"relative rounded p-11 sm:shadow-md bg-white w-screen max-w-md"},this.props.children),n.createElement("div",{className:"absolute bottom-0 left-0 right-0 text-center m-2 text-gray-500 text-sm"},n.createElement(pt.a,{id:"accounts.copyright",defaultMessage:"\xa9 2020 salesforce.com, inc."}),n.createElement("span",{className:"ml-1 mr-1"}," | "),n.createElement("a",{className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150",href:"javascript:void(0)",onClick:this.openPrivacyPage},n.createElement(pt.a,{id:"accounts.privacy",defaultMessage:"Privacy"}))))}}]),a}(n.Component);var Tt=Object(b.b)((function(e){return{tenant:v(e)}}))(Pt);var Mt=Object(b.b)((function(e){return{tenant:v(e)}}))((function(e){var t=e.tenant,a=(e.location,"".concat(pe.getUrl()).concat(ce("accounts.logoURL")));return t.logo_url&&(a=t.logo_url),n.createElement("div",null,n.createElement("img",{src:a,className:"h-10"}))}));var Ut=Object(b.b)((function(e){return{tenant:v(e)}}))((function(e){var t=e.tenant,a=(e.location,"".concat(pe.getUrl(),"/images/background.svg"));t.background_url&&(a=t.background_url);var r="#f8f8f8";t.background_color&&(r=t.background_color);var s=window.innerWidth>640?{backgroundImage:"url("+a+")",backgroundColor:r}:{};return n.createElement("div",{className:""},n.createElement("div",{className:"fixed bg-white justify-center mx-auto h-full w-full",style:s}))})),At=r.a.forwardRef((function(e,t){var a=Object(n.useRef)(),s=t||a,o=function(){return setTimeout((function(){var e=s.current;e&&"password"===e.getAttribute("type")&&e.hasAttribute("value")&&e.removeAttribute("value")}),50)};return Object(n.useEffect)((function(){var e=o();return function(){clearTimeout(e)}}),[e.value,e.type]),o(),r.a.createElement("input",Object.assign({},e,{ref:s,onFocus:function(t){var a=e.onFocus;o(),a&&a(t)},onBlur:function(t){var a=e.onBlur;o(),a&&a(t)}}))}));At.displayName="InputPassword";var Lt=At,Vt=r.a.forwardRef((function(e,t){var a=e.placeholder,n=Object(m.a)(e,["placeholder"]);return r.a.createElement(pt.a,{id:a.id,defaultMessage:a.defaultMessage,values:a.values},(function(e){return"password"===n.type?r.a.createElement(Lt,Object.assign({},n,{ref:t,placeholder:e})):"textarea"===n.type?r.a.createElement("textarea",Object.assign({},n,{placeholder:e})):r.a.createElement("input",Object.assign({},n,{ref:t,placeholder:e}))}))}));Vt.displayName="LocalizedInput";var Bt=Vt,Dt=function(e,t){var a=Object(n.useMemo)((function(){var a,n,r=t.total||60,s=t.lifecycle||"session",o="__".concat(e),i=function(){return""+(Date.now()+1e3*r)};switch(s){case"always":n=function(){return localStorage.setItem(o,i())},a=function(){return localStorage.getItem(o)};break;case"session":n=function(){return sessionStorage.setItem(o,i())},a=function(){return sessionStorage.getItem(o)}}return[n,a]}),[t,e]),r=Object(at.a)(a,2),s=r[0],o=r[1],i=Object(n.useCallback)((function(){s()}),[s]),c=Object(n.useCallback)((function(){var e=o();if(e){if(e=+e,isNaN(e))return 0;var t=Math.floor((e-Date.now())/1e3);return t<0?0:t}return 0}),[o]),l=Object(n.useState)(c()),u=Object(at.a)(l,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){var e=setInterval((function(){var e=c();d!==e&&m(e)}),500);return function(){clearInterval(e)}}),[c,d]),[d,i]},Ft=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=Dt(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(at.a)(s,2),i=o[0],c=o[1],l="text-blue-600 hover:text-blue-600";return i>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:i>0,type:"button",onClick:function(e){c(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(pt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),i>0?" (".concat(i,")"):null))},Wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(c.a)(this,a),(s=t.call(this,e,n)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ce(e)},s.handleEmailChange=function(e){s.setState({email:e.target.value})},s.handleNameChange=function(e){s.setState({name:e.target.value})},s.switchLoginByMobile=function(e){s.setState({loginBy:"mobile"})},s.switchLoginByEmail=function(e){s.setState({loginBy:"email"})},s.tabColor=function(e){return s.state.loginBy===e?"text-blue-600 hover:text-blue-700 border-blue-600 hover:border-blue-300":"text-gray-600 hover:text-gray-500 hover:border-gray-300"},s.handleMobileChange=function(e){s.setState({mobile:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.goLogin=function(){var e={email:s.state.email,mobile:s.state.mobile};s.props.history.push({pathname:"/login",search:s.props.location.search,state:e})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile.trim()){var t={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(s.state.name&&s.state.name.trim()){e.next=12;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.nameRequired"})}),e.abrupt("return");case 12:a={password:s.state.password?s.state.password.trim():s.state.password,name:s.state.name.trim(),locale:ie(),verifyCode:s.state.verifyCode?s.state.verifyCode.trim():s.state.verifyCode},s.state.spaceId&&(a.spaceId=s.state.spaceId),s.state.invite_token&&(a.invite_token=s.state.invite_token),"mobile"===s.state.loginBy?a.mobile=s.state.mobile:"email"===s.state.loginBy&&(a.email=s.state.email),s.props.actions.createUser(a).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.error,n=t._next,!a){e.next=4;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 4:s.finishSignin(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){if("TO_VERIFY_MOBILE"===e)return Qe(s.props.location);var t=new URLSearchParams(s.props.location.search).get("redirect_to");t&&t.match(/^\/([^/]|$)/)?s.props.history.push(t):(s.state.loginSuccess=!0,function(e){He.apply(this,arguments)}(s.props.location))},s.goSignup=function(){var e={};s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var i="";new URLSearchParams(s.props.location.search).get("mobile")&&(i=new URLSearchParams(s.props.location.search).get("mobile"));var l="";new URLSearchParams(s.props.location.search).get("invite_token")&&(l=new URLSearchParams(s.props.location.search).get("invite_token"));var u=s.props.settingsTenantId;return s.state={invite_token:l,spaceId:u,email:o,mobile:i,userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!1,loginByMobile:!1,loginBy:"mobile",loginWithCode:!1,loginWithPassword:!1,serverError:"",loading:!1},s.props.tenant.enable_mobile_code_login&&s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!0,s.state.loginBy="mobile"):s.props.tenant.enable_mobile_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!0,s.state.loginByEmail=!1,s.state.loginBy="mobile"):s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!1,s.state.loginByEmail=!0,s.state.loginBy="email"):s.props.tenant.enable_password_login&&(s.state.loginWithPassword=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!1,s.state.loginBy="email"),s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ce("accounts.signup")+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.signup",defaultMessage:"Sign Up"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},"email"===this.state.loginBy&&r.a.createElement("div",null,r.a.createElement(Bt,{id:"email",name:"email",ref:this.emailInput,value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Please enter email"},onChange:this.handleEmailChange})),"mobile"===this.state.loginBy&&r.a.createElement("div",null,r.a.createElement(Bt,{id:"mobile",name:"mobile",ref:this.mobileInput,value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Please enter mobile"},onChange:this.handleMobileChange})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"password",id:"password",name:"password",autocomplete:"new-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_create",defaultMessage:"Set Password"},onChange:this.handlePasswordChange})),this.state.loginWithCode&&r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(Bt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(Ft,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.name_placeholder",defaultMessage:"Name"},onChange:this.handleNameChange}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),this.state.loginByEmail&&"mobile"===this.state.loginBy&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginByEmail,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.switch_email",defaultMessage:"Use email"}))),this.state.loginByMobile&&"email"===this.state.loginBy&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginByMobile,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.switch_mobile",defaultMessage:"Use mobile"}))),r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement(pt.a,{id:"accounts.has_account",defaultMessage:"Has Account?"}),r.a.createElement("button",{type:"button",onClick:this.goLogin,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.signin",defaultMessage:"Login"}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var Gt=Object(b.b)((function(e){return{getCurrentUserId:S(e),settings:g(e),tenant:v(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({createUser:Te,sendVerificationToken:Le},e)}}))(Object(f.g)(Wt)),zt=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=Dt(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(at.a)(s,2),i=o[0],c=o[1],l="text-blue-600 hover:text-blue-600";return i>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:i>0,type:"button",onClick:function(e){c(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(pt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),i>0?" (".concat(i,")"):null))},qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(c.a)(this,a),(s=t.call(this,e,n)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ce(e)},s.handleLoginIdChange=function(e){var t=e.target.value;s.state.MFA?s.setState({loginId:t,mobile:e.target.value,username:null,email:null,loginBy:"mobile"}):t.indexOf("@")>0?s.setState({loginId:t,email:e.target.value,username:null,mobile:null,loginBy:"email"}):new RegExp("^[0-9]{11}$").test(e.target.value)?s.setState({loginId:t,mobile:e.target.value,username:null,email:null,loginBy:"mobile"}):s.setState({loginId:t,username:e.target.value,mobile:null,email:null,loginBy:"username"})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.switchLoginWithCode=function(e){s.setState({loginWith:"code"})},s.switchLoginWithPassword=function(e){s.setState({loginWith:"password"})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile&&s.state.mobile.trim()&&new RegExp("^[0-9]{11}$").test(s.state.mobile)){var t={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t,t||s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.userNotFound",defaultMessage:"User not found."})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:a={email:"email"===s.state.loginBy?s.state.email.trim():"",mobile:"mobile"===s.state.loginBy?s.state.mobile.trim():"",username:"password"===s.state.loginWith&&"username"===s.state.loginBy?s.state.username.trim():"",spaceId:s.state.spaceId},s.props.actions.login(a,s.state.password?s.state.password.trim():s.state.password,s.state.verifyCode?s.state.verifyCode.trim():s.state.verifyCode).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("TO_MOBILE_CODE_LOGIN"!==(a=t.error)){e.next=5;break}return e.abrupt("return",s.setState({loginByEmail:!1,loginByMobile:!0,loginBy:"mobile",loginWith:"code",MFA:!0,loginId:"",email:null,username:null}));case 5:"TO_VERIFY_MOBILE"===a&&Qe(s.props.location);case 6:if(!a){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 9:s.finishSignin();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){$e(s.props.currentUser,s.props.tenant,s.props.location)},s.goSignup=function(){var e={};s.state.email&&s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.state.mobile&&s.state.mobile.trim().length>0&&(e={mobile:s.state.mobile.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var i="";return new URLSearchParams(s.props.location.search).get("X-Space-Id")?i=new URLSearchParams(s.props.location.search).get("email"):s.props.settingsTenantId&&(i=s.props.settingsTenantId),s.state={spaceId:i,email:o,username:"",mobile:"",loginId:"",userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!0,loginByMobile:!0,loginBy:"mobile",loginWith:s.props.tenant.enable_password_login?"password":"code",loginWithCode:s.props.tenant.enable_mobile_code_login||s.props.tenant.enable_email_code_login,loginWithPassword:s.props.tenant.enable_password_login,serverError:"",loading:!1,MFA:!1},s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ce("accounts.signin")+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},this.state.MFA&&r.a.createElement(pt.a,{id:"accounts.signin-MFA",defaultMessage:"Multi-Factor Authentication"}),!this.state.MFA&&r.a.createElement(pt.a,{id:"accounts.signin",defaultMessage:"Login"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",null,r.a.createElement(Bt,{id:"loginId",name:"loginId",ref:this.loginIdInput,value:this.state.loginId,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:this.state.MFA?{id:"accounts.mobile",defaultMessage:"Mobile"}:{id:"accounts.email_mobile",defaultMessage:"Email or mobile"},onChange:this.handleLoginIdChange})),"password"==this.state.loginWith&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"password",id:"password",name:"password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_placeholder",defaultMessage:"Password"},onChange:this.handlePasswordChange,autocomplete:"new-password"})),"code"==this.state.loginWith&&r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(Bt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(zt,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),!this.state.MFA&&this.state.loginWithPassword&&"code"===this.state.loginWith&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginWithPassword,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.switch_password",defaultMessage:"Login with password"}))),this.state.loginWithCode&&"password"===this.state.loginWith&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginWithCode,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.switch_code",defaultMessage:"Login with verfiy code"}))),!this.state.MFA&&this.props.tenant.enable_register&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement(pt.a,{id:"accounts.no_account",defaultMessage:"No Account?"}),r.a.createElement("button",{type:"button",onClick:this.goSignup,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.signup",defaultMessage:"Sign Up"}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var Ht=Object(b.b)((function(e){return{getCurrentUserId:S(e),currentUser:w(e),settings:g(e),tenant:v(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({login:Me,sendVerificationToken:Le},e)}}))(Object(f.g)(qt)),Yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){return Object(c.a)(this,a),t.call(this,e,n)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("redirect_uri");e||(e="/login"),Ge(e)}},{key:"render",value:function(){return null}}]),a}(r.a.PureComponent);var Kt=Object(b.b)((function(e){return{currentUser:w(e),settings:g(e)}}),(function(e){return{actions:Object(p.b)({logout:Ae},e)}}))(Yt),Qt=a(244);var Xt=Object(b.b)((function(e){return{tenant:v(e)}}))((function(e){e.tenant;var t=e.user,a=Object(n.useState)(!1),r=Object(at.a)(a,2),s=r[0],o=r[1],i=function(){var e=Object(C.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ge();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",null,n.createElement("nav",{className:"bg-white shadow border-gray-200"},n.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex items-center justify-between h-15"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("a",{href:"/"},n.createElement(Mt,null))),n.createElement("div",{className:"hidden md:block"},n.createElement("div",{className:"ml-10 flex items-baseline space-x-4"}))),n.createElement("div",{className:"md:block"},n.createElement("div",{className:"ml-4 flex items-center md:ml-6"},n.createElement("a",{href:"https://www.steedos.com/help/",target:"_blank",className:"p-1 text-cool-gray-400 rounded-full hover:bg-cool-gray-100 hover:text-cool-gray-500 focus:outline-none focus:shadow-outline focus:text-cool-gray-500","aria-label":"Notifications"},n.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-3 relative"},n.createElement("div",null,n.createElement("button",{className:"max-w-xs flex items-center text-sm rounded-full focus:outline-none focus:bg-cool-gray-100 lg:p-2 lg:rounded-md lg:hover:bg-cool-gray-100",id:"user-menu","aria-label":"User menu","aria-haspopup":"true",onClick:function(){return o(!s)}},n.createElement("span",{className:"inline-block h-8 w-8 rounded-full overflow-hidden bg-gray-100"},n.createElement("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"}))),n.createElement("p",{className:"hidden ml-3 text-cool-gray-700 text-sm leading-5 font-medium lg:block"},t&&t.name&&t.name),n.createElement("svg",{className:"hidden flex-shrink-0 ml-1 h-5 w-5 text-cool-gray-400 lg:block",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))),n.createElement(Qt.a,{show:s},n.createElement("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg"},n.createElement("div",{className:"py-1 rounded-md bg-white shadow-xs",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu"},n.createElement("a",{href:"#/select-space",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"\u9009\u62e9\u4f01\u4e1a"),n.createElement("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:i},"\u6ce8\u9500")))))))))))})),Jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(c.a)(this,a),(r=t.call(this,e,n)).goHome=Object(C.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.actions.goSpaceHome(r.props.location);case 1:case"end":return e.stop()}}),e)}))),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Se.getPreviousSpaceId(),a=this.props.match&&this.props.match.params?this.props.match.params.spaceId:null,n=this.props,r=n.currentSpaceId,s=n.settingsTenantId,o=a||(r||(t&&"null"!==t?t:s));o?this.props.actions.selectSpace(o).then(function(){var t=Object(C.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}if(0!=a.data){t.next=6;break}return I.push({pathname:"/select-space",search:e.props.location.search}),t.abrupt("return");case 6:return e.goHome(),t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):I.push({pathname:"/select-space",search:this.props.location.search}),this.props.currentUser&&this.props.currentSpace&&this.goHome()}},{key:"render",value:function(){return null}}]),a}(r.a.PureComponent);var $t=Object(b.b)((function(e){return{currentUser:w(e),currentSpace:Oe(e),currentSpaceId:Ie(e),tenant:v(e),settings:g(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({selectSpace:Re,goSpaceHome:Pe},e)}}))(Jt),Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(c.a)(this,a),(r=t.call(this,e,n)).handleInitParamsChange=function(e){r.setState({initParams:e.target.value})},r.goConsoleServer=function(){window.open(r.props.settings.serverInitInfo.cloud_url)},r.goHelpServer=function(){window.open(r.props.settings.serverInitInfo.help_url)},r.onSubmit=function(e){r.setState({serverError:null,loading:!0}),e.preventDefault(),r.setState({error:null});var t=r.state.initParams;if(t&&t.trim()){var a=t.trim().split("\n");if(2==a.length){var n=a[0],s=a[1];r.props.actions.initServer(n,s).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.error,t._next,!a){e.next=4;break}return r.setState({loading:!1,serverError:a}),e.abrupt("return");case 4:r.props.history.push({pathname:"/login",search:r.props.location.search});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else r.setState({loading:!1,serverError:"\u65e0\u6548\u7684\u521d\u59cb\u5316\u53c2\u6570"})}else r.setState({loading:!1,serverError:"\u8bf7\u586b\u5199\u521d\u59cb\u5316\u53c2\u6570"})},r.state={initParams:"",serverError:"",loading:!1},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{style:{zIndex:1},open:this.state.loading},r.a.createElement(rt.a,null)),r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.server_init",defaultMessage:"\u6fc0\u6d3b\u534e\u708e\u9b54\u65b9"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"textarea",id:"init_params",name:"init_params",rows:"4",autocomplete:"\u8bf7\u8f93\u5165\u6fc0\u6d3b\u53c2\u6570",value:this.state.initParams,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.init_params",defaultMessage:"\u8bf7\u8f93\u5165\u6fc0\u6d3b\u53c2\u6570"},onChange:this.handleInitParamsChange}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.goHelpServer,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(pt.a,{id:"accounts.get_init_params",defaultMessage:"\u5e2e\u52a9"}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.PureComponent);var ea=Object(b.b)((function(e){return{settings:g(e)}}),(function(e){return{actions:Object(p.b)({initServer:tt},e)}}))(Zt),ta=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;return Object(c.a)(this,a),(s=t.call(this,e,n)).handleOldPasswordChange=function(e){s.setState({oldPassword:e.target.value})},s.handleNewPasswordChange=function(e){s.setState({newPassword:e.target.value})},s.handleConfirmPasswordChange=function(e){s.setState({confirmPassword:e.target.value})},s.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),s.state.oldPassword!==s.state.newPassword){e.next=6;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.oldAndNewPasswordNotEQ"})}),e.abrupt("return");case 6:if(s.state.newPassword==s.state.confirmPassword){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.passwordNotEQ"})}),e.abrupt("return");case 9:s.props.actions.changePassword(s.state.oldPassword,s.state.newPassword).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,t&&(a=t.error),!a){e.next=8;break}return"accounts.invalid_credentials"===a.message&&(a.message="accounts.updatePassword_invalid_credentials"),s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 8:Ge("/login");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={oldPassword:"",newPassword:"",confirmPassword:"",serverError:"",loading:!1},window.browserHistory=s.props.history,document.title=ce("accounts.title.updatePassword")+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.update_password",defaultMessage:"Change Password"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"password",id:"oldPassword",name:"oldPassword",autocomplete:"old-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.oldPassword",defaultMessage:"Set oldPassword"},onChange:this.handleOldPasswordChange})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"password",id:"newPassword",name:"newPassword",autocomplete:"new-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.newPassword",defaultMessage:"Set newPassword"},onChange:this.handleNewPasswordChange})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{type:"password",id:"confirmPassword",name:"confirmPassword",autocomplete:"confirm-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.confirmPassword",defaultMessage:"Set confirmPassword"},onChange:this.handleConfirmPasswordChange}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var aa=Object(b.b)((function(e){return{getCurrentUserId:S(e),settings:g(e),tenant:v(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({changePassword:Ve},e)}}))(Object(f.g)(ta)),na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(c.a)(this,a),(r=t.call(this,e,n)).handleNameChange=function(e){r.setState({name:e.target.value})},r.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({serverError:null,loading:!0}),t.preventDefault(),r.props.actions.createSpace(r.state.name).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,console.log(a),a&&r.selectSpace(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.selectSpace=function(e){e&&e._id&&(r.props.actions.selectSpace(e._id),$e(r.props.currentUser,r.props.tenant,r.props.location))},r.state={name:""},r}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"my-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.title.createTenant",defaultMessage:"Create Team"})),r.a.createElement("div",{class:"mt-2 max-w-xl text-sm leading-5 text-gray-500"},r.a.createElement("p",null,r.a.createElement(pt.a,{id:"accounts.create_tenant_description",defaultMessage:"Create a new team and invite your colleagues to join."}))),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",null,r.a.createElement(Bt,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-2 border-b border-gray-500 bg-blue-50 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:{id:"accounts.tenant_name",defaultMessage:"Team Name"},onChange:this.handleNameChange}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"})))))}}]),a}(r.a.PureComponent);var ra=Object(b.b)((function(e){return{currentUser:w(e),settings:g(e),tenant:v(e)}}),(function(e){return{actions:Object(p.b)({createSpace:je,selectSpace:Re},e)}}))(na),sa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleCreateTenant=function(){I.push({pathname:"/create-space",search:n.props.location.search})},n.handleSpaceClick=function(e){e&&(n.props.actions.selectSpace(e._id),I.push({pathname:"/home/".concat(e._id),search:n.props.location.search}))},n.state={loadingSpaceId:"",error:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=[];return Object.keys(this.props.spaces).forEach((function(a){var n=e.props.spaces[a];t.push(r.a.createElement("li",{key:a},r.a.createElement("a",{space:n,onClick:function(t){return e.handleSpaceClick(n)},className:"w-full text-left border-b border-gray-100 block hover:bg-blue-100 focus:outline-none transition duration-150 ease-in-out"},r.a.createElement("div",{className:"flex items-center sm:px-10 py-4"},r.a.createElement("div",{className:"min-w-0 flex-1 flex items-center"},r.a.createElement("div",{className:"flex-shrink-0 pr-4 text-gray-600"},r.a.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"}))),r.a.createElement("div",{className:"min-w-0 flex-1"},r.a.createElement("div",null,r.a.createElement("div",{className:"text-lg leading-5 font-medium truncate"},n.name)))),r.a.createElement("div",null,r.a.createElement("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})))))))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto p-10"},r.a.createElement("div",{className:"relative rounded sm:shadow bg-white w-screen max-w-md"},r.a.createElement("div",{className:"sm:pt-10 sm:pl-10 sm:pr-10"},r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-6 text-left text-2xl leading-9 font-extrabold text-gray-900"},this.props.spaceCount>0&&r.a.createElement(pt.a,{id:"accounts.select_space",defaultMessage:"Select Company"}),0==this.props.spaceCount&&r.a.createElement(pt.a,{id:"accounts.no_tenant",defaultMessage:"No Company"}))),r.a.createElement("div",{className:"mt-4 bg-white overflow-hidden mb-10"},r.a.createElement("ul",{className:"border-t border-gray-100"},t),r.a.createElement("div",{className:"mt-6 mx-10 flex justify-end"},r.a.createElement("button",{type:"button",onClick:this.handleCreateTenant,className:"rounded group relative w-full justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.create_tenant",defaultMessage:"Create Company"})))))))}}]),a}(r.a.PureComponent);var oa=Object(b.b)((function(e){return{currentUser:w(e),currentSpace:Oe(e),spaces:_e(e),mySpaces:xe(e),spaceCount:Ce(e)}}),(function(e){return{actions:Object(p.b)({selectSpace:Re},e)}}))(sa);var ia=Object(b.b)((function(e){return{currentUser:w(e),settings:g(e),tenant:v(e)}}))((function(e){var t=e.currentUser,a=(e.match,e.settings,e.history,e.location),s=(e.tenant,Object(n.useState)(null)),o=Object(at.a)(s,2),i=o[0],c=o[1],l=Object(n.useState)(t.name),u=Object(at.a)(l,2),d=u[0],m=u[1],p=(new URLSearchParams(a.search).get("X-Space-Id"),Object(n.useState)({spaces:[],name:""})),f=Object(at.a)(p,2),h=(f[0],f[1],function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(null),e.prev=2,d.trim()){e.next=5;break}throw new Error("accounts.nameRequired");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),c(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xt,null),r.a.createElement("main",{className:"bg-cool-gray-100 h-screen"},r.a.createElement("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8"},r.a.createElement("div",{className:"px-4 py-8 sm:px-0"},r.a.createElement("header",null,r.a.createElement("div",{className:"max-w-7xl"},r.a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},"\u8d26\u6237\u8bbe\u7f6e"))),r.a.createElement("div",{className:"hidden sm:block"},r.a.createElement("div",{className:"py-5"},r.a.createElement("div",{className:"border-t border-gray-200"}))),r.a.createElement("div",{className:"mt-10 sm:mt-0"},r.a.createElement("div",{className:"md:grid md:grid-cols-3 md:gap-6"},r.a.createElement("div",{className:"md:col-span-1"},r.a.createElement("div",{className:"px-4 sm:px-0"},r.a.createElement("h3",{className:"text-lg font-medium leading-6 text-gray-900"},"\u4e2a\u4eba\u4fe1\u606f"))),r.a.createElement("div",{className:"mt-5 md:mt-0 md:col-span-2"},r.a.createElement("form",{onSubmit:h},r.a.createElement("div",{className:"shadow overflow-hidden sm:rounded-md"},r.a.createElement("div",{className:"px-4 py-5 bg-white sm:p-6"},r.a.createElement("div",{className:"grid grid-cols-6 gap-6"},r.a.createElement("div",{className:"col-span-6 sm:col-span-3"},r.a.createElement("label",{className:"block text-sm font-medium leading-5 text-gray-700"},"\u59d3\u540d"),r.a.createElement("input",{id:"fullname",value:d,onChange:function(e){return m(e.target.value)},className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})))),i&&r.a.createElement(jt,{error:i}),r.a.createElement("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},r.a.createElement("button",{className:"py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:shadow-outline-blue active:bg-indigo-600 transition duration-150 ease-in-out"},"\u4fdd\u5b58")))))))))))})),ca=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=Dt(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(at.a)(s,2),i=o[0],c=o[1],l="text-blue-600 hover:text-blue-600";return i>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:i>0,type:"button",onClick:function(e){c(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(pt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),i>0?" (".concat(i,")"):null))},la=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(c.a)(this,a),(s=t.call(this,e,n)).handleEmailChange=function(e){s.setState({email:e.target.value})},s.handleMobileChange=function(e){s.setState({mobile:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.verifyBy||s.state.email.trim())if("mobile"!==s.state.verifyBy||s.state.mobile.trim()){var t={email:"email"===s.state.verifyBy?s.state.email.trim():"",mobile:"mobile"===s.state.verifyBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t===s.props.currentUserId){e.next=4;break}return"email"===s.state.verifyBy&&s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.emailAlreadyExists"})}),"mobile"===s.state.verifyBy&&s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.mobileAlreadyExists"})}),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.verifyBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.verifyBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(s.state.verifyCode&&s.state.verifyCode.trim()){e.next=12;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.accounts.codeRequired"})}),e.abrupt("return");case 12:"email"===s.state.verifyBy&&s.props.actions.verifyEmail(s.state.email.trim(),s.state.verifyCode.trim()).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 4:s.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),"mobile"===s.state.verifyBy&&s.props.actions.verifyMobile(s.state.mobile.trim(),s.state.verifyCode.trim()).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 4:s.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finish=function(e){$e(s.props.currentUser,s.props.tenant,s.props.location)};return s.state={verifyBy:"email",email:"",mobile:"",verifyCode:"",serverError:"",loading:!1},window.browserHistory=s.props.history,document.title=ce("accounts.verify_".concat("email"))+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.verify_".concat(this.state.verifyBy),defaultMessage:"verify ".concat(this.state.verifyBy)})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},"email"==this.state.verifyBy&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{id:"email",name:"email",value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Email"},onChange:this.handleEmailChange})),"mobile"==this.state.verifyBy&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{id:"mobile",name:"mobile",value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Mobile"},onChange:this.handleMobileChange})),r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(Bt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(ca,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var ua=Object(b.b)((function(e){return{currentUserId:S(e),currentUser:w(e),settings:g(e),tenant:v(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({verifyEmail:Be,verifyMobile:De,sendVerificationToken:Le},e)}}))(Object(f.g)(la)),da=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=Dt(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(at.a)(s,2),i=o[0],c=o[1],l="text-blue-600 hover:text-blue-600";return i>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:i>0,type:"button",onClick:function(e){c(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(pt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),i>0?" (".concat(i,")"):null))},ma=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(c.a)(this,a),(s=t.call(this,e,n)).handleEmailChange=function(e){s.setState({email:e.target.value})},s.handleMobileChange=function(e){s.setState({mobile:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.verifyBy||s.state.email.trim())if("mobile"!==s.state.verifyBy||s.state.mobile.trim()){var t={email:"email"===s.state.verifyBy?s.state.email.trim():"",mobile:"mobile"===s.state.verifyBy?s.state.mobile.trim():""};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t===s.props.currentUserId){e.next=4;break}return"email"===s.state.verifyBy&&s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.emailAlreadyExists"})}),"mobile"===s.state.verifyBy&&s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.mobileAlreadyExists"})}),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(C.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.verifyBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.verifyBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:if(s.state.verifyCode&&s.state.verifyCode.trim()){e.next=12;break}return s.setState({serverError:r.a.createElement(pt.a,{id:"accounts.accounts.codeRequired"})}),e.abrupt("return");case 12:"email"===s.state.verifyBy&&s.props.actions.verifyEmail(s.state.email.trim(),s.state.verifyCode.trim()).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 4:s.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),"mobile"===s.state.verifyBy&&s.props.actions.verifyMobile(s.state.mobile.trim(),s.state.verifyCode.trim()).then(function(){var e=Object(C.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(pt.a,{id:a.message})}),e.abrupt("return");case 4:s.finish();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finish=function(e){$e(s.props.currentUser,s.props.tenant,s.props.location)};return s.state={verifyBy:"mobile",email:"",mobile:"",verifyCode:"",serverError:"",loading:!1},window.browserHistory=s.props.history,document.title=ce("accounts.verify_".concat("mobile"))+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(Tt,null,r.a.createElement(Mt,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(pt.a,{id:"accounts.verify_".concat(this.state.verifyBy),defaultMessage:"verify ".concat(this.state.verifyBy)})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},"email"==this.state.verifyBy&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{id:"email",name:"email",value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Email"},onChange:this.handleEmailChange})),"mobile"==this.state.verifyBy&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(Bt,{id:"mobile",name:"mobile",value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Mobile"},onChange:this.handleMobileChange})),r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(Bt,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(da,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile}))),this.state.serverError&&r.a.createElement(jt,{error:this.state.serverError}),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(pt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var pa=Object(b.b)((function(e){return{currentUserId:S(e),currentUser:w(e),settings:g(e),tenant:v(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.b)({verifyEmail:Be,verifyMobile:De,sendVerificationToken:Le},e)}}))(Object(f.g)(ma)),fa=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return t?r.a.createElement(f.b,Object.assign({},a,{render:function(e){return r.a.createElement(ut,e,r.a.createElement(t,e))}})):null},ha=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return t?r.a.createElement(f.b,Object.assign({},a,{render:function(e){return r.a.createElement(mt,e,r.a.createElement(t,e))}})):null},ba=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onConfigLoaded=function(){n.setState({configLoaded:!0})},n.state={configLoaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadMeAndConfig().then((function(t){e.onConfigLoaded()})).then((function(){}))}},{key:"render",value:function(){return this.state.configLoaded?r.a.createElement(h.a,{basename:""},r.a.createElement("div",{className:"absolute w-full h-full"},r.a.createElement(ct,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/browsers.html",exact:!0}),r.a.createElement(f.b,{path:"/logout",component:Kt}),r.a.createElement(ha,{exact:!0,path:"/",component:$t}),r.a.createElement(f.b,{path:"/init",component:ea}),r.a.createElement(fa,{path:"/signup",component:Gt}),r.a.createElement(fa,{path:"/login",component:Ht}),r.a.createElement(ha,{path:"/create-space",component:ra}),r.a.createElement(ha,{path:"/select-space",component:oa}),r.a.createElement(ha,{exact:!0,path:"/update-password",component:aa}),r.a.createElement(ha,{path:"/verify/email",component:ua}),r.a.createElement(ha,{path:"/verify/mobile",component:pa}),r.a.createElement(ha,{path:"/preference",component:ia}),r.a.createElement(ha,{path:"/home",component:$t}),r.a.createElement(ha,{path:"/home/:spaceId",component:$t}),r.a.createElement(f.a,{to:Object(i.a)(Object(i.a)({},this.props.location),{},{pathname:"/login"})})))):r.a.createElement("div",null)}}]),a}(r.a.PureComponent);var ga=Object(b.b)((function(e){return{tenant:v(e),currentUser:w(e)}}),(function(e){return{actions:Object(p.b)({loadMeAndConfig:et},e)}}))(ba);function va(e,t){var a={};if("en"===e){var n=ae()[e].translations;return Object.assign(a,n),{type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:a}}}return function(a){pe.doFetch(t).then((function(t){a({type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:t}})})).catch((function(e){console.warn("Actions - loadTranslations - recreived error: ",e)}))}}var Ea=a(514),ya=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleLocaleChange=function(e){n.loadTranslationsIfNecessary(e)},n.loadTranslationsIfNecessary=function(e){if(!n.props.translations){var t=ne(e);"en"!==e&&t&&n.props.actions.loadTranslations(e,t.url)}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.handleLocaleChange(this.props.locale)}},{key:"componentDidUpdate",value:function(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}},{key:"render",value:function(){return r.a.createElement(Ea.a,{key:this.props.locale,locale:this.props.locale,messages:this.props.translations},this.props.children)}}]),a}(r.a.PureComponent);var wa=Object(b.b)((function(e){var t=re(e);return{locale:t,translations:se(e,t)}}),(function(e){return{actions:Object(p.b)({loadTranslations:va},e)}}))(ya);o.a.render(r.a.createElement(b.a,{store:ee},r.a.createElement(wa,null,r.a.createElement(ga,null))),document.getElementById("root"))}},[[252,1,2]]]);